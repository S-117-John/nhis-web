<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zebone.nhis.emr.rec.rec.dao.EmrRecMapper">
	<resultMap id="ResultMapEmrMedRec"
		type="com.zebone.nhis.common.module.emr.rec.rec.EmrMedRec">
		<id column="PK_REC" jdbcType="CHAR" property="pkRec" />
		<result column="PK_PATREC" jdbcType="VARCHAR" property="pkPatrec" />
		<result column="NAME" jdbcType="VARCHAR" property="name" />
		<result column="SEQ_NO" jdbcType="DECIMAL" property="seqNo" />
		<result column="REC_DATE" jdbcType="TIMESTAMP" property="recDate" />
		<result column="DESCRIBE" jdbcType="VARCHAR" property="describe" />
		<result column="PK_PI" jdbcType="VARCHAR" property="pkPi" />
		<result column="TIMES" jdbcType="DECIMAL" property="times" />
		<result column="PK_PV" jdbcType="VARCHAR" property="pkPv" />
		<result column="PK_DEPT" jdbcType="VARCHAR" property="pkDept" />
		<result column="PK_WARD" jdbcType="VARCHAR" property="pkWard" />
		<result column="PK_WG" jdbcType="VARCHAR" property="pkWg" />
		<result column="TYPE_CODE" jdbcType="VARCHAR" property="typeCode" />
		<result column="PK_TMP" jdbcType="VARCHAR" property="pkTmp" />
		<result column="PK_DOC" jdbcType="VARCHAR" property="pkDoc" />
		<result column="FLAG_AUDIT" jdbcType="CHAR" property="flagAudit" />
		<result column="EU_AUDIT_LEVEL" jdbcType="DECIMAL" property="euAuditLevel" />
		<result column="AUDIT_LEVEL_SET" jdbcType="VARCHAR" property="auditLevelSet" />
		<result column="EU_DOC_STATUS" jdbcType="CHAR" property="euDocStatus" />
		<result column="EU_AUDIT_STATUS" jdbcType="CHAR" property="euAuditStatus" />
		<result column="FLAG_AUDIT_FINISH" jdbcType="CHAR" property="flagAuditFinish" />
		<result column="SUBMIT_DATE" jdbcType="TIMESTAMP" property="submitDate" />
		<result column="PK_EMP_INTERN" jdbcType="VARCHAR" property="pkEmpIntern" />
		<result column="INTERN_SIGN_DATE" jdbcType="TIMESTAMP" property="internSignDate" />
		<result column="PK_EMP_REFER_ACT" jdbcType="VARCHAR" property="pkEmpReferAct" />
		<result column="PK_EMP_REFER" jdbcType="VARCHAR" property="pkEmpRefer" />
		<result column="REFER_AUDIT_DATE" jdbcType="TIMESTAMP" property="referAuditDate" />
		<result column="REFER_SIGN_DATE" jdbcType="TIMESTAMP" property="referSignDate" />
		<result column="PK_EMP_CONSULT_ACT" jdbcType="VARCHAR"
			property="pkEmpConsultAct" />
		<result column="PK_EMP_CONSULT" jdbcType="VARCHAR" property="pkEmpConsult" />
		<result column="CONSULT_AUDIT_DATE" jdbcType="TIMESTAMP" property="consultAuditDate" />
		<result column="CONSULT_SIGN_DATE" jdbcType="TIMESTAMP" property="consultSignDate" />
		<result column="PK_EMP_DIRECTOR_ACT" jdbcType="VARCHAR"
			property="pkEmpDirectorAct" />
		<result column="PK_EMP_DIRECTOR" jdbcType="VARCHAR" property="pkEmpDirector" />
		<result column="DIRECTOR_AUDIT_DATE" jdbcType="TIMESTAMP"
			property="directorAuditDate" />
		<result column="DIRECTOR_SIGN_DATE" jdbcType="TIMESTAMP" property="directorSignDate" />
		<result column="FLAG_PRINT" jdbcType="CHAR" property="flagPrint" />
		<result column="FLAG_OPEN_EDIT" jdbcType="CHAR" property="flagOpenEdit" />
		<result column="EDIT_BEGIN_DATE" jdbcType="DATE" property="editBeginDate" />
		<result column="EDIT_END_DATE" jdbcType="DATE" property="editEndDate" />
		<result column="DEL_FLAG" jdbcType="CHAR" property="delFlag" />
		<result column="REMARK" jdbcType="VARCHAR" property="remark" />
		<result column="CREATOR" jdbcType="VARCHAR" property="creator" />
		<result column="CREATE_TIME" jdbcType="TIMESTAMP" property="createTime" />
		<result column="TS" jdbcType="TIMESTAMP" property="ts" />
		<result column="CREATE_NAME" jdbcType="VARCHAR" property="createName" />
		<result column="REFER_NAME" jdbcType="VARCHAR" property="referName" />
		<result column="REFER_ACT_NAME" jdbcType="VARCHAR" property="referActName" />
		<result column="CONSULT_NAME" jdbcType="VARCHAR" property="consultName" />
		<result column="CONSULT_ACT_NAME" jdbcType="VARCHAR" property="consultActName" />
		<result column="DIRECTOR_NAME" jdbcType="VARCHAR" property="directorName" />
		<result column="DIRECTOR_ACT_NAME" jdbcType="VARCHAR" property="directorActName" />
		<result column="TYPE_NAME" jdbcType="VARCHAR" property="typeName" />
		<association property="docType"
			javaType="com.zebone.nhis.common.module.emr.rec.dict.EmrDocType">
			<result column="TYPE_NAME" jdbcType="VARCHAR" property="name" />
			<result column="FLAG_NEW_PAGE" jdbcType="CHAR" property="flagNewPage" />
			<result column="FLAG_COURSE" jdbcType="CHAR" property="flagCourse" />
			<result column="FLAG_HOME_PAGE" jdbcType="CHAR" property="flagHomePage" />
		</association>
		<association property="medDoc" javaType="com.zebone.nhis.common.module.emr.rec.rec.EmrMedDoc">
			<result column="FILE_NAME" jdbcType="VARCHAR" property="fileName" />
			<result column="FILE_PATH" jdbcType="VARCHAR" property="filePath" />
			<result column="FILE_TYPE" jdbcType="VARCHAR" property="fileType" />
		</association>
		<association property="template" javaType="com.zebone.nhis.common.module.emr.rec.tmp.EmrTemplate">
			<result column="TEXT_TITLE" jdbcType="VARCHAR" property="textTitle" />
			<result column="TYPE_CODE" jdbcType="VARCHAR" property="typeCode" />
			<result column="TEMP_NAME" jdbcType="VARCHAR" property="name" />
			<result column="TMP_TITLE" jdbcType="VARCHAR" property="tmpTitle" />
			<result column="PK_TMP" jdbcType="CHAR" property="pkTmp" />
			<result column="EU_TYPE" jdbcType="CHAR" property="euType"/>
		</association>
	</resultMap>
	<resultMap id="ResultMapEmrMedRecWithXml"
		type="com.zebone.nhis.common.module.emr.rec.rec.EmrMedRec">
		<id column="PK_REC" jdbcType="CHAR" property="pkRec" />
		<result column="PK_PATREC" jdbcType="VARCHAR" property="pkPatrec" />
		<result column="NAME" jdbcType="VARCHAR" property="name" />
		<result column="SEQ_NO" jdbcType="DECIMAL" property="seqNo" />
		<result column="REC_DATE" jdbcType="TIMESTAMP" property="recDate" />
		<result column="DESCRIBE" jdbcType="VARCHAR" property="describe" />
		<result column="PK_PI" jdbcType="VARCHAR" property="pkPi" />
		<result column="TIMES" jdbcType="DECIMAL" property="times" />
		<result column="PK_PV" jdbcType="VARCHAR" property="pkPv" />
		<result column="PK_DEPT" jdbcType="VARCHAR" property="pkDept" />
		<result column="PK_WARD" jdbcType="VARCHAR" property="pkWard" />
		<result column="PK_WG" jdbcType="VARCHAR" property="pkWg" />
		<result column="TYPE_CODE" jdbcType="VARCHAR" property="typeCode" />
		<result column="PK_TMP" jdbcType="VARCHAR" property="pkTmp" />
		<result column="PK_DOC" jdbcType="VARCHAR" property="pkDoc" />
		<result column="FLAG_AUDIT" jdbcType="CHAR" property="flagAudit" />
		<result column="EU_AUDIT_LEVEL" jdbcType="DECIMAL" property="euAuditLevel" />
		<result column="AUDIT_LEVEL_SET" jdbcType="VARCHAR" property="auditLevelSet" />
		<result column="EU_DOC_STATUS" jdbcType="CHAR" property="euDocStatus" />
		<result column="EU_AUDIT_STATUS" jdbcType="CHAR" property="euAuditStatus" />
		<result column="FLAG_AUDIT_FINISH" jdbcType="CHAR" property="flagAuditFinish" />
		<result column="SUBMIT_DATE" jdbcType="TIMESTAMP" property="submitDate" />
		<result column="PK_EMP_INTERN" jdbcType="VARCHAR" property="pkEmpIntern" />
		<result column="INTERN_SIGN_DATE" jdbcType="TIMESTAMP" property="internSignDate" />
		<result column="PK_EMP_REFER_ACT" jdbcType="VARCHAR" property="pkEmpReferAct" />
		<result column="PK_EMP_REFER" jdbcType="VARCHAR" property="pkEmpRefer" />
		<result column="REFER_AUDIT_DATE" jdbcType="TIMESTAMP" property="referAuditDate" />
		<result column="REFER_SIGN_DATE" jdbcType="TIMESTAMP" property="referSignDate" />
		<result column="PK_EMP_CONSULT_ACT" jdbcType="VARCHAR"
			property="pkEmpConsultAct" />
		<result column="PK_EMP_CONSULT" jdbcType="VARCHAR" property="pkEmpConsult" />
		<result column="CONSULT_AUDIT_DATE" jdbcType="TIMESTAMP" property="consultAuditDate" />
		<result column="CONSULT_SIGN_DATE" jdbcType="TIMESTAMP" property="consultSignDate" />
		<result column="PK_EMP_DIRECTOR_ACT" jdbcType="VARCHAR"
			property="pkEmpDirectorAct" />
		<result column="PK_EMP_DIRECTOR" jdbcType="VARCHAR" property="pkEmpDirector" />
		<result column="DIRECTOR_AUDIT_DATE" jdbcType="TIMESTAMP"
			property="directorAuditDate" />
		<result column="DIRECTOR_SIGN_DATE" jdbcType="TIMESTAMP" property="directorSignDate" />
		<result column="DOC_XML" jdbcType="CLOB" property="docXml" />
		<result column="FLAG_PRINT" jdbcType="CHAR" property="flagPrint" />
		<result column="DEL_FLAG" jdbcType="CHAR" property="delFlag" />
		<result column="REMARK" jdbcType="VARCHAR" property="remark" />
		<result column="CREATOR" jdbcType="VARCHAR" property="creator" />
		<result column="CREATE_TIME" jdbcType="TIMESTAMP" property="createTime" />
		<result column="TS" jdbcType="TIMESTAMP" property="ts" />
		<result column="CREATE_NAME" jdbcType="VARCHAR" property="createName" />
		<association property="docType"
			javaType="com.zebone.nhis.common.module.emr.rec.dict.EmrDocType">
			<result column="TYPE_NAME" jdbcType="VARCHAR" property="name" />
			<result column="FLAG_NEW_PAGE" jdbcType="CHAR" property="flagNewPage" />
		</association>
		<association property="medDoc" javaType="com.zebone.nhis.common.module.emr.rec.rec.EmrMedDoc">
			<result column="FILE_NAME" jdbcType="VARCHAR" property="fileName" />
			<result column="FILE_PATH" jdbcType="VARCHAR" property="filePath" />
			<result column="FILE_TYPE" jdbcType="VARCHAR" property="fileType" />
		</association>
		<association property="template" javaType="com.zebone.nhis.common.module.emr.rec.tmp.EmrTemplate">
			<result column="TEXT_TITLE" jdbcType="VARCHAR" property="textTitle" />
			<result column="TYPE_CODE" jdbcType="VARCHAR" property="typeCode" />
			<result column="TEMP_NAME" jdbcType="VARCHAR" property="name" />
			<result column="TMP_TITLE" jdbcType="VARCHAR" property="tmpTitle" />
			<result column="PK_TMP" jdbcType="CHAR" property="pkTmp" />
			<result column="EU_TYPE" jdbcType="CHAR" property="euType"/>
		</association>
	</resultMap>
	<select id="getEmrMedRecById" resultMap="ResultMapEmrMedRec">
		SELECT
		*
		FROM
		EMR_MED_REC
		WHERE
		PK_REC = #{pkRec,jdbcType=CHAR}
	</select>
	<select id="queryEmrMedRecById" resultMap="ResultMapEmrMedRec">
		SELECT
		*
		FROM
		EMR_MED_REC
		WHERE
		PK_REC = #{pkRec,jdbcType=CHAR}
	</select>
	<select id="queryMedRecList" resultMap="ResultMapEmrMedRec">
		select rec.PK_REC,
			rec.PK_PATREC,
			rec.NAME,
			rec.SEQ_NO,
			rec.REC_DATE,
			rec.DESCRIBE,
			rec.PK_PI,
			rec.TIMES,
			rec.PK_PV,
			rec.PK_DEPT,
			rec.PK_WARD,
			rec.PK_WG,
			rec.TYPE_CODE,
			rec.PK_TMP,
			rec.PK_DOC,
			rec.FLAG_AUDIT,
			rec.EU_AUDIT_LEVEL,
			rec.AUDIT_LEVEL_SET,
			rec.EU_DOC_STATUS,
			rec.EU_AUDIT_STATUS,
			rec.FLAG_AUDIT_FINISH,
			rec.SUBMIT_DATE,
			rec.PK_EMP_INTERN,
			rec.INTERN_SIGN_DATE,
			rec.PK_EMP_REFER_ACT,
			rec.PK_EMP_REFER,
			rec.REFER_AUDIT_DATE,
			rec.REFER_SIGN_DATE,
			rec.PK_EMP_CONSULT_ACT,
			rec.PK_EMP_CONSULT,
			rec.CONSULT_AUDIT_DATE,
			rec.CONSULT_SIGN_DATE,
			rec.PK_EMP_DIRECTOR_ACT,
			rec.PK_EMP_DIRECTOR,
			rec.DIRECTOR_AUDIT_DATE,
			rec.DIRECTOR_SIGN_DATE,
			rec.FLAG_PRINT,
			rec.flag_open_edit,
			rec.edit_begin_date,
			rec.edit_end_date,
			rec.DEL_FLAG,
			rec.REMARK,
			rec.CREATOR,
			rec.CREATE_TIME,
			rec.TS,
			typ.name type_name,
			typ.flag_course,
			typ.flag_home_page,
			emp.name create_name,
			emp_refer.name refer_name,
			doc.file_name,
			doc.file_path,
			doc.file_type,
			emp_refer_act.name refer_act_name,
			emp_consult.name consult_name,
			emp_consult_act.name consult_act_name,
			emp_director.name director_name,
			emp_director_act.name director_act_name 
		from emr_med_rec rec inner join
			 emr_med_doc doc on rec.pk_doc=doc.pk_doc left outer join 
			 emr_doc_type typ on rec.type_code=typ.code left outer join
			 view_emr_emp_list emp on rec.creator=emp.pk_emp left outer join
			 view_emr_emp_list emp_refer on rec.pk_emp_refer=emp_refer.pk_emp left outer join
			 view_emr_emp_list emp_refer_act on rec.pk_emp_refer_act=emp_refer_act.pk_emp  left outer join
			 view_emr_emp_list emp_consult on rec.pk_emp_consult=emp_consult.pk_emp  left outer join
			 view_emr_emp_list emp_consult_act on rec.pk_emp_consult_act=emp_consult_act.pk_emp  left outer join
			 view_emr_emp_list emp_director on rec.pk_emp_director=emp_director.pk_emp  left outer join
			 view_emr_emp_list emp_director_act on rec.pk_emp_director_act=emp_director_act.pk_emp			
		WHERE rec.pk_pv = #{pkPv,jdbcType=CHAR} 
		  and rec.del_flag!='1'
		order by (case when typ.flag_course='1' then floor(typ.sort_num/100)*100 else typ.sort_num end),rec.rec_date,rec.seq_no,rec.pk_tmp
	</select>
	<select id="queryMedRecListReview" resultMap="ResultMapEmrMedRec">
		select rec.PK_REC,
			rec.PK_PATREC,
			rec.NAME,
			rec.SEQ_NO,
			rec.REC_DATE,
			rec.DESCRIBE,
			rec.PK_PI,
			rec.TIMES,
			rec.PK_PV,
			rec.PK_DEPT,
			rec.PK_WARD,
			rec.PK_WG,
			rec.TYPE_CODE,
			rec.PK_TMP,
			rec.PK_DOC,
			rec.FLAG_AUDIT,
			rec.EU_AUDIT_LEVEL,
			rec.AUDIT_LEVEL_SET,
			rec.EU_DOC_STATUS,
			rec.EU_AUDIT_STATUS,
			rec.FLAG_AUDIT_FINISH,
			rec.SUBMIT_DATE,
			rec.PK_EMP_INTERN,
			rec.INTERN_SIGN_DATE,
			rec.PK_EMP_REFER_ACT,
			rec.PK_EMP_REFER,
			rec.REFER_AUDIT_DATE,
			rec.REFER_SIGN_DATE,
			rec.PK_EMP_CONSULT_ACT,
			rec.PK_EMP_CONSULT,
			rec.CONSULT_AUDIT_DATE,
			rec.CONSULT_SIGN_DATE,
			rec.PK_EMP_DIRECTOR_ACT,
			rec.PK_EMP_DIRECTOR,
			rec.DIRECTOR_AUDIT_DATE,
			rec.DIRECTOR_SIGN_DATE,
			rec.FLAG_PRINT,
			rec.flag_open_edit,
			rec.edit_begin_date,
			rec.edit_end_date,
			rec.DEL_FLAG,
			rec.REMARK,
			rec.CREATOR,
			rec.CREATE_TIME,
			rec.TS,
			typ.name type_name,
			typ.flag_course,
			typ.flag_home_page,
			emp.name create_name,
			emp_refer.name refer_name,
			tmp.eu_type,
			tmp.flag_pub,
			doc.file_name,
			doc.file_path,
			doc.file_type,
			emp_refer_act.name refer_act_name,
			emp_consult.name consult_name,
			emp_consult_act.name consult_act_name,
			emp_director.name director_name,
			emp_director_act.name director_act_name 
		from emr_med_rec rec inner join
			 emr_med_doc doc on rec.pk_doc=doc.pk_doc left outer join 
			 emr_doc_type typ on rec.type_code=typ.code left outer join
			 emr_template tmp on rec.pk_tmp=tmp.pk_tmp left outer join
			 view_emr_emp_list emp on rec.creator=emp.pk_emp left outer join
			 view_emr_emp_list emp_refer on rec.pk_emp_refer=emp_refer.pk_emp  left outer join
			 view_emr_emp_list emp_refer_act on rec.pk_emp_refer_act=emp_refer_act.pk_emp  left outer join
			 view_emr_emp_list emp_consult on rec.pk_emp_consult=emp_consult.pk_emp  left outer join
			 view_emr_emp_list emp_consult_act on rec.pk_emp_consult_act=emp_consult_act.pk_emp  left outer join
			 view_emr_emp_list emp_director on rec.pk_emp_director=emp_director.pk_emp  left outer join
			 view_emr_emp_list emp_director_act on rec.pk_emp_director_act=emp_director_act.pk_emp
		WHERE rec.pk_pv = #{pkPv,jdbcType=CHAR} 
		  and rec.del_flag!='1'
		  and (tmp.eu_type = #{euType,jdbcType=VARCHAR} or tmp.flag_pub='1')
		order by (case when typ.flag_course='1' then floor(typ.sort_num/100)*100 else typ.sort_num end),rec.rec_date,rec.seq_no,rec.pk_tmp
	</select>
	<select id="queryMedRecListByFlagRecover" resultMap="ResultMapEmrMedRec">
		select 
		    rec.PK_REC,
			rec.NAME,
	        rec.SEQ_NO,
			rec.PK_PV,
			rec.TYPE_CODE,
			rec.PK_DOC,
			rec.CREATE_TIME,
			(case when rec.PK_PATREC is not null then '病历' else '护理' end) type_name
		from emr_med_rec rec inner join
			 emr_med_doc doc on rec.pk_doc=doc.pk_doc left outer join 
			 emr_doc_type typ on rec.type_code=typ.code left outer join
			 emr_template tmp on rec.pk_tmp=tmp.pk_tmp left outer join
			 view_emr_emp_list emp on rec.creator=emp.pk_emp left outer join
			 view_emr_emp_list emp_refer on rec.pk_emp_refer=emp_refer.pk_emp  left outer join
			 view_emr_emp_list emp_refer_act on rec.pk_emp_refer_act=emp_refer_act.pk_emp  left outer join
			 view_emr_emp_list emp_consult on rec.pk_emp_consult=emp_consult.pk_emp  left outer join
			 view_emr_emp_list emp_consult_act on rec.pk_emp_consult_act=emp_consult_act.pk_emp  left outer join
			 view_emr_emp_list emp_director on rec.pk_emp_director=emp_director.pk_emp  left outer join
			 view_emr_emp_list emp_director_act on rec.pk_emp_director_act=emp_director_act.pk_emp
		WHERE rec.pk_pv = #{pkPv,jdbcType=CHAR} 
		  and rec.del_flag='1'
		  union all
		select
			nd.PK_RECORD PK_REC,
			tmp.NAME+' '+CONVERT(varchar(100), nd.CREATE_TIME, 20) as NAME,
			null,
			nd.PK_PV,
			tmp.TYPE_CODE,
			null,
			nd.CREATE_TIME,
			'护理记录单' type_name
		from ND_RECORD nd
		inner join EMR_TEMPLATE tmp on nd.PK_TEMPLATE=tmp.PK_TMP
		where PK_PV=#{pkPv,jdbcType=CHAR}  and nd.DEL_FLAG='1'
	</select>
	<select id="queryMedRecListByPvs" resultMap="ResultMapEmrMedRec">
		select rec.PK_REC,
			rec.PK_PATREC,
			rec.NAME,
			rec.SEQ_NO,
			rec.REC_DATE,
			rec.DESCRIBE,
			rec.PK_PI,
			rec.TIMES,
			rec.PK_PV,
			rec.PK_DEPT,
			rec.PK_WARD,
			rec.PK_WG,
			rec.TYPE_CODE,
			rec.PK_TMP,
			rec.PK_DOC,
			rec.FLAG_AUDIT,
			rec.EU_AUDIT_LEVEL,
			rec.AUDIT_LEVEL_SET,
			rec.EU_DOC_STATUS,
			rec.EU_AUDIT_STATUS,
			rec.FLAG_AUDIT_FINISH,
			rec.SUBMIT_DATE,
			rec.PK_EMP_INTERN,
			rec.INTERN_SIGN_DATE,
			rec.PK_EMP_REFER_ACT,
			rec.PK_EMP_REFER,
			rec.REFER_AUDIT_DATE,
			rec.REFER_SIGN_DATE,
			rec.PK_EMP_CONSULT_ACT,
			rec.PK_EMP_CONSULT,
			rec.CONSULT_AUDIT_DATE,
			rec.CONSULT_SIGN_DATE,
			rec.PK_EMP_DIRECTOR_ACT,
			rec.PK_EMP_DIRECTOR,
			rec.DIRECTOR_AUDIT_DATE,
			rec.DIRECTOR_SIGN_DATE,
			rec.FLAG_PRINT,
			rec.DEL_FLAG,
			rec.REMARK,
			rec.CREATOR,
			rec.CREATE_TIME,
			rec.TS,
			typ.name type_name,
			emp.name create_name,
			doc.file_name,
			doc.file_path,
			doc.file_type 
		from emr_med_rec rec,emr_doc_type typ,view_emr_emp_list emp,emr_med_doc doc
		WHERE rec.pk_pv 
		in
		 <foreach collection="list" item="vo" index="index"
            open="(" close=")" separator=",">
            #{vo.pkPv} 
        </foreach>
 		  and rec.del_flag!='1'
		  and rec.pk_doc=doc.pk_doc
		  and rec.type_code=typ.code
		  and rec.creator=emp.pk_emp
		order by floor(typ.sort_num/100)*100,rec.rec_date,rec.seq_no,rec.pk_tmp
	</select>
	<resultMap id="ResultMapEmrMedRecAll"
		type="com.zebone.nhis.common.module.emr.rec.rec.EmrMedRec">
		<id column="PK_REC" jdbcType="CHAR" property="pkRec" />
		<result column="PK_PATREC" jdbcType="VARCHAR" property="pkPatrec" />
		<result column="NAME" jdbcType="VARCHAR" property="name" />
		<result column="SEQ_NO" jdbcType="DECIMAL" property="seqNo" />
		<result column="REC_DATE" jdbcType="TIMESTAMP" property="recDate" />
		<result column="DESCRIBE" jdbcType="VARCHAR" property="describe" />
		<result column="PK_PI" jdbcType="VARCHAR" property="pkPi" />
		<result column="TIMES" jdbcType="DECIMAL" property="times" />
		<result column="PK_PV" jdbcType="VARCHAR" property="pkPv" />
		<result column="PK_DEPT" jdbcType="VARCHAR" property="pkDept" />
		<result column="PK_WARD" jdbcType="VARCHAR" property="pkWard" />
		<result column="PK_WG" jdbcType="VARCHAR" property="pkWg" />
		<result column="TYPE_CODE" jdbcType="VARCHAR" property="typeCode" />
		<result column="PK_TMP" jdbcType="VARCHAR" property="pkTmp" />
		<result column="PK_DOC" jdbcType="VARCHAR" property="pkDoc" />
		<result column="FLAG_AUDIT" jdbcType="CHAR" property="flagAudit" />
		<result column="EU_AUDIT_LEVEL" jdbcType="DECIMAL" property="euAuditLevel" />
		<result column="AUDIT_LEVEL_SET" jdbcType="VARCHAR" property="auditLevelSet" />
		<result column="EU_DOC_STATUS" jdbcType="CHAR" property="euDocStatus" />
		<result column="EU_AUDIT_STATUS" jdbcType="CHAR" property="euAuditStatus" />
		<result column="FLAG_AUDIT_FINISH" jdbcType="CHAR" property="flagAuditFinish" />
		<result column="SUBMIT_DATE" jdbcType="TIMESTAMP" property="submitDate" />
		<result column="PK_EMP_INTERN" jdbcType="VARCHAR" property="pkEmpIntern" />
		<result column="INTERN_SIGN_DATE" jdbcType="DATE" property="internSignDate" />
		<result column="PK_EMP_REFER_ACT" jdbcType="VARCHAR" property="pkEmpReferAct" />
		<result column="PK_EMP_REFER" jdbcType="VARCHAR" property="pkEmpRefer" />
		<result column="REFER_AUDIT_DATE" jdbcType="DATE" property="referAuditDate" />
		<result column="REFER_SIGN_DATE" jdbcType="DATE" property="referSignDate" />
		<result column="PK_EMP_CONSULT_ACT" jdbcType="VARCHAR"
			property="pkEmpConsultAct" />
		<result column="PK_EMP_CONSULT" jdbcType="VARCHAR" property="pkEmpConsult" />
		<result column="CONSULT_AUDIT_DATE" jdbcType="DATE" property="consultAuditDate" />
		<result column="CONSULT_SIGN_DATE" jdbcType="DATE" property="consultSignDate" />
		<result column="PK_EMP_DIRECTOR_ACT" jdbcType="VARCHAR"
			property="pkEmpDirectorAct" />
		<result column="PK_EMP_DIRECTOR" jdbcType="VARCHAR" property="pkEmpDirector" />
		<result column="DIRECTOR_AUDIT_DATE" jdbcType="DATE"
			property="directorAuditDate" />
		<result column="DIRECTOR_SIGN_DATE" jdbcType="DATE" property="directorSignDate" />
		<result column="FLAG_PRINT" jdbcType="CHAR" property="flagPrint" />
		<result column="DEL_FLAG" jdbcType="CHAR" property="delFlag" />
		<result column="REMARK" jdbcType="VARCHAR" property="remark" />
		<result column="CREATOR" jdbcType="VARCHAR" property="creator" />
		<result column="CREATE_TIME" jdbcType="DATE" property="createTime" />
		<result column="TS" jdbcType="DATE" property="ts" />
		<association property="template"
			javaType="com.zebone.nhis.common.module.emr.rec.tmp.EmrTemplate">
			<id column="PK_TMP" jdbcType="CHAR" property="pkTmp" />
			<result column="PK_ORG" jdbcType="VARCHAR" property="pkOrg" />
			<result column="NAME" jdbcType="VARCHAR" property="name" />
			<result column="DESCRIBE" jdbcType="VARCHAR" property="describe" />
			<result column="TYPE_CODE" jdbcType="VARCHAR" property="typeCode" />
			<result column="EU_TMP_LEVEL" jdbcType="DECIMAL" property="euTmpLevel" />
			<result column="TMP_TITLE" jdbcType="VARCHAR" property="tmpTitle" />
			<result column="TEXT_TITLE" jdbcType="VARCHAR" property="textTitle" />
			<result column="SORT_CODE" jdbcType="DECIMAL" property="sortCode" />
			<result column="PY_CODE" jdbcType="VARCHAR" property="pyCode" />
			<result column="D_CODE" jdbcType="VARCHAR" property="dCode" />
			<result column="PK_DEPT" jdbcType="VARCHAR" property="pkDept" />
			<result column="PK_WARD" jdbcType="VARCHAR" property="pkWard" />
			<result column="EU_STATUS" jdbcType="CHAR" property="euStatus" />
			<result column="FLAG_AUDIT" jdbcType="CHAR" property="flagAudit" />
			<result column="AUDIT_LEVEL" jdbcType="DECIMAL" property="auditLevel" />
			<result column="AUDIT_LEVEL_SET" jdbcType="VARCHAR" property="auditLevelSet" />
			<result column="LIMIT_NUM" jdbcType="DECIMAL" property="limitNum" />
			<result column="FLAG_DEFAULT" jdbcType="CHAR" property="flagDefault" />
			<result column="FLAG_OPEN" jdbcType="CHAR" property="flagOpen" />
			<result column="FLAG_MERGE" jdbcType="CHAR" property="flagMerge" />
			<result column="PK_EMP" jdbcType="VARCHAR" property="pkEmp" />
			<result column="DEL_FLAG" jdbcType="CHAR" property="delFlag" />
			<result column="DOC_DATA" jdbcType="BLOB" property="docData" />
			<result column="DOC_XML" jdbcType="CLOB" property="docXml" />
			<result column="ASSOCIATION_RULES" jdbcType="CLOB" property="associationRules" />
			<result column="TMP_PATH" jdbcType="VARCHAR" property="tmpPath" />
			<result column="REMARK" jdbcType="VARCHAR" property="remark" />
			<result column="CREATOR" jdbcType="VARCHAR" property="creator" />
			<result column="CREATE_TIME" jdbcType="DATE" property="createTime" />
			<result column="EU_TYPE" jdbcType="CHAR" property="euType"/>
			<result column="TS" jdbcType="DATE" property="ts" />
		</association>
		<association property="docType"
			javaType="com.zebone.nhis.common.module.emr.rec.dict.EmrDocType">
			<id column="PK_DOCTYPE" jdbcType="CHAR" property="pkDoctype" />
			<result column="PK_ORG" jdbcType="VARCHAR" property="pkOrg" />
			<result column="CODE" jdbcType="VARCHAR" property="code" />
			<result column="TYPE_NAME" jdbcType="VARCHAR" property="name" />
			<result column="PARENT_TYPE" jdbcType="VARCHAR" property="parentType" />
			<result column="LEVELS" jdbcType="DECIMAL" property="levels" />
			<result column="PY_CODE" jdbcType="VARCHAR" property="pyCode" />
			<result column="D_CODE" jdbcType="VARCHAR" property="dCode" />
			<result column="WS_CODE" jdbcType="VARCHAR" property="wsCode" />
			<result column="EU_VISIT" jdbcType="CHAR" property="euVisit" />
			<result column="EU_USED" jdbcType="CHAR" property="euUsed" />
			<result column="SORT_NUM" jdbcType="DECIMAL" property="sortNum" />
			<result column="TITLE" jdbcType="VARCHAR" property="title" />
			<result column="FLAG_COURSE" jdbcType="CHAR" property="flagCourse" />
			<result column="FLAG_FIRST" jdbcType="CHAR" property="flagFirst" />
			<result column="FLAG_NEW_PAGE" jdbcType="CHAR" property="flagNewPage" />
			<result column="DEL_FLAG" jdbcType="CHAR" property="delFlag" />
			<result column="PK_DEPT" jdbcType="VARCHAR" property="pkDept" />
			<result column="PK_WARD" jdbcType="VARCHAR" property="pkWard" />
			<result column="REMARK" jdbcType="VARCHAR" property="remark" />
			<result column="CREATOR" jdbcType="VARCHAR" property="creator" />
			<result column="CREATE_TIME" jdbcType="DATE" property="createTime" />
			<result column="TS" jdbcType="DATE" property="ts" />
		</association>
	</resultMap>
	<select id="queryMedRecListAll" resultMap="ResultMapEmrMedRecAll">
		select rec.*,tmp.*,typ.*,typ.name type_name
		from emr_med_rec rec
		left outer join emr_template tmp
		on rec.pk_tmp = tmp.pk_tmp
		left outer join emr_doc_type typ
		on rec.type_code = typ.code
		where pk_pv = #{pkPv,jdbcType=CHAR} and rec.del_flag!='1'
		order by floor(typ.sort_num/100)*100,rec.rec_date,rec.seq_no,rec.pk_rec
	</select>
	<select id="findAllEmrMedRec" resultMap="ResultMapEmrMedRec">
		SELECT * FROM EMR_MED_REC
	</select>

	<delete id="deleteEmrMedRec">
		DELETE
		FROM
		EMR_MED_REC
		WHERE
		PK_REC = #{pkRec,jdbcType=CHAR}
	</delete>

	<insert id="saveEmrMedRec" parameterType="com.zebone.nhis.common.module.emr.rec.rec.EmrMedRec">
		INSERT INTO EMR_MED_REC
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="pkRec != null">
				PK_REC,
			</if>
			<if test="pkPatrec != null">
				PK_PATREC,
			</if>
			<if test="name != null">
				NAME,
			</if>
			<if test="seqNo != null">
				SEQ_NO,
			</if>
			<if test="recDate != null">
				REC_DATE,
			</if>
			<if test="describe != null">
				DESCRIBE,
			</if>
			<if test="pkPi != null">
				PK_PI,
			</if>
			<if test="times != null">
				TIMES,
			</if>
			<if test="pkPv != null">
				PK_PV,
			</if>
			<if test="pkDept != null">
				PK_DEPT,
			</if>
			<if test="pkWard != null">
				PK_WARD,
			</if>
			<if test="pkWg != null">
				PK_WG,
			</if>
			<if test="typeCode != null">
				TYPE_CODE,
			</if>
			<if test="pkTmp != null">
				PK_TMP,
			</if>
			<if test="pkDoc != null">
				PK_DOC,
			</if>
			<if test="flagAudit != null">
				FLAG_AUDIT,
			</if>
			<if test="euAuditLevel != null">
				EU_AUDIT_LEVEL,
			</if>
			<if test="auditLevelSet != null">
				AUDIT_LEVEL_SET,
			</if>
			<if test="euDocStatus != null">
				EU_DOC_STATUS,
			</if>
			<if test="euAuditStatus != null">
				EU_AUDIT_STATUS,
			</if>
			<if test="flagAuditFinish != null">
				FLAG_AUDIT_FINISH,
			</if>
			<if test="submitDate != null">
				SUBMIT_DATE,
			</if>			
			<if test="pkEmpIntern != null">
				PK_EMP_INTERN,
			</if>
			<if test="internSignDate != null">
				INTERN_SIGN_DATE,
			</if>
			<if test="pkEmpReferAct != null">
				PK_EMP_REFER_ACT,
			</if>
			<if test="pkEmpRefer != null">
				PK_EMP_REFER,
			</if>
			<if test="referAuditDate != null">
				REFER_AUDIT_DATE,
			</if>
			<if test="referSignDate != null">
				REFER_SIGN_DATE,
			</if>
			<if test="pkEmpConsultAct != null">
				PK_EMP_CONSULT_ACT,
			</if>
			<if test="pkEmpConsult != null">
				PK_EMP_CONSULT,
			</if>
			<if test="consultAuditDate != null">
				CONSULT_AUDIT_DATE,
			</if>
			<if test="consultSignDate != null">
				CONSULT_SIGN_DATE,
			</if>
			<if test="pkEmpDirectorAct != null">
				PK_EMP_DIRECTOR_ACT,
			</if>
			<if test="pkEmpDirector != null">
				PK_EMP_DIRECTOR,
			</if>
			<if test="directorAuditDate != null">
				DIRECTOR_AUDIT_DATE,
			</if>
			<if test="directorSignDate != null">
				DIRECTOR_SIGN_DATE,
			</if>
			<if test="flagPrint != null">
				FLAG_PRINT,
			</if>
			<if test="flagBack != null">
				FLAG_BACK,
			</if>
			<if test="delFlag != null">
				DEL_FLAG,
			</if>
			<if test="remark != null">
				REMARK,
			</if>
			<if test="creator != null">
				CREATOR,
			</if>
			<if test="createTime != null">
				CREATE_TIME,
			</if>
			<if test="ts != null">
				TS,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="pkRec != null">
				#{pkRec,jdbcType=CHAR},
			</if>
			<if test="pkPatrec != null">
				#{pkPatrec,jdbcType=VARCHAR},
			</if>
			<if test="name != null">
				#{name,jdbcType=VARCHAR},
			</if>
			<if test="seqNo != null">
				#{seqNo,jdbcType=DECIMAL},
			</if>
			<if test="recDate != null">
				#{recDate,jdbcType=TIMESTAMP},
			</if>
			<if test="describe != null">
				#{describe,jdbcType=VARCHAR},
			</if>
			<if test="pkPi != null">
				#{pkPi,jdbcType=VARCHAR},
			</if>
			<if test="times != null">
				#{times,jdbcType=DECIMAL},
			</if>
			<if test="pkPv != null">
				#{pkPv,jdbcType=VARCHAR},
			</if>
			<if test="pkDept != null">
				#{pkDept,jdbcType=VARCHAR},
			</if>
			<if test="pkWard != null">
				#{pkWard,jdbcType=VARCHAR},
			</if>
			<if test="pkWg != null">
				#{pkWg,jdbcType=VARCHAR},
			</if>
			<if test="typeCode != null">
				#{typeCode,jdbcType=VARCHAR},
			</if>
			<if test="pkTmp != null">
				#{pkTmp,jdbcType=VARCHAR},
			</if>
			<if test="pkDoc != null">
				#{pkDoc,jdbcType=VARCHAR},
			</if>
			<if test="flagAudit != null">
				#{flagAudit,jdbcType=CHAR},
			</if>
			<if test="euAuditLevel != null">
				#{euAuditLevel,jdbcType=DECIMAL},
			</if>
			<if test="auditLevelSet != null">
				#{auditLevelSet,jdbcType=VARCHAR},
			</if>
			<if test="euDocStatus != null">
				#{euDocStatus,jdbcType=CHAR},
			</if>
			<if test="euAuditStatus != null">
				#{euAuditStatus,jdbcType=CHAR},
			</if>
			<if test="flagAuditFinish != null">
				#{flagAuditFinish,jdbcType=CHAR},
			</if>
			<if test="submitDate != null">
				#{submitDate,jdbcType=DATE},
			</if>
			<if test="pkEmpIntern != null">
				#{pkEmpIntern,jdbcType=VARCHAR},
			</if>
			<if test="internSignDate != null">
				#{internSignDate,jdbcType=DATE},
			</if>
			<if test="pkEmpReferAct != null">
				#{pkEmpReferAct,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpRefer != null">
				#{pkEmpRefer,jdbcType=VARCHAR},
			</if>
			<if test="referSignDate != null">
				#{referSignDate,jdbcType=DATE},
			</if>
			<if test="pkEmpConsultAct != null">
				#{pkEmpConsultAct,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpConsult != null">
				#{pkEmpConsult,jdbcType=VARCHAR},
			</if>
			<if test="consultAuditDate != null">
				#{consultAuditDate,jdbcType=DATE},
			</if>
			<if test="consultSignDate != null">
				#{consultSignDate,jdbcType=DATE},
			</if>
			<if test="pkEmpDirectorAct != null">
				#{pkEmpDirectorAct,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpDirector != null">
				#{pkEmpDirector,jdbcType=VARCHAR},
			</if>
			<if test="directorAuditDate != null">
				#{directorAuditDate,jdbcType=DATE},
			</if>
			<if test="directorSignDate != null">
				#{directorSignDate,jdbcType=DATE},
			</if>
			<if test="flagPrint != null">
				#{flagPrint,jdbcType=CHAR},
			</if>
			<if test="flagBack != null">
				FLAG_BACK = #{flagBack,jdbcType=CHAR},
			</if>
			<if test="delFlag != null">
				#{delFlag,jdbcType=CHAR},
			</if>
			<if test="remark != null">
				#{remark,jdbcType=VARCHAR},
			</if>
			<if test="creator != null">
				#{creator,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				#{createTime,jdbcType=DATE},
			</if>
			<if test="ts != null">
				#{ts,jdbcType=DATE},
			</if>
		</trim>
	</insert>

	<update id="updateEmrMedRec" parameterType="com.zebone.nhis.common.module.emr.rec.rec.EmrMedRec">
		UPDATE EMR_MED_REC
		<set>
			<if test="pkRec != null">
				PK_REC = #{pkRec,jdbcType=CHAR},
			</if>
			<if test="pkPatrec != null">
				PK_PATREC = #{pkPatrec,jdbcType=VARCHAR},
			</if>
			<if test="name != null">
				NAME = #{name,jdbcType=VARCHAR},
			</if>
			<if test="seqNo != null">
				SEQ_NO = #{seqNo,jdbcType=DECIMAL},
			</if>
			<if test="recDate != null">
				REC_DATE = #{recDate,jdbcType=TIMESTAMP},
			</if>
			<if test="describe != null">
				DESCRIBE = #{describe,jdbcType=VARCHAR},
			</if>
			<if test="pkPi != null">
				PK_PI = #{pkPi,jdbcType=VARCHAR},
			</if>
			<if test="times != null">
				TIMES = #{times,jdbcType=DECIMAL},
			</if>
			<if test="pkPv != null">
				PK_PV = #{pkPv,jdbcType=VARCHAR},
			</if>
			<if test="pkDept != null">
				PK_DEPT = #{pkDept,jdbcType=VARCHAR},
			</if>
			<if test="pkWard != null">
				PK_WARD = #{pkWard,jdbcType=VARCHAR},
			</if>
			<if test="pkWg != null">
				PK_WG = #{pkWg,jdbcType=VARCHAR},
			</if>
			<if test="typeCode != null">
				TYPE_CODE = #{typeCode,jdbcType=VARCHAR},
			</if>
			<if test="pkTmp != null">
				PK_TMP = #{pkTmp,jdbcType=VARCHAR},
			</if>
			<if test="pkDoc != null">
				PK_DOC = #{pkDoc,jdbcType=VARCHAR},
			</if>
			<if test="flagAudit != null">
				FLAG_AUDIT = #{flagAudit,jdbcType=CHAR},
			</if>
			<if test="euAuditLevel != null">
				EU_AUDIT_LEVEL = #{euAuditLevel,jdbcType=DECIMAL},
			</if>
			<if test="auditLevelSet != null">
				AUDIT_LEVEL_SET = #{auditLevelSet,jdbcType=VARCHAR},
			</if>
			<if test="euDocStatus != null">
				EU_DOC_STATUS = #{euDocStatus,jdbcType=CHAR},
			</if>
			<if test="euAuditStatus != null">
				EU_AUDIT_STATUS = #{euAuditStatus,jdbcType=CHAR},
			</if>
			<if test="flagAuditFinish != null">
				FLAG_AUDIT_FINISH = #{flagAuditFinish,jdbcType=CHAR},
			</if>
			<if test="submitDate != null">
				SUBMIT_DATE = #{submitDate,jdbcType=TIMESTAMP},
			</if>			
			PK_EMP_INTERN = #{pkEmpIntern,jdbcType=VARCHAR},
			INTERN_SIGN_DATE = #{internSignDate,jdbcType=TIMESTAMP},
			PK_EMP_REFER_ACT = #{pkEmpReferAct,jdbcType=VARCHAR},
			<!-- <if test="pkEmpRefer != null" > -->
			PK_EMP_REFER = #{pkEmpRefer,jdbcType=VARCHAR},
			REFER_AUDIT_DATE = #{referAuditDate,jdbcType=TIMESTAMP},
			<!-- </if> -->
			<!-- <if test="referSignDate != null" > -->
			REFER_SIGN_DATE = #{referSignDate,jdbcType=TIMESTAMP},
			<!-- </if> -->
			<if test="pkEmpConsultAct != null">
				PK_EMP_CONSULT_ACT = #{pkEmpConsultAct,jdbcType=VARCHAR},
			</if>
			<!-- <if test="pkEmpConsult != null" > -->
			PK_EMP_CONSULT = #{pkEmpConsult,jdbcType=VARCHAR},
			<!-- </if> -->
			<!-- <if test="consultAuditDate != null" > -->
			CONSULT_AUDIT_DATE = #{consultAuditDate,jdbcType=TIMESTAMP},
			<!-- </if> -->
			<!-- <if test="consultSignDate != null" > -->
			CONSULT_SIGN_DATE = #{consultSignDate,jdbcType=TIMESTAMP},
			<!-- </if> -->
			<if test="pkEmpDirectorAct != null">
				PK_EMP_DIRECTOR_ACT = #{pkEmpDirectorAct,jdbcType=VARCHAR},
			</if>
			<!-- <if test="pkEmpDirector != null" > -->
			PK_EMP_DIRECTOR = #{pkEmpDirector,jdbcType=VARCHAR},
			<!-- </if> -->
			<!-- <if test="directorAuditDate != null" > -->
			DIRECTOR_AUDIT_DATE = #{directorAuditDate,jdbcType=TIMESTAMP},
			<!-- </if> -->
			<!-- <if test="directorSignDate != null" > -->
			DIRECTOR_SIGN_DATE = #{directorSignDate,jdbcType=TIMESTAMP},
			<if test="flagPrint != null">
				FLAG_PRINT = #{flagPrint,jdbcType=CHAR},
			</if>
			<if test="flagBack != null">
				FLAG_BACK = #{flagBack,jdbcType=CHAR},
			</if>
			<if test="delFlag != null">
				DEL_FLAG = #{delFlag,jdbcType=CHAR},
			</if>
			<if test="remark != null">
				REMARK = #{remark,jdbcType=VARCHAR},
			</if>
			<if test="creator != null">
				CREATOR = #{creator,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				CREATE_TIME = #{createTime,jdbcType=DATE},
			</if>
			<if test="ts != null">
				TS = #{ts,jdbcType=DATE},
			</if>
		</set>
		WHERE
		PK_REC = #{pkRec,jdbcType=CHAR}
	</update>

	<resultMap id="ResultMapMedDoc"
		type="com.zebone.nhis.common.module.emr.rec.rec.EmrMedDoc">
		<id column="PK_DOC" jdbcType="CHAR" property="pkDoc" />
		<result column="PK_ORG" jdbcType="VARCHAR" property="pkOrg" />
		<result column="DOC_DATA" jdbcType="BLOB" property="docData" />
		<result column="DOC_XML" jdbcType="CLOB" property="docXml" />
		<result column="DOC_DATA_BAK" jdbcType="BLOB" property="docDataBak" />
		<result column="DOC_XML_BAK" jdbcType="CLOB" property="docXmlBak" />
		<result column="DEL_FLAG" jdbcType="CHAR" property="delFlag" />
		<result column="CREATOR" jdbcType="VARCHAR" property="creator" />
		<result column="CREATE_TIME" jdbcType="DATE" property="createTime" />
		<result column="TS" jdbcType="DATE" property="ts" />
		<result column="FILE_NAME" jdbcType="VARCHAR" property="fileName" />
		<result column="FILE_PATH" jdbcType="VARCHAR" property="filePath" />
		<result column="FILE_TYPE" jdbcType="VARCHAR" property="fileType" />
	</resultMap>
	<select id="getEmrMedDocById" resultMap="ResultMapMedDoc">
		SELECT
		 PK_DOC,DOC_DATA,DOC_XML,DEL_FLAG,CREATOR,CREATE_TIME,TS,FILE_NAME,FILE_PATH,FILE_TYPE 
		FROM
		EMR_MED_DOC
		WHERE
		PK_DOC = #{pkDoc,jdbcType=CHAR}
	</select>
	<select id="queryEmrMedDocById" resultMap="ResultMapMedDoc">
		SELECT
		*
		FROM
		EMR_MED_DOC
		WHERE
		PK_DOC = #{pkDoc,jdbcType=CHAR}
	</select>
	<select id="queryEmrMedDocByIdEmr" resultMap="ResultMapMedDoc">
		SELECT
		*
		FROM 
		${dbName}EMR_MED_DOC
		WHERE
		PK_DOC = #{pkDoc,jdbcType=CHAR}
	</select>
	<select id="findAllEmrMedDoc" resultMap="ResultMapMedDoc">
		SELECT * FROM EMR_MED_DOC
	</select>

	<delete id="deleteEmrMedDoc">
		DELETE
		FROM
		EMR_MED_DOC
		WHERE
		PK_DOC = #{pkDoc,jdbcType=CHAR}
	</delete>
	
	<delete id="deleteEmrMedDocEmr">
		DELETE
		FROM 
		${dbName}EMR_MED_DOC
		WHERE
		PK_DOC = #{pkDoc,jdbcType=CHAR}
	</delete>
	<insert id="saveEmrMedDoc" parameterType="com.zebone.nhis.common.module.emr.rec.rec.EmrMedDoc">
		INSERT INTO EMR_MED_DOC
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="pkDoc != null">
				PK_DOC,
			</if>
			<if test="pkOrg != null">
				PK_ORG,
			</if>
			<if test="docData != null">
				DOC_DATA,
			</if>
			<if test="docXml != null">
				DOC_XML,
			</if>
			<if test="docDataBak != null">
				DOC_DATA_BAK,
			</if>
			<if test="docXmlBak != null">
				DOC_XML_BAK,
			</if>
			<if test="delFlag != null">
				DEL_FLAG,
			</if>
			<if test="creator != null">
				CREATOR,
			</if>
			<if test="createTime != null">
				CREATE_TIME,
			</if>
			<if test="ts != null">
				TS,
			</if>
			<if test="fileName != null">
				FILE_NAME,
			</if>
			<if test="filePath != null">
				FILE_PATH,
			</if>
			<if test="fileType != null">
				FILE_TYPE,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="pkDoc != null">
				#{pkDoc,jdbcType=CHAR},
			</if>
			<if test="pkOrg != null">
				#{pkOrg,jdbcType=VARCHAR},
			</if>
			<if test="docData != null">
				#{docData,jdbcType=BLOB},
			</if>
			<if test="docXml != null">
				#{docXml,jdbcType=CLOB},
			</if>
			<if test="docDataBak != null">
				#{docDataBak,jdbcType=BLOB},
			</if>
			<if test="docXmlBak != null">
				#{docXmlBak,jdbcType=CLOB},
			</if>
			<if test="delFlag != null">
				#{delFlag,jdbcType=CHAR},
			</if>
			<if test="creator != null">
				#{creator,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				#{createTime,jdbcType=DATE},
			</if>
			<if test="ts != null">
				#{ts,jdbcType=DATE},
			</if>
			<if test="fileName != null">
				#{fileName,jdbcType=VARCHAR},
			</if>
			<if test="filePath != null">
				#{filePath,jdbcType=VARCHAR},
			</if>
			<if test="fileType != null">
				#{fileType,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>
	<insert id="saveEmrMedDocEmr" parameterType="com.zebone.nhis.common.module.emr.rec.rec.EmrMedDoc">
		INSERT INTO ${dbName}EMR_MED_DOC
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="pkDoc != null">
				PK_DOC,
			</if>
			<if test="pkOrg != null">
				PK_ORG,
			</if>
			<if test="docData != null">
				DOC_DATA,
			</if>
			<if test="docXml != null">
				DOC_XML,
			</if>
			<if test="docDataBak != null">
				DOC_DATA_BAK,
			</if>
			<if test="docXmlBak != null">
				DOC_XML_BAK,
			</if>
			<if test="delFlag != null">
				DEL_FLAG,
			</if>
			<if test="creator != null">
				CREATOR,
			</if>
			<if test="createTime != null">
				CREATE_TIME,
			</if>
			<if test="ts != null">
				TS,
			</if>
			<if test="fileName != null">
				FILE_NAME,
			</if>
			<if test="filePath != null">
				FILE_PATH,
			</if>
			<if test="fileType != null">
				FILE_TYPE,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="pkDoc != null">
				#{pkDoc,jdbcType=CHAR},
			</if>
			<if test="pkOrg != null">
				#{pkOrg,jdbcType=VARCHAR},
			</if>
			<if test="docData != null">
				#{docData,jdbcType=BLOB},
			</if>
			<if test="docXml != null">
				#{docXml,jdbcType=CLOB},
			</if>
			<if test="docDataBak != null">
				#{docDataBak,jdbcType=BLOB},
			</if>
			<if test="docXmlBak != null">
				#{docXmlBak,jdbcType=CLOB},
			</if>
			<if test="delFlag != null">
				#{delFlag,jdbcType=CHAR},
			</if>
			<if test="creator != null">
				#{creator,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				#{createTime,jdbcType=DATE},
			</if>
			<if test="ts != null">
				#{ts,jdbcType=DATE},
			</if>
			<if test="fileName != null">
				#{fileName,jdbcType=VARCHAR},
			</if>
			<if test="filePath != null">
				#{filePath,jdbcType=VARCHAR},
			</if>
			<if test="fileType != null">
				#{fileType,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>
	<update id="updateEmrMedDoc" parameterType="com.zebone.nhis.common.module.emr.rec.rec.EmrMedDoc">
		UPDATE EMR_MED_DOC
		<set>
			<if test="pkDoc != null">
				PK_DOC = #{pkDoc,jdbcType=CHAR},
			</if>
			<if test="pkOrg != null">
				PK_ORG = #{pkOrg,jdbcType=VARCHAR},
			</if>
			<if test="docData != null">
				DOC_DATA = #{docData,jdbcType=BLOB},
			</if>
			<if test="docXml != null">
				DOC_XML = #{docXml,jdbcType=CLOB},
			</if>
			<if test="docDataBak != null">
				DOC_DATA_BAK = #{docDataBak,jdbcType=BLOB},
			</if>
			<if test="docXmlBak != null">
				DOC_XML_BAK = #{docXmlBak,jdbcType=CLOB},
			</if>
			<if test="delFlag != null">
				DEL_FLAG = #{delFlag,jdbcType=CHAR},
			</if>
			<if test="creator != null">
				CREATOR = #{creator,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				CREATE_TIME = #{createTime,jdbcType=DATE},
			</if>
			<if test="ts != null">
				TS = #{ts,jdbcType=DATE},
			</if>
			<if test="fileName != null">
				FILE_NAME = #{fileName,jdbcType=VARCHAR},
			</if>
			<if test="filePath != null">
				FILE_PATH = #{filePath,jdbcType=VARCHAR},
			</if>
			<if test="fileType != null">
				FILE_TYPE = #{fileType,jdbcType=VARCHAR},
			</if>
		</set>
		WHERE
		PK_DOC = #{pkDoc,jdbcType=CHAR}
	</update>
	<update id="updateEmrMedDocEmr" parameterType="com.zebone.nhis.common.module.emr.rec.rec.EmrMedDoc">
		UPDATE ${dbName}EMR_MED_DOC
		<set>
			<if test="pkDoc != null">
				PK_DOC = #{pkDoc,jdbcType=CHAR},
			</if>
			<if test="pkOrg != null">
				PK_ORG = #{pkOrg,jdbcType=VARCHAR},
			</if>
			<if test="docData != null">
				DOC_DATA = #{docData,jdbcType=BLOB},
			</if>
			<if test="docXml != null">
				DOC_XML = #{docXml,jdbcType=CLOB},
			</if>
			<if test="docDataBak != null">
				DOC_DATA_BAK = #{docDataBak,jdbcType=BLOB},
			</if>
			<if test="docXmlBak != null">
				DOC_XML_BAK = #{docXmlBak,jdbcType=CLOB},
			</if>
			<if test="delFlag != null">
				DEL_FLAG = #{delFlag,jdbcType=CHAR},
			</if>
			<if test="creator != null">
				CREATOR = #{creator,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				CREATE_TIME = #{createTime,jdbcType=DATE},
			</if>
			<if test="ts != null">
				TS = #{ts,jdbcType=DATE},
			</if>
			<if test="fileName != null">
				FILE_NAME = #{fileName,jdbcType=VARCHAR},
			</if>
			<if test="filePath != null">
				FILE_PATH = #{filePath,jdbcType=VARCHAR},
			</if>
			<if test="fileType != null">
				FILE_TYPE = #{fileType,jdbcType=VARCHAR},
			</if>
		</set>
		WHERE
		PK_DOC = #{pkDoc,jdbcType=CHAR}
	</update>
	<select id="queryDictList" resultType="java.util.HashMap">
		${sqlText}
	</select>
	
	
	
	<update id="updateDictData" parameterType="String">
		${sqlText}
	</update>
	
	<update id="updateDictDataDC" parameterType="String">
		${sqlText}
	</update>
	
	<resultMap id="ResultMapPatRec"
		type="com.zebone.nhis.common.module.emr.rec.rec.EmrPatRec">
		<id column="PK_PATREC" jdbcType="CHAR" property="pkPatrec" />
		<result column="PK_ORG" jdbcType="VARCHAR" property="pkOrg" />
		<result column="PK_PI" jdbcType="VARCHAR" property="pkPi" />
		<result column="TIMES" jdbcType="DECIMAL" property="times" />
		<result column="PK_PV" jdbcType="VARCHAR" property="pkPv" />
		<result column="EU_STATUS" jdbcType="CHAR" property="euStatus" />
		<result column="PRINT_REC_COURSE" jdbcType="VARCHAR" property="printRecCourse" />
		<result column="PRINT_REC_COURSE_PAGE" jdbcType="VARCHAR"
			property="printRecCoursePage" />
		<result column="PRINT_REC_COURSE_BAK" jdbcType="VARCHAR"
			property="printRecCourseBak" />
		<result column="PRINT_REC_LAST_TIME" jdbcType="DATE"
			property="printRecLastTime" />
		<result column="PK_EMP_FINISH" jdbcType="VARCHAR" property="pkEmpFinish" />
		<result column="FINISH_DATE" jdbcType="DATE" property="finishDate" />
		<result column="PK_EMP_QC" jdbcType="VARCHAR" property="pkEmpQc" />
		<result column="QC_DATE" jdbcType="DATE" property="qcDate" />
		<result column="PK_EMP_SUBMIT" jdbcType="VARCHAR" property="pkEmpSubmit" />
		<result column="SUBMIT_DATE" jdbcType="TIMESTAMP" property="submitDate" />
		<result column="FLAG_ARCHIVE" jdbcType="CHAR" property="flagArchive" />
		<result column="PK_EMP_ARCHIVE" jdbcType="VARCHAR" property="pkEmpArchive" />
		<result column="ARCHIVE_DATE" jdbcType="DATE" property="archiveDate" />
		<result column="EU_GRADE" jdbcType="CHAR" property="euGrade" />
		<result column="SCORE" jdbcType="DECIMAL" property="score" />
		<result column="FLAG_LINK_QC" jdbcType="CHAR" property="flagLinkQc" />
		<result column="EU_LINK_QC_GRADE" jdbcType="CHAR" property="euLinkQcGrade" />
		<result column="LINK_QC_SCORE" jdbcType="DECIMAL" property="linkQcScore" />
		<result column="PK_EMP_LINK_QC" jdbcType="VARCHAR" property="pkEmpLinkQc" />
		<result column="LINK_QC_DATE" jdbcType="DATE" property="linkQcDate" />
		<result column="EU_EMP_QC_GRADE" jdbcType="CHAR" property="euEmpQcGrade" />
		<result column="EMP_QC_SCORE" jdbcType="DECIMAL" property="empQcScore" />
		<result column="PK_EMP_EMP_QC" jdbcType="VARCHAR" property="pkEmpEmpQc" />
		<result column="EMP_QC_DATE" jdbcType="DATE" property="empQcDate" />
		<result column="FLAG_DEPT_QC" jdbcType="CHAR" property="flagDeptQc" />
		<result column="EU_DEPT_QC_GRADE" jdbcType="CHAR" property="euDeptQcGrade" />
		<result column="DEPT_QC_SCORE" jdbcType="DECIMAL" property="deptQcScore" />
		<result column="PK_EMP_DEPT_QC" jdbcType="VARCHAR" property="pkEmpDeptQc" />
		<result column="DEPT_QC_DATE" jdbcType="DATE" property="deptQcDate" />
		<result column="FLAG_FINAL_QC" jdbcType="CHAR" property="flagFinalQc" />
		<result column="EU_FINAL_QC_GRADE" jdbcType="CHAR" property="euFinalQcGrade" />
		<result column="FINAL_QC_SCORE" jdbcType="DECIMAL" property="finalQcScore" />
		<result column="PK_EMP_FINAL_QC" jdbcType="VARCHAR" property="pkEmpFinalQc" />
		<result column="FINAL_QC_DATE" jdbcType="DATE" property="finalQcDate" />
		<result column="DIAG_ADMIT_TXT" jdbcType="VARCHAR" property="diagAdmitTxt" />
		<result column="DIAG_DIS_TXT" jdbcType="VARCHAR" property="diagDisTxt" />
		<result column="PK_EMP_INTERN" jdbcType="VARCHAR" property="pkEmpIntern" />
		<result column="PK_EMP_REFER" jdbcType="VARCHAR" property="pkEmpRefer" />
		<result column="PK_EMP_CONSULT" jdbcType="VARCHAR" property="pkEmpConsult" />
		<result column="PK_EMP_DIRECTOR" jdbcType="VARCHAR" property="pkEmpDirector" />
		<result column="PK_EMP_NS_CHARGE" jdbcType="VARCHAR" property="pkEmpNsCharge" />
		<result column="PK_EMP_NS_HEAD" jdbcType="VARCHAR" property="pkEmpNsHead" />
		<result column="PK_EMP_QC_DIS" jdbcType="VARCHAR" property="pkEmpQcDis" />
		<result column="FLAG_OPEN_EDIT" jdbcType="VARCHAR" property="flagOpenEdit" />
		<result column="EDIT_BEGIN_DATE" jdbcType="DATE" property="editBeginDate" />
		<result column="EDIT_END_DATE" jdbcType="DATE" property="editEndDate" />
		<result column="PK_EMP_DEPT_QC_SUBMIT" jdbcType="VARCHAR" property="pkEmpDeptQcSubmit" />
		<result column="DEPT_QC_SUBMIT_DATE" jdbcType="DATE" property="deptQcSubmitDate" />
		<result column="PK_EMP_FINAL_QC_SUBMIT" jdbcType="VARCHAR" property="pkEmpFinalQcSubmit" />
		<result column="FINAL_QC_SUBMIT_DATE" jdbcType="DATE" property="finalQcSubmitDate" />
		<result column="FLAG_EMR_ARCHIVE" jdbcType="CHAR" property="flagEmrArchive" />
		<result column="PK_EMP_EMR_ARCHIVE" jdbcType="VARCHAR" property="pkEmpEmrArchive" />
		<result column="EMR_ARCHIVE_DATE" jdbcType="DATE" property="emrArchiveDate" />
		<result column="FLAG_AMEND_DEPT" jdbcType="CHAR" property="flagAmendDept" />
		<result column="FLAG_AMEND_FINAL" jdbcType="CHAR" property="flagAmendFinal" />
		<result column="DEL_FLAG" jdbcType="CHAR" property="delFlag" />
		<result column="REMARK" jdbcType="VARCHAR" property="remark" />
		<result column="CREATOR" jdbcType="VARCHAR" property="creator" />
		<result column="CREATE_TIME" jdbcType="DATE" property="createTime" />
		<result column="TS" jdbcType="DATE" property="ts" />
	</resultMap>
	<select id="getEmrPatRecById" resultMap="ResultMapPatRec">
		SELECT
		*
		FROM
		EMR_PAT_REC
		WHERE
		PK_PATREC = #{pkPatrec,jdbcType=CHAR}
	</select>

	<select id="findAllEmrPatRec" resultMap="ResultMapPatRec">
		SELECT * FROM EMR_PAT_REC
	</select>

	<delete id="deleteEmrPatRec">
		DELETE
		FROM
		EMR_PAT_REC
		WHERE
		PK_PATREC = #{pkPatrec,jdbcType=CHAR}
	</delete>

	<insert id="saveEmrPatRec" parameterType="com.zebone.nhis.common.module.emr.rec.rec.EmrPatRec">
		INSERT INTO EMR_PAT_REC
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="pkPatrec != null">
				PK_PATREC,
			</if>
			<if test="pkOrg != null">
				PK_ORG,
			</if>
			<if test="pkPi != null">
				PK_PI,
			</if>
			<if test="times != null">
				TIMES,
			</if>
			<if test="pkPv != null">
				PK_PV,
			</if>
			<if test="euStatus != null">
				EU_STATUS,
			</if>
			<if test="printRecCourse != null">
				PRINT_REC_COURSE,
			</if>
			<if test="printRecCoursePage != null">
				PRINT_REC_COURSE_PAGE,
			</if>
			<if test="printRecCourseBak != null">
				PRINT_REC_COURSE_BAK,
			</if>
			<if test="printRecLastTime != null">
				PRINT_REC_LAST_TIME,
			</if>
			<if test="pkEmpFinish != null">
				PK_EMP_FINISH,
			</if>
			<if test="finishDate != null">
				FINISH_DATE,
			</if>
			<if test="pkEmpQc != null">
				PK_EMP_QC,
			</if>
			<if test="qcDate != null">
				QC_DATE,
			</if>
			<if test="pkEmpSubmit != null">
				PK_EMP_SUBMIT,
			</if>
			<if test="submitDate != null">
				SUBMIT_DATE,
			</if>
			<if test="flagArchive != null">
				FLAG_ARCHIVE,
			</if>
			<if test="pkEmpArchive != null">
				PK_EMP_ARCHIVE,
			</if>
			<if test="archiveDate != null">
				ARCHIVE_DATE,
			</if>
			<if test="euGrade != null">
				EU_GRADE,
			</if>
			<if test="score != null">
				SCORE,
			</if>
			<if test="flagLinkQc != null">
				FLAG_LINK_QC,
			</if>
			<if test="euLinkQcGrade != null">
				EU_LINK_QC_GRADE,
			</if>
			<if test="linkQcScore != null">
				LINK_QC_SCORE,
			</if>
			<if test="pkEmpLinkQc != null">
				PK_EMP_LINK_QC,
			</if>
			<if test="linkQcDate != null">
				LINK_QC_DATE,
			</if>
			<if test="euEmpQcGrade != null">
				EU_EMP_QC_GRADE,
			</if>
			<if test="empQcScore != null">
				EMP_QC_SCORE,
			</if>
			<if test="pkEmpEmpQc != null">
				PK_EMP_EMP_QC,
			</if>
			<if test="empQcDate != null">
				EMP_QC_DATE,
			</if>
			<if test="flagDeptQc != null">
				FLAG_DEPT_QC,
			</if>
			<if test="euDeptQcGrade != null">
				EU_DEPT_QC_GRADE,
			</if>
			<if test="deptQcScore != null">
				DEPT_QC_SCORE,
			</if>
			<if test="pkEmpDeptQc != null">
				PK_EMP_DEPT_QC,
			</if>
			<if test="deptQcDate != null">
				DEPT_QC_DATE,
			</if>
			<if test="flagFinalQc != null">
				FLAG_FINAL_QC,
			</if>
			<if test="euFinalQcGrade != null">
				EU_FINAL_QC_GRADE,
			</if>
			<if test="finalQcScore != null">
				FINAL_QC_SCORE,
			</if>
			<if test="pkEmpFinalQc != null">
				PK_EMP_FINAL_QC,
			</if>
			<if test="finalQcDate != null">
				FINAL_QC_DATE,
			</if>
			<if test="diagAdmitTxt != null">
				DIAG_ADMIT_TXT,
			</if>
			<if test="diagDisTxt != null">
				DIAG_DIS_TXT,
			</if>
			<if test="pkEmpIntern != null">
				PK_EMP_INTERN,
			</if>
			<if test="pkEmpRefer != null">
				PK_EMP_REFER,
			</if>
			<if test="pkEmpConsult != null">
				PK_EMP_CONSULT,
			</if>
			<if test="pkEmpDirector != null">
				PK_EMP_DIRECTOR,
			</if>
			<if test="pkEmpNsCharge != null">
				PK_EMP_NS_CHARGE,
			</if>
			<if test="pkEmpNsHead != null">
				PK_EMP_NS_HEAD,
			</if>
			<if test="pkEmpQcDis != null">
				PK_EMP_QC_DIS,
			</if>
			<if test="pkEmpDeptQcSubmit != null">
				PK_EMP_DEPT_QC_SUBMIT,
			</if>
			<if test="deptQcSubmitDate != null">
				DEPT_QC_SUBMIT_DATE,
			</if>
			<if test="pkEmpFinalQcSubmit != null">
				PK_EMP_FINAL_QC_SUBMIT,
			</if>
			<if test="finalQcSubmitDate != null">
				FINAL_QC_SUBMIT_DATE,
			</if>
			<if test="flagEmrArchive != null">
				FLAG_EMR_ARCHIVE,
			</if>
			<if test="pkEmpEmrArchive != null">
				PK_EMP_EMR_ARCHIVE,
			</if>
			<if test="emrArchiveDate != null">
				EMR_ARCHIVE_DATE,
			</if>
			<if test="flagAmendDept != null">
				FLAG_AMEND_DEPT,
			</if>
			<if test="flagAmendFinal != null">
				FLAG_AMEND_FINAL,
			</if>
			<if test="delFlag != null">
				DEL_FLAG,
			</if>
			<if test="remark != null">
				REMARK,
			</if>
			<if test="creator != null">
				CREATOR,
			</if>
			<if test="createTime != null">
				CREATE_TIME,
			</if>
			<if test="ts != null">
				TS,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="pkPatrec != null">
				#{pkPatrec,jdbcType=CHAR},
			</if>
			<if test="pkOrg != null">
				#{pkOrg,jdbcType=VARCHAR},
			</if>
			<if test="pkPi != null">
				#{pkPi,jdbcType=VARCHAR},
			</if>
			<if test="times != null">
				#{times,jdbcType=DECIMAL},
			</if>
			<if test="pkPv != null">
				#{pkPv,jdbcType=VARCHAR},
			</if>
			<if test="euStatus != null">
				#{euStatus,jdbcType=CHAR},
			</if>
			<if test="printRecCourse != null">
				#{printRecCourse,jdbcType=VARCHAR},
			</if>
			<if test="printRecCoursePage != null">
				#{printRecCoursePage,jdbcType=VARCHAR},
			</if>
			<if test="printRecCourseBak != null">
				#{printRecCourseBak,jdbcType=VARCHAR},
			</if>
			<if test="printRecLastTime != null">
				#{printRecLastTime,jdbcType=DATE},
			</if>
			<if test="pkEmpFinish != null">
				#{pkEmpFinish,jdbcType=VARCHAR},
			</if>
			<if test="finishDate != null">
				#{finishDate,jdbcType=DATE},
			</if>
			<if test="pkEmpQc != null">
				#{pkEmpQc,jdbcType=VARCHAR},
			</if>
			<if test="qcDate != null">
				#{qcDate,jdbcType=DATE},
			</if>
			<if test="pkEmpSubmit != null">
				#{pkEmpSubmit,jdbcType=VARCHAR},
			</if>
			<if test="submitDate != null">
				#{submitDate,jdbcType=DATE},
			</if>
			<if test="flagArchive != null">
				#{flagArchive,jdbcType=CHAR},
			</if>
			<if test="pkEmpArchive != null">
				#{pkEmpArchive,jdbcType=VARCHAR},
			</if>
			<if test="archiveDate != null">
				#{archiveDate,jdbcType=DATE},
			</if>
			<if test="euGrade != null">
				#{euGrade,jdbcType=CHAR},
			</if>
			<if test="score != null">
				#{score,jdbcType=DECIMAL},
			</if>
			<if test="flagLinkQc != null">
				#{flagLinkQc,jdbcType=CHAR},
			</if>
			<if test="euLinkQcGrade != null">
				#{euLinkQcGrade,jdbcType=CHAR},
			</if>
			<if test="linkQcScore != null">
				#{linkQcScore,jdbcType=DECIMAL},
			</if>
			<if test="pkEmpLinkQc != null">
				#{pkEmpLinkQc,jdbcType=VARCHAR},
			</if>
			<if test="linkQcDate != null">
				#{linkQcDate,jdbcType=DATE},
			</if>
			<if test="euEmpQcGrade != null">
				#{euEmpQcGrade,jdbcType=CHAR},
			</if>
			<if test="empQcScore != null">
				#{empQcScore,jdbcType=DECIMAL},
			</if>
			<if test="pkEmpEmpQc != null">
				#{pkEmpEmpQc,jdbcType=VARCHAR},
			</if>
			<if test="empQcDate != null">
				#{empQcDate,jdbcType=DATE},
			</if>
			<if test="flagDeptQc != null">
				#{flagDeptQc,jdbcType=CHAR},
			</if>
			<if test="euDeptQcGrade != null">
				#{euDeptQcGrade,jdbcType=CHAR},
			</if>
			<if test="deptQcScore != null">
				#{deptQcScore,jdbcType=DECIMAL},
			</if>
			<if test="pkEmpDeptQc != null">
				#{pkEmpDeptQc,jdbcType=VARCHAR},
			</if>
			<if test="deptQcDate != null">
				#{deptQcDate,jdbcType=DATE},
			</if>
			<if test="flagFinalQc != null">
				#{flagFinalQc,jdbcType=CHAR},
			</if>
			<if test="euFinalQcGrade != null">
				#{euFinalQcGrade,jdbcType=CHAR},
			</if>
			<if test="finalQcScore != null">
				#{finalQcScore,jdbcType=DECIMAL},
			</if>
			<if test="pkEmpFinalQc != null">
				#{pkEmpFinalQc,jdbcType=VARCHAR},
			</if>
			<if test="finalQcDate != null">
				#{finalQcDate,jdbcType=DATE},
			</if>
			<if test="diagAdmitTxt != null">
				#{diagAdmitTxt,jdbcType=VARCHAR},
			</if>
			<if test="diagDisTxt != null">
				#{diagDisTxt,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpRefer != null">
				#{pkEmpRefer,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpIntern != null">
				#{pkEmpIntern,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpConsult != null">
				#{pkEmpConsult,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpDirector != null">
				#{pkEmpDirector,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpNsCharge != null">
				#{pkEmpNsCharge,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpNsHead != null">
				#{pkEmpNsHead,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpQcDis != null">
				#{pkEmpQcDis,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpDeptQcSubmit != null">
				#{pkEmpDeptQcSubmit,jdbcType=VARCHAR},
			</if>
			<if test="deptQcSubmitDate != null">
				#{deptQcSubmitDate,jdbcType=DATE},
			</if>
			<if test="pkEmpFinalQcSubmit != null">
				#{pkEmpFinalQcSubmit,jdbcType=VARCHAR},
			</if>
			<if test="finalQcSubmitDate != null">
				#{finalQcSubmitDate,jdbcType=DATE},
			</if>
			<if test="flagEmrArchive != null">
				#{flagEmrArchive,jdbcType=CHAR},
			</if>
			<if test="pkEmpEmrArchive != null">
				#{pkEmpEmrArchive,jdbcType=VARCHAR},
			</if>
			<if test="emrArchiveDate != null">
				#{emrArchiveDate,jdbcType=DATE},
			</if>
			<if test="flagAmendDept != null">
				#{flagAmendDept,jdbcType=CHAR},
			</if>
			<if test="flagAmendFinal != null">
				#{flagAmendFinal,jdbcType=CHAR},
			</if>
			<if test="delFlag != null">
				#{delFlag,jdbcType=CHAR},
			</if>
			<if test="remark != null">
				#{remark,jdbcType=VARCHAR},
			</if>
			<if test="creator != null">
				#{creator,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				#{createTime,jdbcType=DATE},
			</if>
			<if test="ts != null">
				#{ts,jdbcType=DATE},
			</if>
		</trim>
	</insert>

	<update id="updateEmrPatRec" parameterType="com.zebone.nhis.common.module.emr.rec.rec.EmrPatRec">
		UPDATE EMR_PAT_REC
		<set>
			<if test="pkPatrec != null">
				PK_PATREC = #{pkPatrec,jdbcType=CHAR},
			</if>
			<if test="pkOrg != null">
				PK_ORG = #{pkOrg,jdbcType=VARCHAR},
			</if>
			<if test="pkPi != null">
				PK_PI = #{pkPi,jdbcType=VARCHAR},
			</if>
			<if test="times != null">
				TIMES = #{times,jdbcType=DECIMAL},
			</if>
			<if test="pkPv != null">
				PK_PV = #{pkPv,jdbcType=VARCHAR},
			</if>
			<if test="euStatus != null">
				EU_STATUS = #{euStatus,jdbcType=CHAR},
			</if>
			<if test="printRecCourse != null">
				PRINT_REC_COURSE = #{printRecCourse,jdbcType=VARCHAR},
			</if>
			<if test="printRecCoursePage != null">
				PRINT_REC_COURSE_PAGE = #{printRecCoursePage,jdbcType=VARCHAR},
			</if>
			<if test="printRecCourseBak != null">
				PRINT_REC_COURSE_BAK = #{printRecCourseBak,jdbcType=VARCHAR},
			</if>
			<if test="printRecLastTime != null">
				PRINT_REC_LAST_TIME = #{printRecLastTime,jdbcType=DATE},
			</if>
			<if test="pkEmpFinish != null">
				PK_EMP_FINISH = #{pkEmpFinish,jdbcType=VARCHAR},
			</if>
			<if test="finishDate != null">
				FINISH_DATE = #{finishDate,jdbcType=DATE},
			</if>
			<if test="pkEmpQc != null">
				PK_EMP_QC = #{pkEmpQc,jdbcType=VARCHAR},
			</if>
			<if test="qcDate != null">
				QC_DATE = #{qcDate,jdbcType=DATE},
			</if>
			<if test="pkEmpSubmit != null">
				PK_EMP_SUBMIT = #{pkEmpSubmit,jdbcType=VARCHAR},
			</if>
			<if test="submitDate != null">
				SUBMIT_DATE = #{submitDate,jdbcType=TIMESTAMP},
			</if>
			<if test="flagArchive != null">
				FLAG_ARCHIVE = #{flagArchive,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpArchive != null">
				PK_EMP_ARCHIVE = #{pkEmpArchive,jdbcType=VARCHAR},
			</if>
			<if test="archiveDate != null">
				ARCHIVE_DATE = #{archiveDate,jdbcType=DATE},
			</if>
			<if test="euGrade != null">
				EU_GRADE = #{euGrade,jdbcType=CHAR},
			</if>
			<if test="score != null">
				SCORE = #{score,jdbcType=DECIMAL},
			</if>
			<if test="flagLinkQc != null">
				FLAG_LINK_QC = #{flagLinkQc,jdbcType=CHAR},
			</if>
			<if test="euLinkQcGrade != null">
				EU_LINK_QC_GRADE = #{euLinkQcGrade,jdbcType=CHAR},
			</if>
			<if test="linkQcScore != null">
				LINK_QC_SCORE = #{linkQcScore,jdbcType=DECIMAL},
			</if>
			<if test="pkEmpLinkQc != null">
				PK_EMP_LINK_QC = #{pkEmpLinkQc,jdbcType=VARCHAR},
			</if>
			<if test="linkQcDate != null">
				LINK_QC_DATE = #{linkQcDate,jdbcType=DATE},
			</if>
			<if test="euEmpQcGrade != null">
				EU_EMP_QC_GRADE = #{euEmpQcGrade,jdbcType=CHAR},
			</if>
			<if test="empQcScore != null">
				EMP_QC_SCORE = #{empQcScore,jdbcType=DECIMAL},
			</if>
			<if test="pkEmpEmpQc != null">
				PK_EMP_EMP_QC = #{pkEmpEmpQc,jdbcType=VARCHAR},
			</if>
			<if test="empQcDate != null">
				EMP_QC_DATE = #{empQcDate,jdbcType=DATE},
			</if>
			<if test="flagDeptQc != null">
				FLAG_DEPT_QC = #{flagDeptQc,jdbcType=CHAR},
			</if>
			<if test="euDeptQcGrade != null">
				EU_DEPT_QC_GRADE = #{euDeptQcGrade,jdbcType=CHAR},
			</if>
			<if test="deptQcScore != null">
				DEPT_QC_SCORE = #{deptQcScore,jdbcType=DECIMAL},
			</if>
			<if test="pkEmpDeptQc != null">
				PK_EMP_DEPT_QC = #{pkEmpDeptQc,jdbcType=VARCHAR},
			</if>
			<if test="deptQcDate != null">
				DEPT_QC_DATE = #{deptQcDate,jdbcType=DATE},
			</if>
			<if test="flagFinalQc != null">
				FLAG_FINAL_QC = #{flagFinalQc,jdbcType=CHAR},
			</if>
			<if test="euFinalQcGrade != null">
				EU_FINAL_QC_GRADE = #{euFinalQcGrade,jdbcType=CHAR},
			</if>
			<if test="finalQcScore != null">
				FINAL_QC_SCORE = #{finalQcScore,jdbcType=DECIMAL},
			</if>
			<if test="pkEmpFinalQc != null">
				PK_EMP_FINAL_QC = #{pkEmpFinalQc,jdbcType=VARCHAR},
			</if>
			<if test="finalQcDate != null">
				FINAL_QC_DATE = #{finalQcDate,jdbcType=DATE},
			</if>
			<if test="diagAdmitTxt != null">
				DIAG_ADMIT_TXT = #{diagAdmitTxt,jdbcType=VARCHAR},
			</if>
			<if test="diagDisTxt != null">
				DIAG_DIS_TXT = #{diagDisTxt,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpIntern != null">
				PK_EMP_INTERN = #{pkEmpIntern,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpRefer != null">
				PK_EMP_REFER = #{pkEmpRefer,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpConsult != null">
				PK_EMP_CONSULT = #{pkEmpConsult,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpDirector != null">
				PK_EMP_DIRECTOR = #{pkEmpDirector,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpNsCharge != null">
				PK_EMP_NS_CHARGE = #{pkEmpNsCharge,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpNsHead != null">
				PK_EMP_NS_HEAD = #{pkEmpNsHead,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpQcDis != null">
				PK_EMP_QC_DIS = #{pkEmpQcDis,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpDeptQcSubmit != null">
				PK_EMP_DEPT_QC_SUBMIT = #{pkEmpDeptQcSubmit,jdbcType=VARCHAR},
			</if>
			<if test="deptQcSubmitDate != null">
				DEPT_QC_SUBMIT_DATE = #{deptQcSubmitDate,jdbcType=DATE},
			</if>
			<if test="pkEmpFinalQcSubmit != null">
				PK_EMP_QC_DIS = #{pkEmpFinalQcSubmit,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpQcDis != null">
				FINAL_QC_SUBMIT_DATE = #{pkEmpQcDis,jdbcType=DATE},
			</if>
			<if test="flagEmrArchive != null">
				FLAG_EMR_ARCHIVE = #{flagEmrArchive,jdbcType=CHAR},
			</if>
			<if test="pkEmpEmrArchive != null">
				PK_EMP_EMR_ARCHIVE = #{pkEmpEmrArchive,jdbcType=VARCHAR},
			</if>
			<if test="emrArchiveDate != null">
				EMR_ARCHIVE_DATE = #{emrArchiveDate,jdbcType=DATE},
			</if>
			<if test="flagAmendDept != null">
				FLAG_AMEND_DEPT = #{flagAmendDept,jdbcType=CHAR},
			</if>
			<if test="flagAmendFinal != null">
				FLAG_AMEND_FINAL = #{flagAmendFinal,jdbcType=CHAR},
			</if>	
			<if test="delFlag != null">
				DEL_FLAG = #{delFlag,jdbcType=CHAR},
			</if>
			<if test="remark != null">
				REMARK = #{remark,jdbcType=VARCHAR},
			</if>
			<if test="creator != null">
				CREATOR = #{creator,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				CREATE_TIME = #{createTime,jdbcType=DATE},
			</if>
			<if test="ts != null">
				TS = #{ts,jdbcType=DATE},
			</if>
		</set>
		WHERE
		PK_PATREC = #{pkPatrec,jdbcType=CHAR}
	</update>
	<resultMap id="ResultMapPatList"
		type="com.zebone.nhis.common.module.emr.rec.rec.EmrPatList">
		<result column="PK_PI" jdbcType="CHAR" property="pkPi" />
		<result column="CODE_PI" jdbcType="VARCHAR" property="codePi" />
		<result column="CODE_OP" jdbcType="VARCHAR" property="codeOp" />
		<result column="CODE_IP" jdbcType="VARCHAR" property="codeIp" />
		<result column="PAT_NO" jdbcType="VARCHAR" property="patNo" />
		<result column="BARCODE" jdbcType="VARCHAR" property="barcode" />
		<result column="PK_PICATE" jdbcType="CHAR" property="pkPicate" />
		<result column="NAME_PI" jdbcType="VARCHAR" property="namePi" />
		<result column="NAME" jdbcType="VARCHAR" property="name" />
		<result column="DT_IDTYPE" jdbcType="VARCHAR" property="dtIdtype" />
		<result column="ID_NO" jdbcType="VARCHAR" property="idNo" />
		<result column="HIC_NO" jdbcType="VARCHAR" property="hicNo" />
		<result column="INSUR_NO" jdbcType="VARCHAR" property="insurNo" />
		<result column="MPI" jdbcType="VARCHAR" property="mpi" />
		<result column="FLAG_EHR" jdbcType="CHAR" property="flagEhr" />
		<result column="DT_SEX" jdbcType="VARCHAR" property="dtSex" />
		<result column="SEX_NAME" jdbcType="VARCHAR" property="sexName" />
		<result column="BIRTH_DATE" jdbcType="DATE" property="birthDate" />
		<result column="AGE_TXT" jdbcType="VARCHAR" property="ageTxt" />
		<result column="PLACE_BIRTH" jdbcType="VARCHAR" property="placeBirth" />
		<result column="DT_MARRY" jdbcType="VARCHAR" property="dtMarry" />
		<result column="MARRY_NAME" jdbcType="VARCHAR" property="marryName" />
		<result column="DT_OCCU" jdbcType="VARCHAR" property="dtOccu" />
		<result column="OCCU_NAME" jdbcType="VARCHAR" property="occuName" />
		<result column="DT_EDU" jdbcType="VARCHAR" property="dtEdu" />
		<result column="DT_COUNTRY" jdbcType="VARCHAR" property="dtCountry" />
		<result column="DT_NATION" jdbcType="VARCHAR" property="dtNation" />
		<result column="NATION_NAME" jdbcType="VARCHAR" property="nationName" />
		<result column="TEL_NO" jdbcType="VARCHAR" property="telNo" />
		<result column="MOBILE" jdbcType="VARCHAR" property="mobile" />
		<result column="WECHAT_NO" jdbcType="VARCHAR" property="wechatNo" />
		<result column="EMAIL" jdbcType="VARCHAR" property="email" />
		<result column="UNIT_WORK" jdbcType="VARCHAR" property="unitWork" />
		<result column="TEL_WORK" jdbcType="VARCHAR" property="telWork" />
		<result column="ADDRESS" jdbcType="VARCHAR" property="address" />
		<result column="NAME_REL" jdbcType="VARCHAR" property="nameRel" />
		<result column="TEL_REL" jdbcType="VARCHAR" property="telRel" />
		<result column="DT_BLOOD_ABO" jdbcType="VARCHAR" property="dtBloodAbo" />
		<result column="BLOOD_ABO_NAME" jdbcType="VARCHAR" property="bloodAboName" />
		<result column="DT_BLOOD_RH" jdbcType="VARCHAR" property="dtBloodRh" />
		<result column="BLOOD_RH_NAME" jdbcType="VARCHAR" property="bloodRhName" />
		<result column="PK_PV" jdbcType="CHAR" property="pkPv" />
		<result column="PK_ORG" jdbcType="CHAR" property="pkOrg" />
		<result column="CODE_PV" jdbcType="VARCHAR" property="codePv" />
		<result column="EU_PVTYPE" jdbcType="VARCHAR" property="euPvtype" />
		<result column="DATE_BEGIN" jdbcType="TIMESTAMP" property="dateBegin" />
		<result column="DATE_END" jdbcType="TIMESTAMP" property="dateEnd" />
		<result column="EU_STATUS_PV" jdbcType="VARCHAR" property="euStatusPv" />
		<result column="FLAG_IN" jdbcType="CHAR" property="flagIn" />
		<result column="FLAG_SETTLE" jdbcType="CHAR" property="flagSettle" />
		<result column="NAME_PI_PV" jdbcType="VARCHAR" property="namePiPv" />
		<result column="DT_SEX_PV" jdbcType="VARCHAR" property="dtSexPv" />
		<result column="AGE_PV" jdbcType="VARCHAR" property="agePv" />
		<result column="ADDRESS_PV" jdbcType="VARCHAR" property="addressPv" />
		<result column="DT_MARRY_PV" jdbcType="VARCHAR" property="dtMarryPv" />
		<result column="PK_DEPT" jdbcType="CHAR" property="pkDept" />
		<result column="DEPT_NAME" jdbcType="VARCHAR" property="deptName" />
		<result column="PK_DEPT_NS" jdbcType="CHAR" property="pkDeptNs" />
		<result column="DEPT_NS_NAME" jdbcType="VARCHAR" property="deptNsName" />
		<result column="DATE_CLINIC" jdbcType="TIMESTAMP" property="dateClinic" />
		<result column="DATE_ADMIT" jdbcType="TIMESTAMP" property="dateAdmit" />
		<result column="PK_WG" jdbcType="CHAR" property="pkWg" />
		<result column="BED_NO" jdbcType="VARCHAR" property="bedNo" />
		<result column="PK_EMP_TRE" jdbcType="CHAR" property="pkEmpTre" />
		<result column="NAME_EMP_TRE" jdbcType="VARCHAR" property="nameEmpTre" />
		<result column="PK_EMP_PHY" jdbcType="CHAR" property="pkEmpPhy" />
		<result column="NAME_EMP_PHY" jdbcType="VARCHAR" property="nameEmpPhy" />
		<result column="PK_EMP_NS" jdbcType="CHAR" property="pkEmpNs" />
		<result column="NAME_EMP_NS" jdbcType="VARCHAR" property="nameEmpNs" />
		<result column="PK_INSU" jdbcType="CHAR" property="pkInsu" />
		<result column="INSU_NAME" jdbcType="VARCHAR" property="insuName" />
		<result column="PK_PATICATE" jdbcType="VARCHAR" property="pkPaticate" />
		<result column="PK_EMP_REG" jdbcType="CHAR" property="pkEmpReg" />
		<result column="NAME_EMP_REG" jdbcType="VARCHAR" property="nameEmpReg" />
		<result column="DATE_REG" jdbcType="TIMESTAMP" property="dateReg" />
		<result column="FLAG_CANCEL" jdbcType="CHAR" property="flagCancel" />
		<result column="PK_EMP_CANCEL" jdbcType="CHAR" property="pkEmpCancel" />
		<result column="NAME_EMP_CANCEL" jdbcType="VARCHAR" property="nameEmpCancel" />
		<result column="DATE_CANCEL" jdbcType="TIMESTAMP" property="dateCancel" />
		<result column="EU_STATUS_FP" jdbcType="VARCHAR" property="euStatusFp" />
		<result column="CREATOR" jdbcType="CHAR" property="creator" />
		<result column="CREATE_TIME" jdbcType="TIMESTAMP" property="createTime" />
		<result column="MODIFIER" jdbcType="CHAR" property="modifier" />
		<result column="DEL_FLAG" jdbcType="CHAR" property="delFlag" />
		<result column="TS" jdbcType="TIMESTAMP" property="ts" />
		<result column="PK_PVIP" jdbcType="CHAR" property="pkPvip" />
		<result column="PK_IP_NOTICE" jdbcType="CHAR" property="pkIpNotice" />
		<result column="IP_TIMES" jdbcType="DECIMAL" property="ipTimes" />
		<result column="DATE_NOTICE" jdbcType="TIMESTAMP" property="dateNotice" />
		<result column="FLAG_OPT" jdbcType="CHAR" property="flagOpt" />
		<result column="DT_LEVEL_NS" jdbcType="VARCHAR" property="dtLevelNs" />
		<result column="LEVEL_NS_NAME" jdbcType="VARCHAR" property="levelNsName" />
		<result column="DT_LEVEL_DISE" jdbcType="VARCHAR" property="dtLevelDise" />
		<result column="LEVEL_DISE_NAME" jdbcType="VARCHAR" property="levelDiseName" />
		<result column="DT_LEVEL_NUTR" jdbcType="VARCHAR" property="dtLevelNutr" />
		<result column="DT_OUTCOMES" jdbcType="VARCHAR" property="dtOutcomes" />
		<result column="FLAG_INFANT" jdbcType="CHAR" property="flagInfant" />
		<result column="QUAN_INFANT" jdbcType="DECIMAL" property="quanInfant" />
		<result column="EU_STATUS_DOC" jdbcType="VARCHAR" property="euStatusDoc" />
		<result column="DATE_COMMIT_DOC" jdbcType="TIMESTAMP" property="dateCommitDoc" />
		<result column="FLAG_GA" jdbcType="CHAR" property="flagGa" />
		<result column="FLAG_GA_NS" jdbcType="CHAR" property="flagGaNs" />
		<result column="DT_INTYPE" jdbcType="VARCHAR" property="dtIntype" />
		<result column="DT_OUTTYPE" jdbcType="VARCHAR" property="dtOuttype" />
		<result column="PK_DEPT_ADMIT" jdbcType="CHAR" property="pkDeptAdmit" />
		<result column="PK_DEPT_NS_ADMIT" jdbcType="CHAR" property="pkDeptNsAdmit" />
		<result column="PK_DEPT_DIS" jdbcType="CHAR" property="pkDeptDis" />
		<result column="PK_DEPT_NS_DIS" jdbcType="CHAR" property="pkDeptNsDis" />
		<result column="FLAG_PREST" jdbcType="VARCHAR" property="flagPrest" />
		<result column="DATE_PREST" jdbcType="TIMESTAMP" property="datePrest" />
		<result column="PK_EMP_PREST" jdbcType="CHAR" property="pkEmpPrest" />
		<result column="NAME_EMP_PREST" jdbcType="VARCHAR" property="nameEmpPrest" />
		<result column="PK_PATREC" jdbcType="CHAR" property="pkPatrec" />
		<result column="DIAG_ADMIT_TXT" jdbcType="VARCHAR" property="diagAdmitTxt" />
		<result column="DIAG_DIS_TXT" jdbcType="VARCHAR" property="diagDisTxt" />
		<result column="EU_STATUS" jdbcType="CHAR" property="euStatus" />
		<result column="PK_EMP_REFER" jdbcType="VARCHAR" property="pkEmpRefer" />
		<result column="REFER_NAME" jdbcType="VARCHAR" property="referName" />
		<result column="PK_EMP_CONSULT" jdbcType="VARCHAR" property="pkEmpConsult" />
		<result column="CONSULT_NAME" jdbcType="VARCHAR" property="consultName" />
		<result column="PK_EMP_DIRECTOR" jdbcType="VARCHAR" property="pkEmpDirector" />
		<result column="DIRECTOR_NAME" jdbcType="VARCHAR" property="directorName" />
		<result column="PK_EMP_NS_CHARGE" jdbcType="VARCHAR" property="pkEmpNsCharge" />
		<result column="NS_CHARGE_NAME" jdbcType="VARCHAR" property="nsChargeName" />
		<result column="PK_EMP_NS_HEAD" jdbcType="VARCHAR" property="pkEmpNsHead" />
		<result column="NS_HEAD_NAME" jdbcType="VARCHAR" property="nsHeadName" />
		<result column="PK_EMP_QC_DIS" jdbcType="VARCHAR" property="pkEmpQcDis" />
		<result column="QC_DIS_NAME" jdbcType="VARCHAR" property="qcDisName" />
		<result column="IN_HOS_DAYS" jdbcType="INTEGER" property="inHosDays" />
		<result column="TEMPE" jdbcType="VARCHAR" property="tempe" />
		<result column="PLUSE" jdbcType="VARCHAR" property="pluse" />
		<result column="BREATH" jdbcType="VARCHAR" property="breath" />
		<result column="SYSTOLIC" jdbcType="VARCHAR" property="systolic" />
		<result column="DIASTOLIC" jdbcType="VARCHAR" property="diastolic" />
		<result column="FLAG_AUDIT" jdbcType="CHAR" property="flagAudit" />
		<result column="ADDR_BIRTH" jdbcType="VARCHAR" property="addrBirth"/>
        <result column="ADDR_ORIGIN" jdbcType="VARCHAR" property="addrOrigin"/>
        <result column="ADDR_CUR" jdbcType="VARCHAR" property="addrCur"/>
        <result column="ADDR_REGI" jdbcType="VARCHAR" property="addrRegi"/>
        <result column="ADDR_REL" jdbcType="VARCHAR" property="addrRel"/>
        <result column="RALATION_NAME" jdbcType="VARCHAR" property="ralationName"/>
        <result column="NEMS_PAT_DIAGNOSIS" jdbcType="VARCHAR" property="nemsPatDiagnosis"/>
        <result column="CODE_APPLY" jdbcType="VARCHAR" property="codeApply"/>
        <result column="QUAN_BT" jdbcType="VARCHAR" property="quanBt"/>
        <result column="TRANS_TIME" jdbcType="TIMESTAMP" property="transTime"/>
         <result column="PULSE" jdbcType="VARCHAR" property="pulse"/>
        <result column="SPO2" jdbcType="VARCHAR" property="spo2"/>
        <result column="DESC_opt_SPIRIT" jdbcType="VARCHAR" property="descOptSpirit"/>
        <result column="DESC_OPT_URGENT" jdbcType="VARCHAR" property="descOptUrgent"/>
        <result column="EU_PVMODE" jdbcType="VARCHAR" property="euPvmode"/>
        <result column="EU_LINK_QC_GRADE" jdbcType="CHAR" property="euLinkQcGrade" />
		<result column="LINK_QC_SCORE" jdbcType="DECIMAL" property="linkQcScore" />
		<result column="PK_EMP_LINK_QC" jdbcType="VARCHAR" property="pkEmpLinkQc" />
		<result column="LINK_QC_DATE" jdbcType="DATE" property="linkQcDate" />
		<result column="FLAG_SEAL" jdbcType="VARCHAR" property="flagSeal" />
		<result column="FLAG_OPEN_EDIT" jdbcType="VARCHAR" property="flagOpenEdit" />
	</resultMap>

	<resultMap id="ResultMapPatListReview"
			   type="com.zebone.nhis.emr.rec.rec.vo.EmrPatListReview">
		<result column="PK_PI" jdbcType="CHAR" property="pkPi" />
		<result column="CODE_PI" jdbcType="VARCHAR" property="codePi" />
		<result column="CODE_OP" jdbcType="VARCHAR" property="codeOp" />
		<result column="CODE_IP" jdbcType="VARCHAR" property="codeIp" />
		<result column="PAT_NO" jdbcType="VARCHAR" property="patNo" />
		<result column="BARCODE" jdbcType="VARCHAR" property="barcode" />
		<result column="PK_PICATE" jdbcType="CHAR" property="pkPicate" />
		<result column="NAME_PI" jdbcType="VARCHAR" property="namePi" />
		<result column="NAME" jdbcType="VARCHAR" property="name" />
		<result column="DT_IDTYPE" jdbcType="VARCHAR" property="dtIdtype" />
		<result column="ID_NO" jdbcType="VARCHAR" property="idNo" />
		<result column="HIC_NO" jdbcType="VARCHAR" property="hicNo" />
		<result column="INSUR_NO" jdbcType="VARCHAR" property="insurNo" />
		<result column="MPI" jdbcType="VARCHAR" property="mpi" />
		<result column="FLAG_EHR" jdbcType="CHAR" property="flagEhr" />
		<result column="DT_SEX" jdbcType="VARCHAR" property="dtSex" />
		<result column="SEX_NAME" jdbcType="VARCHAR" property="sexName" />
		<result column="BIRTH_DATE" jdbcType="DATE" property="birthDate" />
		<result column="AGE_TXT" jdbcType="VARCHAR" property="ageTxt" />
		<result column="PLACE_BIRTH" jdbcType="VARCHAR" property="placeBirth" />
		<result column="DT_MARRY" jdbcType="VARCHAR" property="dtMarry" />
		<result column="MARRY_NAME" jdbcType="VARCHAR" property="marryName" />
		<result column="DT_OCCU" jdbcType="VARCHAR" property="dtOccu" />
		<result column="OCCU_NAME" jdbcType="VARCHAR" property="occuName" />
		<result column="DT_EDU" jdbcType="VARCHAR" property="dtEdu" />
		<result column="DT_COUNTRY" jdbcType="VARCHAR" property="dtCountry" />
		<result column="DT_NATION" jdbcType="VARCHAR" property="dtNation" />
		<result column="NATION_NAME" jdbcType="VARCHAR" property="nationName" />
		<result column="TEL_NO" jdbcType="VARCHAR" property="telNo" />
		<result column="MOBILE" jdbcType="VARCHAR" property="mobile" />
		<result column="WECHAT_NO" jdbcType="VARCHAR" property="wechatNo" />
		<result column="EMAIL" jdbcType="VARCHAR" property="email" />
		<result column="UNIT_WORK" jdbcType="VARCHAR" property="unitWork" />
		<result column="TEL_WORK" jdbcType="VARCHAR" property="telWork" />
		<result column="ADDRESS" jdbcType="VARCHAR" property="address" />
		<result column="NAME_REL" jdbcType="VARCHAR" property="nameRel" />
		<result column="TEL_REL" jdbcType="VARCHAR" property="telRel" />
		<result column="DT_BLOOD_ABO" jdbcType="VARCHAR" property="dtBloodAbo" />
		<result column="BLOOD_ABO_NAME" jdbcType="VARCHAR" property="bloodAboName" />
		<result column="DT_BLOOD_RH" jdbcType="VARCHAR" property="dtBloodRh" />
		<result column="BLOOD_RH_NAME" jdbcType="VARCHAR" property="bloodRhName" />
		<result column="PK_PV" jdbcType="CHAR" property="pkPv" />
		<result column="PK_ORG" jdbcType="CHAR" property="pkOrg" />
		<result column="CODE_PV" jdbcType="VARCHAR" property="codePv" />
		<result column="EU_PVTYPE" jdbcType="VARCHAR" property="euPvtype" />
		<result column="DATE_BEGIN" jdbcType="TIMESTAMP" property="dateBegin" />
		<result column="DATE_END" jdbcType="TIMESTAMP" property="dateEnd" />
		<result column="EU_STATUS_PV" jdbcType="VARCHAR" property="euStatusPv" />
		<result column="FLAG_IN" jdbcType="CHAR" property="flagIn" />
		<result column="FLAG_SETTLE" jdbcType="CHAR" property="flagSettle" />
		<result column="NAME_PI_PV" jdbcType="VARCHAR" property="namePiPv" />
		<result column="DT_SEX_PV" jdbcType="VARCHAR" property="dtSexPv" />
		<result column="AGE_PV" jdbcType="VARCHAR" property="agePv" />
		<result column="ADDRESS_PV" jdbcType="VARCHAR" property="addressPv" />
		<result column="DT_MARRY_PV" jdbcType="VARCHAR" property="dtMarryPv" />
		<result column="PK_DEPT" jdbcType="CHAR" property="pkDept" />
		<result column="DEPT_NAME" jdbcType="VARCHAR" property="deptName" />
		<result column="PK_DEPT_NS" jdbcType="CHAR" property="pkDeptNs" />
		<result column="DEPT_NS_NAME" jdbcType="VARCHAR" property="deptNsName" />
		<result column="DATE_CLINIC" jdbcType="TIMESTAMP" property="dateClinic" />
		<result column="DATE_ADMIT" jdbcType="TIMESTAMP" property="dateAdmit" />
		<result column="PK_WG" jdbcType="CHAR" property="pkWg" />
		<result column="BED_NO" jdbcType="VARCHAR" property="bedNo" />
		<result column="PK_EMP_TRE" jdbcType="CHAR" property="pkEmpTre" />
		<result column="NAME_EMP_TRE" jdbcType="VARCHAR" property="nameEmpTre" />
		<result column="PK_EMP_PHY" jdbcType="CHAR" property="pkEmpPhy" />
		<result column="NAME_EMP_PHY" jdbcType="VARCHAR" property="nameEmpPhy" />
		<result column="PK_EMP_NS" jdbcType="CHAR" property="pkEmpNs" />
		<result column="NAME_EMP_NS" jdbcType="VARCHAR" property="nameEmpNs" />
		<result column="PK_INSU" jdbcType="CHAR" property="pkInsu" />
		<result column="INSU_NAME" jdbcType="VARCHAR" property="insuName" />
		<result column="PK_PATICATE" jdbcType="VARCHAR" property="pkPaticate" />
		<result column="PK_EMP_REG" jdbcType="CHAR" property="pkEmpReg" />
		<result column="NAME_EMP_REG" jdbcType="VARCHAR" property="nameEmpReg" />
		<result column="DATE_REG" jdbcType="TIMESTAMP" property="dateReg" />
		<result column="FLAG_CANCEL" jdbcType="CHAR" property="flagCancel" />
		<result column="PK_EMP_CANCEL" jdbcType="CHAR" property="pkEmpCancel" />
		<result column="NAME_EMP_CANCEL" jdbcType="VARCHAR" property="nameEmpCancel" />
		<result column="DATE_CANCEL" jdbcType="TIMESTAMP" property="dateCancel" />
		<result column="EU_STATUS_FP" jdbcType="VARCHAR" property="euStatusFp" />
		<result column="CREATOR" jdbcType="CHAR" property="creator" />
		<result column="CREATE_TIME" jdbcType="TIMESTAMP" property="createTime" />
		<result column="MODIFIER" jdbcType="CHAR" property="modifier" />
		<result column="DEL_FLAG" jdbcType="CHAR" property="delFlag" />
		<result column="TS" jdbcType="TIMESTAMP" property="ts" />
		<result column="PK_PVIP" jdbcType="CHAR" property="pkPvip" />
		<result column="PK_IP_NOTICE" jdbcType="CHAR" property="pkIpNotice" />
		<result column="IP_TIMES" jdbcType="DECIMAL" property="ipTimes" />
		<result column="DATE_NOTICE" jdbcType="TIMESTAMP" property="dateNotice" />
		<result column="FLAG_OPT" jdbcType="CHAR" property="flagOpt" />
		<result column="DT_LEVEL_NS" jdbcType="VARCHAR" property="dtLevelNs" />
		<result column="LEVEL_NS_NAME" jdbcType="VARCHAR" property="levelNsName" />
		<result column="DT_LEVEL_DISE" jdbcType="VARCHAR" property="dtLevelDise" />
		<result column="LEVEL_DISE_NAME" jdbcType="VARCHAR" property="levelDiseName" />
		<result column="DT_LEVEL_NUTR" jdbcType="VARCHAR" property="dtLevelNutr" />
		<result column="DT_OUTCOMES" jdbcType="VARCHAR" property="dtOutcomes" />
		<result column="FLAG_INFANT" jdbcType="CHAR" property="flagInfant" />
		<result column="QUAN_INFANT" jdbcType="DECIMAL" property="quanInfant" />
		<result column="EU_STATUS_DOC" jdbcType="VARCHAR" property="euStatusDoc" />
		<result column="DATE_COMMIT_DOC" jdbcType="TIMESTAMP" property="dateCommitDoc" />
		<result column="FLAG_GA" jdbcType="CHAR" property="flagGa" />
		<result column="FLAG_GA_NS" jdbcType="CHAR" property="flagGaNs" />
		<result column="DT_INTYPE" jdbcType="VARCHAR" property="dtIntype" />
		<result column="DT_OUTTYPE" jdbcType="VARCHAR" property="dtOuttype" />
		<result column="PK_DEPT_ADMIT" jdbcType="CHAR" property="pkDeptAdmit" />
		<result column="PK_DEPT_NS_ADMIT" jdbcType="CHAR" property="pkDeptNsAdmit" />
		<result column="PK_DEPT_DIS" jdbcType="CHAR" property="pkDeptDis" />
		<result column="PK_DEPT_NS_DIS" jdbcType="CHAR" property="pkDeptNsDis" />
		<result column="FLAG_PREST" jdbcType="VARCHAR" property="flagPrest" />
		<result column="DATE_PREST" jdbcType="TIMESTAMP" property="datePrest" />
		<result column="PK_EMP_PREST" jdbcType="CHAR" property="pkEmpPrest" />
		<result column="NAME_EMP_PREST" jdbcType="VARCHAR" property="nameEmpPrest" />
		<result column="PK_PATREC" jdbcType="CHAR" property="pkPatrec" />
		<result column="DIAG_ADMIT_TXT" jdbcType="VARCHAR" property="diagAdmitTxt" />
		<result column="DIAG_DIS_TXT" jdbcType="VARCHAR" property="diagDisTxt" />
		<result column="EU_STATUS" jdbcType="CHAR" property="euStatus" />
		<result column="PK_EMP_REFER" jdbcType="VARCHAR" property="pkEmpRefer" />
		<result column="REFER_NAME" jdbcType="VARCHAR" property="referName" />
		<result column="PK_EMP_CONSULT" jdbcType="VARCHAR" property="pkEmpConsult" />
		<result column="CONSULT_NAME" jdbcType="VARCHAR" property="consultName" />
		<result column="PK_EMP_DIRECTOR" jdbcType="VARCHAR" property="pkEmpDirector" />
		<result column="DIRECTOR_NAME" jdbcType="VARCHAR" property="directorName" />
		<result column="PK_EMP_NS_CHARGE" jdbcType="VARCHAR" property="pkEmpNsCharge" />
		<result column="NS_CHARGE_NAME" jdbcType="VARCHAR" property="nsChargeName" />
		<result column="PK_EMP_NS_HEAD" jdbcType="VARCHAR" property="pkEmpNsHead" />
		<result column="NS_HEAD_NAME" jdbcType="VARCHAR" property="nsHeadName" />
		<result column="PK_EMP_QC_DIS" jdbcType="VARCHAR" property="pkEmpQcDis" />
		<result column="QC_DIS_NAME" jdbcType="VARCHAR" property="qcDisName" />
		<result column="IN_HOS_DAYS" jdbcType="INTEGER" property="inHosDays" />
		<result column="TEMPE" jdbcType="VARCHAR" property="tempe" />
		<result column="PLUSE" jdbcType="VARCHAR" property="pluse" />
		<result column="BREATH" jdbcType="VARCHAR" property="breath" />
		<result column="SYSTOLIC" jdbcType="VARCHAR" property="systolic" />
		<result column="DIASTOLIC" jdbcType="VARCHAR" property="diastolic" />
		<result column="FLAG_AUDIT" jdbcType="CHAR" property="flagAudit" />
		<result column="ADDR_BIRTH" jdbcType="VARCHAR" property="addrBirth"/>
		<result column="ADDR_ORIGIN" jdbcType="VARCHAR" property="addrOrigin"/>
		<result column="ADDR_CUR" jdbcType="VARCHAR" property="addrCur"/>
		<result column="ADDR_REGI" jdbcType="VARCHAR" property="addrRegi"/>
		<result column="ADDR_REL" jdbcType="VARCHAR" property="addrRel"/>
		<result column="RALATION_NAME" jdbcType="VARCHAR" property="ralationName"/>
		<result column="NEMS_PAT_DIAGNOSIS" jdbcType="VARCHAR" property="nemsPatDiagnosis"/>
		<result column="CODE_APPLY" jdbcType="VARCHAR" property="codeApply"/>
		<result column="QUAN_BT" jdbcType="VARCHAR" property="quanBt"/>
		<result column="TRANS_TIME" jdbcType="TIMESTAMP" property="transTime"/>
		<result column="PULSE" jdbcType="VARCHAR" property="pulse"/>
		<result column="SPO2" jdbcType="VARCHAR" property="spo2"/>
		<result column="DESC_opt_SPIRIT" jdbcType="VARCHAR" property="descOptSpirit"/>
		<result column="DESC_OPT_URGENT" jdbcType="VARCHAR" property="descOptUrgent"/>
		<result column="EU_PVMODE" jdbcType="VARCHAR" property="euPvmode"/>
		<result column="EU_LINK_QC_GRADE" jdbcType="CHAR" property="euLinkQcGrade" />
		<result column="LINK_QC_SCORE" jdbcType="DECIMAL" property="linkQcScore" />
		<result column="PK_EMP_LINK_QC" jdbcType="VARCHAR" property="pkEmpLinkQc" />
		<result column="LINK_QC_DATE" jdbcType="DATE" property="linkQcDate" />
		<result column="CHK_STATUS" jdbcType="VARCHAR" property="chkStatus" />
		<result column="NAME_EMP" jdbcType="VARCHAR" property="nameEmp" />
	</resultMap>


	<select id="queryPatListByDept" resultMap="ResultMapPatList">
		SELECT
		pat.*
		FROM
		VIEW_EMR_PAT_LIST pat
		WHERE
		pat.eu_pvtype='3'
		<if test="pkDept != null">
			and pat.PK_DEPT = #{pkDept,jdbcType=VARCHAR}
		</if>
		<if test="flagIn != null">
			and pat.flag_in = #{flagIn,jdbcType=CHAR}
		</if>
		<if test="beginDateOut != null">
			and pat.date_end &gt;=
			to_date(#{beginDateOut,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		<if test="endDateOut != null">
			and pat.date_end &lt;
			to_date(#{endDateOut,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		<if test="pkDeptTrans != null">
			and exists
			(select adtt.pk_pv
			from view_emr_trans_list adts
			inner join view_emr_trans_list adtt
			on adtt.pk_adt_source = adts.pk_adt
			where adts.pk_dept = #{pkDeptTrans,jdbcType=VARCHAR}
			and adtt.eu_status = '1'
			and adtt.pk_pv = pat.pk_pv)
		</if>
		<if test="orderBy != null">
			${orderBy}
		</if>
	</select>
	
	<select id="queryPatListByPkpv" resultType="com.zebone.nhis.common.module.emr.rec.rec.EmrPatList">
		SELECT
		pat.*
		FROM
		VIEW_EMR_PAT_LIST pat
		WHERE
		pat.eu_pvtype='3'
		<if test="pkPv != null">
			and pat.PK_Pv = #{pkPv,jdbcType=VARCHAR}
		</if>
	</select>

	<select id="queryPatListByDeptDc" resultMap="ResultMapPatList">
		SELECT pat.*
		FROM VIEW_EMR_PAT_LIST pat
		WHERE pat.eu_pvtype='3'
		  and pat.eu_status_pv not in ('0','9') 
		<if test="pkDept != null">
			and pat.PK_DEPT = #{pkDept,jdbcType=VARCHAR}
		</if>
		<if test="pkDeptNs != null">
			and pat.PK_DEPT_NS = #{pkDeptNs,jdbcType=VARCHAR}
		</if>
		<if test="flagIn != null">
			and pat.flag_in = #{flagIn,jdbcType=CHAR}
		</if>
		<if test="beginDateOut != null">
			and pat.date_end &gt;=
			to_date(#{beginDateOut,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		<if test="endDateOut != null">
			and pat.date_end &lt;
			to_date(#{endDateOut,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		<if test="pkDeptTransNew != null">
		  and exists 
			(select adts.pk_pv 
			from nhis.view_emr_trans_list adts    
             where adts.pk_dept = #{pkDeptTransNew,jdbcType=VARCHAR}
             and adts.pk_pv = pat.pk_pv)      
		</if>
		<if test="pkDeptTrans != null">
			and exists
			(select adtt.pk_pv
			from view_emr_trans_list adts
			inner join view_emr_trans_list adtt
			on adtt.pk_adt_source = adts.pk_adt
			where adts.pk_dept = #{pkDeptTrans,jdbcType=VARCHAR}
			and adtt.eu_status = '1'
			and adtt.pk_pv = pat.pk_pv)
		</if>
		<if test="pkDeptTransTj != null">
			and exists
			(select adts.pk_pv
			from view_emr_trans_list adts
			where adts.pk_dept = #{pkDeptTransTj,jdbcType=VARCHAR}
			and adts.pk_pv = pat.pk_pv)
		</if>
		<if test="pkDeptNsTrans != null">
			and exists
			(select adtt.pk_pv
			from view_emr_trans_list adts
			inner join view_emr_trans_list adtt
			on adtt.pk_adt_source = adts.pk_adt
			where adts.pk_dept_ns = #{pkDeptNsTrans,jdbcType=VARCHAR}
			and adtt.eu_status = '1'
			and adtt.pk_pv = pat.pk_pv)
		</if>
		<if test="orderByStatus != null">
			${orderByStatus}
		</if>
	</select>

	<select id="queryPatListByDeptDcReview" resultMap="ResultMapPatListReview">
		SELECT decode(ndrecord.chk_status,null,0,ndrecord.chk_status) as chk_status,ndrecord.NAME_EMP,ndrecord.create_time,pat.*
		FROM VIEW_EMR_PAT_LIST pat
		left join nd_record ndrecord on ndrecord.pk_pv = pat.pk_pv and ndrecord.PK_TEMPLATE = #{pkTmp,jdbcType=VARCHAR}
		WHERE pat.eu_pvtype='3'
		and pat.eu_status_pv not in ('0','9')
		<if test="pkDept != null">
			and pat.PK_DEPT = #{pkDept,jdbcType=VARCHAR}
		</if>
		<if test="pkDeptNs != null">
			and pat.PK_DEPT_NS = #{pkDeptNs,jdbcType=VARCHAR}
		</if>
		<if test="flagIn != null">
			and pat.flag_in = #{flagIn,jdbcType=CHAR}
		</if>
		<if test="beginDateOut != null">
			and pat.date_end &gt;=
			to_date(#{beginDateOut,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		<if test="endDateOut != null">
			and pat.date_end &lt;
			to_date(#{endDateOut,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		<if test="pkDeptTransNew != null">
			and exists
			(select adts.pk_pv
			from nhis.view_emr_trans_list adts
			where adts.pk_dept = #{pkDeptTransNew,jdbcType=VARCHAR}
			and adts.pk_pv = pat.pk_pv)
		</if>
		<if test="pkDeptTrans != null">
			and exists
			(select adtt.pk_pv
			from view_emr_trans_list adts
			inner join view_emr_trans_list adtt
			on adtt.pk_adt_source = adts.pk_adt
			where adts.pk_dept = #{pkDeptTrans,jdbcType=VARCHAR}
			and adtt.eu_status = '1'
			and adtt.pk_pv = pat.pk_pv)
		</if>
		<if test="pkDeptTransTj != null">
			and exists
			(select adts.pk_pv
			from view_emr_trans_list adts
			where adts.pk_dept = #{pkDeptTransTj,jdbcType=VARCHAR}
			and adts.pk_pv = pat.pk_pv)
		</if>
		<if test="pkDeptNsTrans != null">
			and exists
			(select adtt.pk_pv
			from view_emr_trans_list adts
			inner join view_emr_trans_list adtt
			on adtt.pk_adt_source = adts.pk_adt
			where adts.pk_dept_ns = #{pkDeptNsTrans,jdbcType=VARCHAR}
			and adtt.eu_status = '1'
			and adtt.pk_pv = pat.pk_pv)
		</if>
		<if test="orderByStatus != null">
			${orderByStatus}
		</if>
	</select>
	
	<select id="queryPatListAudit" resultMap="ResultMapPatList">
		select pat.pk_pv,'0' as flag_audit /**--住院医师需提交*/
		from pv_encounter pat
		where
		pat.eu_pvtype='3'
		<if test="pkDept != null">
			and pat.PK_DEPT = #{pkDept,jdbcType=VARCHAR}
		</if>
		<if test="beginDate != null">
			and pat.date_end &gt;=
			to_date(#{beginDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		<if test="endDate != null">
			and pat.date_end &lt;
			to_date(#{endDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		and exists
		(select * from emr_med_rec rec
		where pat.pk_pv =rec.pk_pv
		and rec.eu_doc_status='0'
		and rec.flag_audit='1'
		and rec.DEL_FLAG='0'
		and rec.creator =#{pkEmp,jdbcType=VARCHAR})
		<if test="pkDeptTrans != null">
			and exists
			(select adtt.pk_pv
			from pv_adt adts
			inner join pv_adt adtt
			on adtt.pk_adt_source = adts.pk_adt
			where adts.pk_dept = #{pkDeptTrans,jdbcType=VARCHAR}
			and adtt.eu_status = '1'
			and adtt.pk_pv = pat.pk_pv)
		</if>
		union all
		/**--新记录*/
		select pat.pk_pv,'1' as flag_audit
		/**--主治医师（文档中未指定医师）*/
		from pv_encounter pat
		inner join emr_pat_rec patrec on pat.pk_pv=patrec.pk_pv
		where
		pat.eu_pvtype='3'
		<if test="pkDept != null">
			and pat.PK_DEPT = #{pkDept,jdbcType=VARCHAR}
		</if>
		and patrec.pk_emp_consult = #{pkEmp,jdbcType=VARCHAR}
		<if test="beginDate != null">
			and pat.date_end &gt;=
			to_date(#{beginDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		<if test="endDate != null">
			and pat.date_end &lt;
			to_date(#{endDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		and exists
		(select * from emr_med_rec rec
		where pat.pk_pv=rec.pk_pv
		and rec.eu_doc_status='1'
		and rec.pk_emp_consult is null
		and rec.DEL_FLAG='0'
		and ((rec.EU_AUDIT_LEVEL != 1 and LEN(rec.AUDIT_LEVEL_SET)=0) or
		(CHARINDEX('2',rec.AUDIT_LEVEL_SET)&gt;0))
		and (rec.pk_emp_consult_act is null or rec.pk_emp_consult_act is null) )
		<if test="pkDeptTrans != null">
			and exists
			(select adtt.pk_pv
			from pv_adt adts
			inner join pv_adt adtt
			on adtt.pk_adt_source = adts.pk_adt
			where adts.pk_dept = #{pkDeptTrans,jdbcType=VARCHAR}
			and adtt.eu_status = '1'
			and adtt.pk_pv = pat.pk_pv)
		</if>
		union all
		select pat.pk_pv,'1' as flag_audit /**--文档中指定主治医师*/
		from pv_encounter pat
		where
		pat.eu_pvtype='3'
		<if test="pkDept != null">
			and pat.PK_DEPT = #{pkDept,jdbcType=VARCHAR}
		</if>
		<if test="beginDate != null">
			and pat.date_end &gt;=
			to_date(#{beginDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		<if test="endDate != null">
			and pat.date_end &lt;
			to_date(#{endDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		and exists
		(select * from emr_med_rec rec
		where pat.pk_pv=rec.pk_pv
		and rec.eu_doc_status='1'
		and rec.DEL_FLAG='0'
		and ((rec.EU_AUDIT_LEVEL != 1 and LEN(rec.AUDIT_LEVEL_SET)=0) or
		(CHARINDEX('2',rec.AUDIT_LEVEL_SET)&gt;0))
		and rec.pk_emp_consult is null and
		rec.pk_emp_consult_act=#{pkEmp,jdbcType=VARCHAR})
		<if test="pkDeptTrans != null">
			and exists
			(select adtt.pk_pv
			from pv_adt adts
			inner join pv_adt adtt
			on adtt.pk_adt_source = adts.pk_adt
			where adts.pk_dept = #{pkDeptTrans,jdbcType=VARCHAR}
			and adtt.eu_status = '1'
			and adtt.pk_pv = pat.pk_pv)
		</if>
		union all
		select pat.pk_pv,'1' as flag_audit /**--文档中指定主任医师*/
		from pv_encounter pat
		where
		pat.eu_pvtype='3'
		<if test="pkDept != null">
			and pat.PK_DEPT = #{pkDept,jdbcType=VARCHAR}
		</if>
		<if test="beginDate != null">
			and pat.date_end &gt;=
			to_date(#{beginDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		<if test="endDate != null">
			and pat.date_end &lt;
			to_date(#{endDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		and exists
		(select * from emr_med_rec rec
		where pat.pk_pv=rec.pk_pv
		and rec.eu_doc_status='1'
		and rec.DEL_FLAG='0'
		and rec.flag_audit_finish='0'
		and ((rec.EU_AUDIT_LEVEL in (0,3) and LEN(rec.AUDIT_LEVEL_SET)=0) or
		(CHARINDEX('3',rec.AUDIT_LEVEL_SET)&gt;0))
		and rec.pk_emp_director is null and
		rec.pk_emp_director_act=#{pkEmp,jdbcType=VARCHAR})
		<if test="pkDeptTrans != null">
			and exists
			(select adtt.pk_pv
			from pv_adt adts
			inner join pv_adt adtt
			on adtt.pk_adt_source = adts.pk_adt
			where adts.pk_dept = #{pkDeptTrans,jdbcType=VARCHAR}
			and adtt.eu_status = '1'
			and adtt.pk_pv = pat.pk_pv)
		</if>
		union all
		select pat.pk_pv,'1' as flag_audit /**--主任医师（文档中未指定）*/
		from pv_encounter pat
		inner join emr_pat_rec patrec on pat.pk_pv=patrec.pk_pv
		where
		pat.eu_pvtype='3'
		<if test="pkDept != null">
			and pat.PK_DEPT = #{pkDept,jdbcType=VARCHAR}
		</if>
		and patrec.pk_emp_director = #{pkEmp,jdbcType=VARCHAR}
		<if test="beginDate != null">
			and pat.date_end &gt;=
			to_date(#{beginDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		<if test="endDate != null">
			and pat.date_end &lt;
			to_date(#{endDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		and exists
		(select * from emr_med_rec rec
		where pat.pk_pv=rec.pk_pv
		and rec.eu_doc_status='2'
		and rec.pk_emp_director is null
		and rec.DEL_FLAG='0'
		and rec.flag_audit_finish='0'
		and ((rec.EU_AUDIT_LEVEL in (0,3) and LEN(rec.AUDIT_LEVEL_SET)=0) or
		(CHARINDEX('3',rec.AUDIT_LEVEL_SET)&gt;0))
		and rec.pk_emp_director_act is null)
		<if test="pkDeptTrans != null">
			and exists
			(select adtt.pk_pv
			from pv_adt adts
			inner join pv_adt adtt
			on adtt.pk_adt_source = adts.pk_adt
			where adts.pk_dept = #{pkDeptTrans,jdbcType=VARCHAR}
			and adtt.eu_status = '1'
			and adtt.pk_pv = pat.pk_pv)
		</if>
		union all
		select pat.pk_pv,'1' as flag_audit /**--文档中指定*/
		from pv_encounter pat
		where
		pat.eu_pvtype='3'
		<if test="pkDept != null">
			and pat.PK_DEPT = #{pkDept,jdbcType=VARCHAR}
		</if>
		<if test="beginDate != null">
			and pat.date_end &gt;=
			to_date(#{beginDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		<if test="endDate != null">
			and pat.date_end &lt;
			to_date(#{endDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		and exists
		(select * from emr_med_rec rec
		where pat.pk_pv=rec.pk_pv
		and rec.eu_doc_status='2'
		and rec.pk_emp_director is null
		and rec.DEL_FLAG='0'
		and rec.flag_audit_finish='0'
		and ((rec.EU_AUDIT_LEVEL in (0,3) and LEN(rec.AUDIT_LEVEL_SET)=0) or
		(CHARINDEX('3',rec.AUDIT_LEVEL_SET)&gt;0))
		and rec.pk_emp_director_act =#{pkEmp,jdbcType=VARCHAR})
		<if test="pkDeptTrans != null">
			and exists
			(select adtt.pk_pv
			from pv_adt adts
			inner join pv_adt adtt
			on adtt.pk_adt_source = adts.pk_adt
			where adts.pk_dept = #{pkDeptTrans,jdbcType=VARCHAR}
			and adtt.eu_status = '1'
			and adtt.pk_pv = pat.pk_pv)
		</if>
		union all
		/**--正在处理**/
		select pat.pk_pv,'2' as flag_audit
		from pv_encounter pat
		inner join emr_med_rec rec
		on pat.pk_pv=rec.pk_pv
		and pat.eu_pvtype='3'
		<if test="pkDept != null">
			and pat.PK_DEPT = #{pkDept,jdbcType=VARCHAR}
		</if>
		<if test="beginDate != null">
			and pat.date_end &gt;=
			to_date(#{beginDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		<if test="endDate != null">
			and pat.date_end &lt;
			to_date(#{endDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		and (rec.pk_emp_consult = #{pkEmp,jdbcType=VARCHAR} or
		rec.pk_emp_director = #{pkEmp,jdbcType=VARCHAR})
		and rec.eu_audit_status='0'
		and rec.DEL_FLAG='0'
		<if test="pkDeptTrans != null">
			and exists
			(select adtt.pk_pv
			from pv_adt adts
			inner join pv_adt adtt
			on adtt.pk_adt_source = adts.pk_adt
			where adts.pk_dept = #{pkDeptTrans,jdbcType=VARCHAR}
			and adtt.eu_status = '1'
			and adtt.pk_pv = pat.pk_pv)
		</if>
		union all
		/**--处理完成**/
		select pat.pk_pv,'3' as flag_audit
		from
		pv_encounter pat
		inner join emr_med_rec rec
		on pat.pk_pv=rec.pk_pv
		and pat.eu_pvtype='3'
		<if test="pkDept != null">
			and pat.PK_DEPT = #{pkDept,jdbcType=VARCHAR}
		</if>
		<if test="beginDate != null">
			and pat.date_end &gt;=
			to_date(#{beginDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		<if test="endDate != null">
			and pat.date_end &lt;
			to_date(#{endDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		and (rec.pk_emp_consult = #{pkEmp,jdbcType=VARCHAR} or
		rec.pk_emp_director = #{pkEmp,jdbcType=VARCHAR})
		and rec.eu_audit_status='1'
		and rec.DEL_FLAG='0'
		<if test="pkDeptTrans != null">
			and exists
			(select adtt.pk_pv
			from pv_adt adts
			inner join pv_adt adtt
			on adtt.pk_adt_source = adts.pk_adt
			where adts.pk_dept = #{pkDeptTrans,jdbcType=VARCHAR}
			and adtt.eu_status = '1'
			and adtt.pk_pv = pat.pk_pv)
		</if>
	</select>
	<select id="queryPatListAuditOracle" resultMap="ResultMapPatList">
		select pat.*,'0' as flag_audit /**--住院医师需提交*/
		from view_emr_pat_list pat
		where
		pat.eu_pvtype='3'
		<if test="pkDept != null">
			and pat.PK_DEPT = #{pkDept,jdbcType=VARCHAR}
		</if>
		<if test="beginDate != null">
			and pat.date_end &gt;=
			to_date(#{beginDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		<if test="endDate != null">
			and pat.date_end &lt;
			to_date(#{endDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		and exists
		(select * from emr_med_rec rec
		where pat.pk_pv =rec.pk_pv
		and rec.eu_doc_status='0'
		and rec.flag_audit='1'
		and rec.DEL_FLAG='0'
		and rec.creator =#{pkEmp,jdbcType=VARCHAR})
		<if test="pkDeptTrans != null">
			and exists
			(select adtt.pk_pv
			from pv_adt adts
			inner join pv_adt adtt
			on adtt.pk_adt_source = adts.pk_adt
			where adts.pk_dept = #{pkDeptTrans,jdbcType=VARCHAR}
			and adtt.eu_status = '1'
			and adtt.pk_pv = pat.pk_pv)
		</if>
		union all
		/**--新记录*/
		select pat.*,'1' as flag_audit
		/**--主治医师（文档中未指定医师）*/
		from view_emr_pat_list pat
		where
		pat.eu_pvtype='3'
		<if test="pkDept != null">
			and pat.PK_DEPT = #{pkDept,jdbcType=VARCHAR}
		</if>
		and pat.pk_emp_consult = #{pkEmp,jdbcType=VARCHAR}
		<if test="beginDate != null">
			and pat.date_end &gt;=
			to_date(#{beginDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		<if test="endDate != null">
			and pat.date_end &lt;
			to_date(#{endDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		and exists
		(select * from emr_med_rec rec
		where pat.pk_pv=rec.pk_pv
		and rec.eu_doc_status='1'
		and rec.pk_emp_consult is null
		and rec.DEL_FLAG='0'
		and ((rec.EU_AUDIT_LEVEL != 1 and LENGTH(rec.AUDIT_LEVEL_SET)=0) or
		(INSTR(rec.AUDIT_LEVEL_SET,'2')&gt;0))
		and (rec.pk_emp_consult_act is null or rec.pk_emp_consult_act is null) )
		<if test="pkDeptTrans != null">
			and exists
			(select adtt.pk_pv
			from pv_adt adts
			inner join pv_adt adtt
			on adtt.pk_adt_source = adts.pk_adt
			where adts.pk_dept = #{pkDeptTrans,jdbcType=VARCHAR}
			and adtt.eu_status = '1'
			and adtt.pk_pv = pat.pk_pv)
		</if>
		union all
		select pat.*,'1' as flag_audit /**--文档中指定主治医师*/
		from view_emr_pat_list pat
		where
		pat.eu_pvtype='3'
		<if test="pkDept != null">
			and pat.PK_DEPT = #{pkDept,jdbcType=VARCHAR}
		</if>
		<if test="beginDate != null">
			and pat.date_end &gt;=
			to_date(#{beginDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		<if test="endDate != null">
			and pat.date_end &lt;
			to_date(#{endDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		and exists
		(select * from emr_med_rec rec
		where pat.pk_pv=rec.pk_pv
		and rec.eu_doc_status='1'
		and rec.DEL_FLAG='0'
		and ((rec.EU_AUDIT_LEVEL != 1 and LENGTH(rec.AUDIT_LEVEL_SET)=0) or
		(INSTR(rec.AUDIT_LEVEL_SET,'2')&gt;0))
		and rec.pk_emp_consult is null and
		rec.pk_emp_consult_act=#{pkEmp,jdbcType=VARCHAR})
		<if test="pkDeptTrans != null">
			and exists
			(select adtt.pk_pv
			from pv_adt adts
			inner join pv_adt adtt
			on adtt.pk_adt_source = adts.pk_adt
			where adts.pk_dept = #{pkDeptTrans,jdbcType=VARCHAR}
			and adtt.eu_status = '1'
			and adtt.pk_pv = pat.pk_pv)
		</if>
		union all
		select pat.*,'1' as flag_audit /**--文档中指定主任医师*/
		from view_emr_pat_list pat
		where
		pat.eu_pvtype='3'
		<if test="pkDept != null">
			and pat.PK_DEPT = #{pkDept,jdbcType=VARCHAR}
		</if>
		<if test="beginDate != null">
			and pat.date_end &gt;=
			to_date(#{beginDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		<if test="endDate != null">
			and pat.date_end &lt;
			to_date(#{endDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		and exists
		(select * from emr_med_rec rec
		where pat.pk_pv=rec.pk_pv
		and rec.eu_doc_status='1'
		and rec.DEL_FLAG='0'
		and rec.flag_audit_finish='0'
		and ((rec.EU_AUDIT_LEVEL in (0,3) and LENGTH(rec.AUDIT_LEVEL_SET)=0) or
		(INSTR(rec.AUDIT_LEVEL_SET,'3')&gt;0))
		and rec.pk_emp_director is null and
		rec.pk_emp_director_act=#{pkEmp,jdbcType=VARCHAR})
		<if test="pkDeptTrans != null">
			and exists
			(select adtt.pk_pv
			from pv_adt adts
			inner join pv_adt adtt
			on adtt.pk_adt_source = adts.pk_adt
			where adts.pk_dept = #{pkDeptTrans,jdbcType=VARCHAR}
			and adtt.eu_status = '1'
			and adtt.pk_pv = pat.pk_pv)
		</if>
		union all
		select pat.*,'1' as flag_audit /**--主任医师（文档中未指定）*/
		from view_emr_pat_list pat
		where
		pat.eu_pvtype='3'
		<if test="pkDept != null">
			and pat.PK_DEPT = #{pkDept,jdbcType=VARCHAR}
		</if>
		and pat.pk_emp_director = #{pkEmp,jdbcType=VARCHAR}
		<if test="beginDate != null">
			and pat.date_end &gt;=
			to_date(#{beginDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		<if test="endDate != null">
			and pat.date_end &lt;
			to_date(#{endDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		and exists
		(select * from emr_med_rec rec
		where pat.pk_pv=rec.pk_pv
		and rec.eu_doc_status='2'
		and rec.pk_emp_director is null
		and rec.DEL_FLAG='0'
		and rec.flag_audit_finish='0'
		and ((rec.EU_AUDIT_LEVEL in (0,3) and LENGTH(rec.AUDIT_LEVEL_SET)=0) or
		(INSTR(rec.AUDIT_LEVEL_SET,'3')&gt;0))
		and rec.pk_emp_director_act is null)
		<if test="pkDeptTrans != null">
			and exists
			(select adtt.pk_pv
			from pv_adt adts
			inner join pv_adt adtt
			on adtt.pk_adt_source = adts.pk_adt
			where adts.pk_dept = #{pkDeptTrans,jdbcType=VARCHAR}
			and adtt.eu_status = '1'
			and adtt.pk_pv = pat.pk_pv)
		</if>
		union all
		select pat.*,'1' as flag_audit /**--文档中指定*/
		from view_emr_pat_list pat
		where
		pat.eu_pvtype='3'
		<if test="pkDept != null">
			and pat.PK_DEPT = #{pkDept,jdbcType=VARCHAR}
		</if>
		<if test="beginDate != null">
			and pat.date_end &gt;=
			to_date(#{beginDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		<if test="endDate != null">
			and pat.date_end &lt;
			to_date(#{endDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		and exists
		(select * from emr_med_rec rec
		where pat.pk_pv=rec.pk_pv
		and rec.eu_doc_status='2'
		and rec.pk_emp_director is null
		and rec.DEL_FLAG='0'
		and rec.flag_audit_finish='0'
		and ((rec.EU_AUDIT_LEVEL in (0,3) and LENGTH(rec.AUDIT_LEVEL_SET)=0) or
		(INSTR(rec.AUDIT_LEVEL_SET,'3')&gt;0))
		and rec.pk_emp_director_act =#{pkEmp,jdbcType=VARCHAR})
		<if test="pkDeptTrans != null">
			and exists
			(select adtt.pk_pv
			from pv_adt adts
			inner join pv_adt adtt
			on adtt.pk_adt_source = adts.pk_adt
			where adts.pk_dept = #{pkDeptTrans,jdbcType=VARCHAR}
			and adtt.eu_status = '1'
			and adtt.pk_pv = pat.pk_pv)
		</if>
		union all
		/**--正在处理**/
		select pat.*,'2' as flag_audit
		from view_emr_pat_list pat
		inner join emr_med_rec rec
		on pat.pk_pv=rec.pk_pv
		and pat.eu_pvtype='3'
		<if test="pkDept != null">
			and pat.PK_DEPT = #{pkDept,jdbcType=VARCHAR}
		</if>
		<if test="beginDate != null">
			and pat.date_end &gt;=
			to_date(#{beginDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		<if test="endDate != null">
			and pat.date_end &lt;
			to_date(#{endDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		and (rec.pk_emp_consult = #{pkEmp,jdbcType=VARCHAR} or
		rec.pk_emp_director = #{pkEmp,jdbcType=VARCHAR})
		and rec.eu_audit_status='0'
		and rec.DEL_FLAG='0'
		<if test="pkDeptTrans != null">
			and exists
			(select adtt.pk_pv
			from pv_adt adts
			inner join pv_adt adtt
			on adtt.pk_adt_source = adts.pk_adt
			where adts.pk_dept = #{pkDeptTrans,jdbcType=VARCHAR}
			and adtt.eu_status = '1'
			and adtt.pk_pv = pat.pk_pv)
		</if>
		union all
		/**--处理完成**/
		select pat.*,'3' as flag_audit
		from
		view_emr_pat_list pat
		inner join emr_med_rec rec
		on pat.pk_pv=rec.pk_pv
		and pat.eu_pvtype='3'
		<if test="pkDept != null">
			and pat.PK_DEPT = #{pkDept,jdbcType=VARCHAR}
		</if>
		<if test="beginDate != null">
			and pat.date_end &gt;=
			to_date(#{beginDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		<if test="endDate != null">
			and pat.date_end &lt;
			to_date(#{endDate,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		and (rec.pk_emp_consult = #{pkEmp,jdbcType=VARCHAR} or
		rec.pk_emp_director = #{pkEmp,jdbcType=VARCHAR})
		and rec.eu_audit_status='1'
		and rec.DEL_FLAG='0'
		<if test="pkDeptTrans != null">
			and exists
			(select adtt.pk_pv
			from pv_adt adts
			inner join pv_adt adtt
			on adtt.pk_adt_source = adts.pk_adt
			where adts.pk_dept = #{pkDeptTrans,jdbcType=VARCHAR}
			and adtt.eu_status = '1'
			and adtt.pk_pv = pat.pk_pv)
		</if>
	</select>	
	<select id="queryPatListByConds" resultMap="ResultMapPatList">
		SELECT
		*
		FROM
		VIEW_EMR_PAT_LIST
		WHERE pk_pv is not null
		  and eu_status_pv !='9' 
		<if test="pkPv != null">
			and PK_PV = #{pkPv,jdbcType=VARCHAR}
		</if>
		<if test="beginDateB != null">
			and date_begin &gt;=
			to_date(#{beginDateB,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		<if test="endDateB != null">
			and date_begin &lt;
			to_date(#{endDateB,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		<if test="euStatus != null">
			and eu_status = #{euStatus,jdbcType=CHAR}
		</if>
		<if test="euStatusPvNot != null">
			and eu_status_pv != #{euStatusPvNot,jdbcType=CHAR}
		</if>
		<if test="codePi != null">
			and code_pi = #{codePi,jdbcType=CHAR}
		</if>
		<if test="pkPi != null">
			and pk_pi = #{pkPi,jdbcType=CHAR}
		</if>
		<if test="ipTimes != null and ipTimes != ''">
			and ip_times = #{ipTimes,jdbcType=CHAR}
		</if>
		<if test="codeIp != null">
			and code_ip  like #{codeIp,jdbcType=CHAR}||'%'
		</if>
		<if test="name != null">
			and name like #{name,jdbcType=CHAR}||'%'
		</if>
		<if test="pkDept != null">
			and PK_DEPT = #{pkDept,jdbcType=VARCHAR}
		</if>
		<if test="pkEmp != null">
			and creator = #{pkEmp,jdbcType=VARCHAR}
		</if>
		<if test="flagIn != null">
			and flag_in = #{flagIn,jdbcType=CHAR}
		</if>
		<if test="beginDateOut != null">
			and date_end &gt;= to_date(#{beginDateOut,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		<if test="endDateOut != null">
			and date_end &lt; to_date(#{endDateOut,jdbcType=VARCHAR},'yyyymmddhh24miss')
		</if>
		<if test="pkDeptTrans != null">
			and exists
			(select adtt.pk_pv
			from view_emr_trans_list adts
			inner join view_emr_trans_list adtt
			on adtt.pk_adt_source = adts.pk_adt
			where adts.pk_dept = #{pkDeptTrans,jdbcType=VARCHAR}
			and adtt.eu_status = '1'
			and adtt.pk_pv = pk_pv)
		</if>
		<if test="orderBy != null">
			${orderBy}
		</if>
	</select>
	<select id="queryEmrPatRecByConds" resultMap="ResultMapPatRec"
		parameterType="java.util.Map">
		SELECT * FROM EMR_PAT_REC
		where DEL_FLAG!='1'
		<if test="pkPatrec != null">
			and PK_PATREC != #{pkPatrec,jdbcType=CHAR}
		</if>
		<if test="pkPv != null">
			and PK_PV = #{pkPv,jdbcType=VARCHAR}
		</if>
	</select>

	<resultMap id="ResultMapDeptList"
		type="com.zebone.nhis.common.module.emr.rec.rec.EmrDeptList">
		<result column="PK_DEPT" jdbcType="CHAR" property="pkDept" />
		<result column="PK_ORG" jdbcType="CHAR" property="pkOrg" />
		<result column="CODE" jdbcType="VARCHAR" property="code" />
		<result column="NAME" jdbcType="VARCHAR" property="name" />
		<result column="PY_CODE" jdbcType="VARCHAR" property="pyCode" />
		<result column="D_CODE" jdbcType="VARCHAR" property="dCode" />
	</resultMap>
	<select id="queryEmrDeptList" resultMap="ResultMapDeptList"
		parameterType="java.util.Map">
		SELECT * FROM VIEW_EMR_DEPT_LIST
		where nvl(del_flag,'0')!='1'
		<if test="pkOrg != null">
			and pk_org like #{pkOrg,jdbcType=VARCHAR}
		</if>
	</select>
	<resultMap id="ResultMapEmpList"
		type="com.zebone.nhis.common.module.emr.rec.rec.EmrEmpList">
		<result column="PK_EMP" jdbcType="CHAR" property="pkEmp" />
		<result column="PK_ORG" jdbcType="CHAR" property="pkOrg" />
		<result column="CODE" jdbcType="VARCHAR" property="code" />
		<result column="NAME" jdbcType="VARCHAR" property="name" />
		<result column="PY_CODE" jdbcType="VARCHAR" property="pyCode" />
		<result column="D_CODE" jdbcType="VARCHAR" property="dCode" />
	</resultMap>

	<select id="queryEmpListByPks" resultMap="ResultMapEmpList">
		Select
		*
		from VIEW_EMR_EMP_LIST where pk_emp in
		<foreach item="item" index="index" collection="list" open="("
			separator="," close=")">
			#{item}
		</foreach>
	</select>
	<resultMap id="ResultMapPatDiags"
		type="com.zebone.nhis.common.module.emr.rec.rec.EmrPatDiags">
		<id column="PK_PATDIAG" jdbcType="CHAR" property="pkPatdiag" />
		<result column="PK_ORG" jdbcType="VARCHAR" property="pkOrg" />
		<result column="PK_PV" jdbcType="VARCHAR" property="pkPv" />
		<result column="PK_DIAG" jdbcType="VARCHAR" property="pkDiag" />
		<result column="CODE" jdbcType="VARCHAR" property="code" />
		<result column="NAME" jdbcType="VARCHAR" property="name" />
		<result column="DT_DIAG_TYPE" jdbcType="VARCHAR" property="dtDiagType" />
		<result column="SEQ_NUM" jdbcType="DECIMAL" property="seqNum" />
		<result column="DIAG_DATE" jdbcType="DATE" property="diagDate" />
		<result column="SORT_NUM" jdbcType="DECIMAL" property="sortNum" />
		<result column="PK_PARENT" jdbcType="DECIMAL" property="pkParent" />
		<result column="FLAG_TCM" jdbcType="CHAR" property="flagTcm" />
		<result column="DEL_FLAG" jdbcType="CHAR" property="delFlag" />
		<result column="REMARK" jdbcType="VARCHAR" property="remark" />
		<result column="CREATOR" jdbcType="VARCHAR" property="creator" />
		<result column="CREATE_TIME" jdbcType="DATE" property="createTime" />
		<result column="TS" jdbcType="DATE" property="ts" />
	</resultMap>
	<select id="queryPatDiagsList" resultMap="ResultMapPatDiags">
		SELECT
		*
		FROM
		EMR_PAT_DIAGS
		WHERE
		PK_PV = #{pkPv,jdbcType=CHAR}
		and del_flag!='1'
		<if test="dtDiagType != null">
			and DT_DIAG_TYPE = #{dtDiagType,jdbcType=VARCHAR}
		</if>

		order by dt_diag_type,seq_num,code,name,pk_patdiag
	</select>
	<select id="queryPatDiagsListPage" resultMap="ResultMapPatDiags">
		SELECT
		*
		FROM
		EMR_PAT_DIAGS
		WHERE
		PK_PV = #{pkPv,jdbcType=CHAR}
		and del_flag!='1'
		<if test="diagTypeInDis != null">
			and DT_DIAG_TYPE in('0000','0001','0009')
		</if>
		order by dt_diag_type,seq_num,code,name,pk_patdiag
	</select>	
	<insert id="saveEmrPatDiags"
		parameterType="com.zebone.nhis.common.module.emr.rec.rec.EmrPatDiags">
		INSERT INTO EMR_PAT_DIAGS
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="pkPatdiag != null">
				PK_PATDIAG,
			</if>
			<if test="pkOrg != null">
				PK_ORG,
			</if>
			<if test="pkPv != null">
				PK_PV,
			</if>
			<if test="pkDiag != null">
				PK_DIAG,
			</if>
			<if test="code != null">
				CODE,
			</if>
			<if test="name != null">
				NAME,
			</if>
			<if test="dtDiagType != null">
				DT_DIAG_TYPE,
			</if>
			<if test="seqNum != null">
				SEQ_NUM,
			</if>
			<if test="diagDate != null">
				DIAG_DATE,
			</if>
			<if test="sortNum != null">
				SORT_NUM,
			</if>
			<if test="pkParent != null">
				PK_PARENT,
			</if>
			<if test="flagTcm != null">
				FLAG_TCM,
			</if>
			<if test="delFlag != null">
				DEL_FLAG,
			</if>
			<if test="remark != null">
				REMARK,
			</if>
			<if test="creator != null">
				CREATOR,
			</if>
			<if test="createTime != null">
				CREATE_TIME,
			</if>
			<if test="ts != null">
				TS,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="pkPatdiag != null">
				#{pkPatdiag,jdbcType=CHAR},
			</if>
			<if test="pkOrg != null">
				#{pkOrg,jdbcType=VARCHAR},
			</if>
			<if test="pkPv != null">
				#{pkPv,jdbcType=VARCHAR},
			</if>
			<if test="pkDiag != null">
				#{pkDiag,jdbcType=VARCHAR},
			</if>
			<if test="code != null">
				#{code,jdbcType=VARCHAR},
			</if>
			<if test="name != null">
				#{name,jdbcType=VARCHAR},
			</if>
			<if test="dtDiagType != null">
				#{dtDiagType,jdbcType=VARCHAR},
			</if>
			<if test="seqNum != null">
				#{seqNum,jdbcType=DECIMAL},
			</if>
			<if test="diagDate != null">
				#{diagDate,jdbcType=DATE},
			</if>
			<if test="sortNum != null">
				#{sortNum,jdbcType=DECIMAL},
			</if>
			<if test="pkParent != null">
				#{pkParent,jdbcType=DECIMAL},
			</if>
			<if test="flagTcm != null">
				#{flagTcm,jdbcType=CHAR},
			</if>
			<if test="delFlag != null">
				#{delFlag,jdbcType=CHAR},
			</if>
			<if test="remark != null">
				#{remark,jdbcType=VARCHAR},
			</if>
			<if test="creator != null">
				#{creator,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				#{createTime,jdbcType=DATE},
			</if>
			<if test="ts != null">
				#{ts,jdbcType=DATE},
			</if>
		</trim>
	</insert>

	<update id="updateEmrPatDiags"
		parameterType="com.zebone.nhis.common.module.emr.rec.rec.EmrPatDiags">
		UPDATE EMR_PAT_DIAGS
		<set>
			<if test="pkPatdiag != null">
				PK_PATDIAG = #{pkPatdiag,jdbcType=CHAR},
			</if>
			<if test="pkOrg != null">
				PK_ORG = #{pkOrg,jdbcType=VARCHAR},
			</if>
			<if test="pkPv != null">
				PK_PV = #{pkPv,jdbcType=VARCHAR},
			</if>
			<if test="pkDiag != null">
				PK_DIAG = #{pkDiag,jdbcType=VARCHAR},
			</if>
			<if test="code != null">
				CODE = #{code,jdbcType=VARCHAR},
			</if>
			<if test="name != null">
				NAME = #{name,jdbcType=VARCHAR},
			</if>
			<if test="dtDiagType != null">
				DT_DIAG_TYPE = #{dtDiagType,jdbcType=VARCHAR},
			</if>
			<if test="seqNum != null">
				SEQ_NUM = #{seqNum,jdbcType=DECIMAL},
			</if>
			<if test="diagDate != null">
				DIAG_DATE = #{diagDate,jdbcType=DATE},
			</if>
			<if test="sortNum != null">
				SORT_NUM = #{sortNum,jdbcType=DECIMAL},
			</if>
			<if test="pkParent != null">
				PK_PARENT = #{pkParent,jdbcType=DECIMAL},
			</if>
			<if test="flagTcm != null">
				FLAG_TCM = #{flagTcm,jdbcType=CHAR},
			</if>
			<if test="delFlag != null">
				DEL_FLAG = #{delFlag,jdbcType=CHAR},
			</if>
			<if test="remark != null">
				REMARK = #{remark,jdbcType=VARCHAR},
			</if>
			<if test="creator != null">
				CREATOR = #{creator,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				CREATE_TIME = #{createTime,jdbcType=DATE},
			</if>
			<if test="ts != null">
				TS = #{ts,jdbcType=DATE},
			</if>
		</set>
		WHERE
		PK_PATDIAG = #{pkPatdiag,jdbcType=CHAR}
	</update>
	<delete id="deleteEmrPatDiags">
		DELETE
		FROM
		EMR_PAT_DIAGS
		WHERE
		PK_DIAG = #{pkDiag,jdbcType=CHAR}
	</delete>
	<select id="queryEmpDiagsListEmr" resultMap="ResultMapPatDiags">
		select
		pk_diag,code,name,count(1) as sum,0 img_index
		from emr_pat_diags
		where creator=#{pkEmp,jdbcType=CHAR}
		and del_flag!='1'
		group by pk_diag,code,name
		order by count(1) desc
	</select>
	<select id="queryEmpDiagsList" resultMap="ResultMapPatDiags">
		select
		pv.pk_diag,zd.diagcode code,pv.desc_diag name,count(1) as sum,0
		img_index
		from pv_diag pv left outer join bd_term_diag zd
		on pv.pk_diag=zd.pk_diag
		where pv.creator=#{pkEmp,jdbcType=CHAR}
		and pv.del_flag!='1'
		group by pv.pk_diag,zd.diagcode,pv.desc_diag
		order by count(1) desc
	</select>
	<resultMap id="ResultMapOrd"
		type="com.zebone.nhis.common.module.emr.rec.rec.EmrOrdList">
		<result column="PK_CNORD" jdbcType="CHAR" property="pkCnord" />
		<result column="PK_ORG" jdbcType="CHAR" property="pkOrg" />
		<result column="PK_ORD" jdbcType="CHAR" property="pkOrd" />
		<result column="PK_PV" jdbcType="CHAR" property="pkPv" />
		<result column="CODE" jdbcType="VARCHAR" property="code" />
		<result column="NAME" jdbcType="VARCHAR" property="name" />
		<result column="SPEC" jdbcType="VARCHAR" property="spec" />
		<result column="SUPPLY_CODE" jdbcType="VARCHAR" property="supplyCode" />
		<result column="SUPPLY_NAME" jdbcType="VARCHAR" property="supplyName" />
		<result column="FREQ_CODE" jdbcType="VARCHAR" property="freqCode" />
		<result column="FREQ_NAME" jdbcType="VARCHAR" property="freqName" />
		<result column="ORDSN" jdbcType="DECIMAL" property="ordsn" />
		<result column="ORDSN_PARENT" jdbcType="DECIMAL" property="ordsnParent" />
		<result column="ORDER_FLAG" jdbcType="VARCHAR" property="orderFlag" />
		<result column="ORDER_STATUS" jdbcType="VARCHAR" property="orderStatus" />
		<result column="REMARK" jdbcType="VARCHAR" property="remark" />
		<result column="BEGIN_DATE" jdbcType="TIMESTAMP" property="beginDate" />
		<result column="END_DATE" jdbcType="TIMESTAMP" property="endDate" />
		<result column="PK_EMP_ORD" jdbcType="CHAR" property="pkEmpOrd" />
		<result column="NAME_EMP_ORD" jdbcType="VARCHAR" property="nameEmpOrd" />
		<result column="CODE_ORDTYPE" jdbcType="VARCHAR" property="codeOrdtype" />
		<result column="PK_UNIT_DOS" jdbcType="VARCHAR" property="pkUnitDos" />
		<result column="DOSAGE" jdbcType="VARCHAR" property="dosage" />
		<result column="DEL_FLAG" jdbcType="CHAR" property="delFlag" />
		<result column="FLAG_MEDOUT" jdbcType="CHAR" property="flagMedout" />
		<result column="FREQ_NAME_CHN" jdbcType="VARCHAR" property="freqNameChn" />
		<result column="FLAG_DRUG" jdbcType="CHAR" property="flagDrug" />
		<result column="ORDTYPE_NAME" jdbcType="VARCHAR" property="ordtypeName" />
	</resultMap>
	<select id="queryPatOrdList" resultMap="ResultMapOrd">
		select t.*
		from view_emr_ord_list t
		where t.pk_pv=#{pkPv,jdbcType=VARCHAR} and t.order_status!='9' 
		order by t.begin_date, t.ordsn_parent,t.ordsn 
	</select>
	<resultMap id="ResultMapRisResult"
		type="com.zebone.nhis.common.module.emr.rec.rec.EmrRisResult">
		<result column="PK_ORG" jdbcType="CHAR" property="pkOrg" />
		<result column="PK_PV" jdbcType="CHAR" property="pkPv" />
		<result column="PK_CNORD" jdbcType="CHAR" property="pkCnord" />
		<result column="CHECK_DATE" jdbcType="DATE" property="checkDate" />
		<result column="CHECK_NAME" jdbcType="VARCHAR" property="checkName" />
		<result column="REQ_NO" jdbcType="VARCHAR" property="reqNo" />
		<result column="CHECK_RESULT" jdbcType="VARCHAR" property="checkResult" />
		<result column="CHECK_DIAGS" jdbcType="VARCHAR" property="checkDiags" />
	</resultMap>
	<select id="queryPatRisResult" resultMap="ResultMapRisResult">
		select ris.*
		from view_emr_ris_result ris
		where pk_pv is not null 
		<if test="pkPi != null" >
		    and ris.pk_pi=#{pkPi,jdbcType=VARCHAR}
		</if>
		<if test="pkPv != null" >
		    and ris.pk_pv=#{pkPv,jdbcType=VARCHAR}
		</if>
		<if test="beginDateStr != null">
	  		and ris.check_date &gt;= to_date(#{beginDateStr,jdbcType=VARCHAR},'yyyy-mm-dd hh24:mi:ss')
		</if>
		<if test="endDateStr != null">
	  		and ris.check_date &lt;= to_date(#{endDateStr,jdbcType=VARCHAR},'yyyy-mm-dd hh24:mi:ss')
		</if>
	</select>
	<resultMap id="ResultMapLisResult"
		type="com.zebone.nhis.common.module.emr.rec.rec.EmrLisResult">
		<result column="PK_ORG" jdbcType="CHAR" property="pkOrg" />
		<result column="PK_PV" jdbcType="CHAR" property="pkPv" />
		<result column="PK_CNORD" jdbcType="CHAR" property="pkCnord" />
		<result column="TEST_DATE" jdbcType="DATE" property="testDate" />
		<result column="TEST_NAME" jdbcType="VARCHAR" property="testName" />
		<result column="REQ_NO" jdbcType="VARCHAR" property="reqNo" />
		<result column="ITEM_CODE" jdbcType="VARCHAR" property="itemCode" />
		<result column="ITEM_NAME" jdbcType="VARCHAR" property="itemName" />
		<result column="RESULT" jdbcType="VARCHAR" property="result" />
		<result column="UNIT" jdbcType="VARCHAR" property="unit" />
		<result column="UPPER_LIMIT" jdbcType="VARCHAR" property="upperLimit" />
		<result column="LOWER_LIMIT" jdbcType="VARCHAR" property="lowerLimit" />
		<result column="RANGE" jdbcType="VARCHAR" property="range" />
		<result column="MARK" jdbcType="VARCHAR" property="mark" />
		<result column="STATE" jdbcType="VARCHAR" property="state" />
	</resultMap>
	<select id="queryPatLisResult" resultMap="ResultMapLisResult">
		select lis.*
		from view_emr_lis_result lis
		where lis.pk_pv is not null 
		<if test="pkPi != null" >
		    and lis.pk_pi=#{pkPi,jdbcType=VARCHAR}
		</if>
		<if test="pkPv != null" >
		    and lis.pk_pv=#{pkPv,jdbcType=VARCHAR}
		</if>
		<if test="beginDateStr != null">
	  		and lis.test_date &gt;= to_date(#{beginDateStr,jdbcType=VARCHAR},'yyyy-mm-dd hh24:mi:ss')
		</if>
		<if test="endDateStr != null">
	  		and lis.test_date &lt;= to_date(#{endDateStr,jdbcType=VARCHAR},'yyyy-mm-dd hh24:mi:ss')
		</if>
	</select>

	<select id="queryPatLisResultSdtj" resultMap="ResultMapLisResult">
		select lis.*
		from LISDB.MED_DCL.dbo.VIEW_EMR_LIS_RESULT lis
		where lis.pk_pv is not null
		<if test="pkPi != null" >
			and lis.pk_pi=#{pkPi,jdbcType=VARCHAR}
		</if>
		<if test="pkPv != null" >
			and lis.pk_pv=#{pkPv,jdbcType=VARCHAR}
		</if>
		<if test="beginDateStr != null">
			and lis.test_date &gt;= to_date(#{beginDateStr,jdbcType=VARCHAR},'yyyy-mm-dd hh24:mi:ss')
		</if>
		<if test="endDateStr != null">
			and lis.test_date &lt;= to_date(#{endDateStr,jdbcType=VARCHAR},'yyyy-mm-dd hh24:mi:ss')
		</if>
	</select>

	<select id="queryMedRecListByType" resultMap="ResultMapEmrMedRecWithXml">
		select rec.PK_REC,
		rec.PK_PATREC,
		rec.NAME,
		rec.SEQ_NO,
		rec.REC_DATE,
		rec.DESCRIBE,
		rec.PK_PI,
		rec.TIMES,
		rec.PK_PV,
		rec.PK_DEPT,
		rec.PK_WARD,
		rec.PK_WG,
		rec.TYPE_CODE,
		rec.PK_TMP,
		rec.PK_DOC,
		rec.FLAG_AUDIT,
		rec.EU_AUDIT_LEVEL,
		rec.AUDIT_LEVEL_SET,
		rec.EU_DOC_STATUS,
		rec.EU_AUDIT_STATUS,
		rec.FLAG_AUDIT_FINISH,
		rec.SUBMIT_DATE,
		rec.PK_EMP_INTERN,
		rec.INTERN_SIGN_DATE,
		rec.PK_EMP_REFER_ACT,
		rec.PK_EMP_REFER,
		rec.REFER_AUDIT_DATE,
		rec.REFER_SIGN_DATE,
		rec.PK_EMP_CONSULT_ACT,
		rec.PK_EMP_CONSULT,
		rec.CONSULT_AUDIT_DATE,
		rec.CONSULT_SIGN_DATE,
		rec.PK_EMP_DIRECTOR_ACT,
		rec.PK_EMP_DIRECTOR,
		rec.DIRECTOR_AUDIT_DATE,
		rec.DIRECTOR_SIGN_DATE,
		rec.FLAG_PRINT,
		rec.DEL_FLAG,
		rec.REMARK,
		rec.CREATOR,
		rec.CREATE_TIME,
		doc.doc_data,
		doc.doc_xml
		from emr_med_rec rec
		inner join emr_med_doc doc
		on rec.pk_doc = doc.pk_doc
		where rec.pk_pv = #{pkPv,jdbcType=CHAR} and rec.del_flag!='1'
		and rec.type_code=#{typeCode,jdbcType=VARCHAR}
		order by rec.rec_date,rec.seq_no,rec.pk_rec
	</select>

	<resultMap id="ResultMapHomePage"
		type="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePage">
		<id column="PK_PAGE" jdbcType="CHAR" property="pkPage" />
		<result column="PK_ORG" jdbcType="VARCHAR" property="pkOrg" />
		<result column="PK_PI" jdbcType="VARCHAR" property="pkPi" />
		<result column="TIMES" jdbcType="DECIMAL" property="times" />
		<result column="PK_PV" jdbcType="VARCHAR" property="pkPv" />
		<result column="MED_ORG_CODE" jdbcType="VARCHAR" property="medOrgCode" />
		<result column="MED_ORG_NAME" jdbcType="VARCHAR" property="medOrgName" />
		<result column="HEALTH_CARD_NO" jdbcType="VARCHAR" property="healthCardNo" />
		<result column="MED_PAY_MODE" jdbcType="VARCHAR" property="medPayMode" />
		<result column="PAT_NO" jdbcType="VARCHAR" property="patNo" />
		<result column="NAME" jdbcType="VARCHAR" property="name" />
		<result column="DT_SEX" jdbcType="CHAR" property="dtSex" />
		<result column="BIRTH_DATE" jdbcType="TIMESTAMP" property="birthDate" />
		<result column="AGE_YEAR" jdbcType="DECIMAL" property="ageYear" />
		<result column="AGE_MONTH" jdbcType="VARCHAR" property="ageMonth" />
		<result column="AGE_TXT" jdbcType="VARCHAR" property="ageTxt" />
		<result column="NEWBORN_WEIGHT" jdbcType="DECIMAL" property="newbornWeight" />
		<result column="NEWBORN_IN_WEIGHT" jdbcType="DECIMAL" property="newbornInWeight" />
		<result column="BIRTH_ADDR_PROV" jdbcType="VARCHAR" property="birthAddrProv" />
		<result column="BIRTH_ADDR_CITY" jdbcType="VARCHAR" property="birthAddrCity" />
		<result column="BIRTH_ADDR_COUNTY" jdbcType="VARCHAR" property="birthAddrCounty" />
		<result column="BIRTH_ADDR" jdbcType="VARCHAR" property="birthAddr" />
		<result column="BIRTH_ADDR_CODE" jdbcType="VARCHAR" property="birthAddrCode" />
		<result column="ORIGIN_ADDR_PROV" jdbcType="VARCHAR" property="originAddrProv" />
		<result column="ORIGIN_ADDR_CITY" jdbcType="VARCHAR" property="originAddrCity" />
		<result column="ORIGIN_ADDR" jdbcType="VARCHAR" property="originAddr" />
		<result column="ORIGIN_ADDR_CODE" jdbcType="VARCHAR" property="originAddrCode" />
		<result column="COUNTRY_CODE" jdbcType="VARCHAR" property="countryCode" />
		<result column="COUNTRY_NAME" jdbcType="VARCHAR" property="countryName" />
		<result column="NATION_CODE" jdbcType="VARCHAR" property="nationCode" />
		<result column="NATION_NAME" jdbcType="VARCHAR" property="nationName" />
		<result column="ID_TYPE" jdbcType="VARCHAR" property="idType" />
		<result column="ID_NO" jdbcType="VARCHAR" property="idNo" />
		<result column="OCCUP_CODE" jdbcType="VARCHAR" property="occupCode" />
		<result column="OCCUP_NAME" jdbcType="VARCHAR" property="occupName" />
		<result column="MARRY_CODE" jdbcType="VARCHAR" property="marryCode" />
		<result column="MARRY_NAME" jdbcType="VARCHAR" property="marryName" />
		<result column="CURR_ADDR_PROV" jdbcType="VARCHAR" property="currAddrProv" />
		<result column="CURR_ADDR_CITY" jdbcType="VARCHAR" property="currAddrCity" />
		<result column="CURR_ADDR_COUNTY" jdbcType="VARCHAR" property="currAddrCounty" />
		<result column="CURR_PHONE" jdbcType="VARCHAR" property="currPhone" />
		<result column="CURR_ZIP_CODE" jdbcType="VARCHAR" property="currZipCode" />
		<result column="CURR_ADDR" jdbcType="VARCHAR" property="currAddr" />
		<result column="CURR_ADDR_CODE" jdbcType="VARCHAR" property="currAddrCode" />
		<result column="WORK_UNIT" jdbcType="VARCHAR" property="workUnit" />
		<result column="WORK_UNIT_PHONE" jdbcType="VARCHAR" property="workUnitPhone" />
		<result column="RESIDE_ADDR_PROV" jdbcType="VARCHAR" property="resideAddrProv" />
		<result column="RESIDE_ADDR_CITY" jdbcType="VARCHAR" property="resideAddrCity" />
		<result column="RESIDE_ADDR_COUNTY" jdbcType="VARCHAR"
			property="resideAddrCounty" />
		<result column="RESIDE_ZIP_CODE" jdbcType="VARCHAR" property="resideZipCode" />
		<result column="RESIDE_ADDR" jdbcType="VARCHAR" property="resideAddr" />
		<result column="RESIDE_ADDR_CODE" jdbcType="VARCHAR" property="resideAddrCode" />
		<result column="WORK_UNIT_ZIP_CODE" jdbcType="VARCHAR"
			property="workUnitZipCode" />
		<result column="CONTACT_NAME" jdbcType="VARCHAR" property="contactName" />
		<result column="CONTACT_RELAT_CODE" jdbcType="VARCHAR"
			property="contactRelatCode" />
		<result column="CONTACT_RELAT_NAME" jdbcType="VARCHAR"
			property="contactRelatName" />
		<result column="CONTACT_ADDR" jdbcType="VARCHAR" property="contactAddr" />
		<result column="CONTACT_PHONE" jdbcType="VARCHAR" property="contactPhone" />
		<result column="ADMIT_PATH_CODE" jdbcType="VARCHAR" property="admitPathCode" />
		<result column="ADMIT_PATH_NAME" jdbcType="VARCHAR" property="admitPathName" />
		<result column="ADMIT_TIME" jdbcType="TIMESTAMP" property="admitTime" />
		<result column="PK_ADMIT_DEPT" jdbcType="VARCHAR" property="pkAdmitDept" />
		<result column="ADMIT_DEPT_NAME" jdbcType="VARCHAR" property="admitDeptName" />
		<result column="ADMIT_WARD_NAME" jdbcType="VARCHAR" property="admitWardName" />
		<result column="TRANS_DEPT_NAMES" jdbcType="VARCHAR" property="transDeptNames" />
		<result column="DIS_TIME" jdbcType="TIMESTAMP" property="disTime" />
		<result column="PK_DEPT_DIS" jdbcType="VARCHAR" property="pkDeptDis" />
		<result column="DIS_DEPT_NAME" jdbcType="VARCHAR" property="disDeptName" />
		<result column="PK_WARD_DIS" jdbcType="VARCHAR" property="pkWardDis" />
		<result column="DIS_WARD_NAME" jdbcType="VARCHAR" property="disWardName" />
		<result column="PK_DIAG_CLINIC" jdbcType="VARCHAR" property="pkDiagClinic" />
		<result column="IN_HOS_DAYS" jdbcType="DECIMAL" property="inHosDays" />
		<result column="DIAG_CODE_CLINIC" jdbcType="VARCHAR" property="diagCodeClinic" />
		<result column="PK_DIAG_DIS" jdbcType="VARCHAR" property="pkDiagDis" />
		<result column="DIAG_NAME_CLINIC" jdbcType="VARCHAR" property="diagNameClinic" />
		<result column="DIAG_CODE_DIS" jdbcType="VARCHAR" property="diagCodeDis" />
		<result column="PK_EMP_CLINIC" jdbcType="VARCHAR" property="pkEmpClinic" />
		<result column="CLINIC_NAME" jdbcType="VARCHAR" property="clinicName" />
		<result column="MED_REC_TYPE" jdbcType="CHAR" property="medRecType" />
		<result column="FLAG_CP" jdbcType="CHAR" property="flagCp" />
		<result column="NUM_RES" jdbcType="INTEGER" property="numRes" />
		<result column="NUM_SUCC" jdbcType="INTEGER" property="numSucc" />
		<result column="PK_DIAG_EXTC_IP" jdbcType="VARCHAR" property="pkDiagExtcIp" />
		<result column="DIAG_NAME_DIS" jdbcType="VARCHAR" property="diagNameDis" />
		<result column="ADMIT_COND_CODE" jdbcType="VARCHAR" property="admitCondCode" />
		<result column="ADMIT_COND_NAME" jdbcType="VARCHAR" property="admitCondName" />
		<result column="DIAG_CODE_EXTC_IP" jdbcType="VARCHAR" property="diagCodeExtcIp" />
		<result column="PK_DIAG_PATHO" jdbcType="VARCHAR" property="pkDiagPatho" />
		<result column="DIAG_NAME_EXTC_IP" jdbcType="VARCHAR" property="diagNameExtcIp" />
		<result column="DIAG_CODE_PATHO" jdbcType="VARCHAR" property="diagCodePatho" />
		<result column="DIAG_NAME_PATHO" jdbcType="VARCHAR" property="diagNamePatho" />
		<result column="PATHO_NO" jdbcType="VARCHAR" property="pathoNo" />
		<result column="FLAG_DRUG_ALLERGY" jdbcType="CHAR" property="flagDrugAllergy" />
		<result column="ALLERGIC_DRUG" jdbcType="VARCHAR" property="allergicDrug" />
		<result column="FLAG_AUTOPSY" jdbcType="CHAR" property="flagAutopsy" />
		<result column="BLOOD_CODE_ABO" jdbcType="VARCHAR" property="bloodCodeAbo" />
		<result column="BLOOD_NAME_ABO" jdbcType="VARCHAR" property="bloodNameAbo" />
		<result column="BLOOD_CODE_RH" jdbcType="VARCHAR" property="bloodCodeRh" />
		<result column="BLOOD_NAME_RH" jdbcType="VARCHAR" property="bloodNameRh" />
		<result column="PK_EMP_DIRECTOR" jdbcType="VARCHAR" property="pkEmpDirector" />
		<result column="DIRECTOR_NAME" jdbcType="VARCHAR" property="directorName" />
		<result column="PK_EMP_CONSULT" jdbcType="VARCHAR" property="pkEmpConsult" />
		<result column="CONSULT_NAME" jdbcType="VARCHAR" property="consultName" />
		<result column="PK_EMP_CHIEF" jdbcType="VARCHAR" property="pkEmpChief" />
		<result column="CHIEF_NAME" jdbcType="VARCHAR" property="chiefName" />
		<result column="PK_EMP_REFER" jdbcType="VARCHAR" property="pkEmpRefer" />
		<result column="REFER_NAME" jdbcType="VARCHAR" property="referName" />
		<result column="PK_EMP_NURSE" jdbcType="VARCHAR" property="pkEmpNurse" />
		<result column="NURSE_NAME" jdbcType="VARCHAR" property="nurseName" />
		<result column="PK_EMP_LEARN" jdbcType="VARCHAR" property="pkEmpLearn" />
		<result column="LEARN_NAME" jdbcType="VARCHAR" property="learnName" />
		<result column="PK_EMP_INTERN" jdbcType="VARCHAR" property="pkEmpIntern" />
		<result column="INTERN_NAME" jdbcType="VARCHAR" property="internName" />
		<result column="PK_EMP_CODER" jdbcType="VARCHAR" property="pkEmpCoder" />
		<result column="CODER_NAME" jdbcType="VARCHAR" property="coderName" />
		<result column="QUALITY_CODE" jdbcType="CHAR" property="qualityCode" />
		<result column="QUALITY_NAME" jdbcType="VARCHAR" property="qualityName" />
		<result column="PK_EMP_QC_DOC" jdbcType="VARCHAR" property="pkEmpQcDoc" />
		<result column="QC_DOC_NAME" jdbcType="VARCHAR" property="qcDocName" />
		<result column="PK_EMP_QC_NURSE" jdbcType="VARCHAR" property="pkEmpQcNurse" />
		<result column="QC_NURSE_NAME" jdbcType="VARCHAR" property="qcNurseName" />
		<result column="QC_DATE" jdbcType="TIMESTAMP" property="qcDate" />
		<result column="LEAVE_HOS_CODE" jdbcType="VARCHAR" property="leaveHosCode" />
		<result column="LEAVE_HOS_NAME" jdbcType="VARCHAR" property="leaveHosName" />
		<result column="RECEIVE_ORG_CODE" jdbcType="VARCHAR" property="receiveOrgCode" />
		<result column="RECEIVE_ORG_NAME" jdbcType="VARCHAR" property="receiveOrgName" />
		<result column="FLAG_READMIT" jdbcType="CHAR" property="flagReadmit" />
		<result column="READMIT_PURP" jdbcType="VARCHAR" property="readmitPurp" />
		<result column="COMA_DAY_BEF" jdbcType="DECIMAL" property="comaDayBef" />
		<result column="COMA_HOUR_BEF" jdbcType="DECIMAL" property="comaHourBef" />
		<result column="COMA_MIN_BEF" jdbcType="DECIMAL" property="comaMinBef" />
		<result column="COMA_DAY_AFTER" jdbcType="DECIMAL" property="comaDayAfter" />
		<result column="COMA_HOUR_AFTER" jdbcType="DECIMAL" property="comaHourAfter" />
		<result column="COMA_MIN_AFTER" jdbcType="DECIMAL" property="comaMinAfter" />
		<result column="TOTAL_COST" jdbcType="DECIMAL" property="totalCost" />
		<result column="SELF_COST" jdbcType="DECIMAL" property="selfCost" />
		<result column="DEL_FLAG" jdbcType="CHAR" property="delFlag" />
		<result column="REMARK" jdbcType="VARCHAR" property="remark" />
		<result column="CREATOR" jdbcType="VARCHAR" property="creator" />
		<result column="CREATE_TIME" jdbcType="TIMESTAMP" property="createTime" />
		<result column="TS" jdbcType="TIMESTAMP" property="ts" />
		<result column="PK_ADMIT_WARD" jdbcType="VARCHAR" property="pkAdmitWard" />
		<result column="CODE_PI" jdbcType="VARCHAR" property="codePi" />
		<result column="CODE_PV" jdbcType="VARCHAR" property="codePv" />
	</resultMap>
	<select id="getEmrHomePageById" resultMap="ResultMapHomePage">
		SELECT
		*
		FROM
		EMR_HOME_PAGE
		WHERE
		PK_PAGE = #{pkPage,jdbcType=CHAR}
	</select>
	<select id="queryHomePageByPv" resultMap="ResultMapHomePage">
		SELECT
		*
		FROM
		EMR_HOME_PAGE
		WHERE
		PK_PV = #{pkPv,jdbcType=VARCHAR}
		AND DEL_FLAG!='1'
	</select>

	<delete id="deleteEmrHomePage">
		DELETE
		FROM
		EMR_HOME_PAGE
		WHERE
		PK_PAGE = #{pkPage,jdbcType=CHAR}
	</delete>

	<insert id="saveEmrHomePage"
		parameterType="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePage">
		INSERT INTO EMR_HOME_PAGE
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="pkPage != null">
				PK_PAGE,
			</if>
			<if test="pkOrg != null">
				PK_ORG,
			</if>
			<if test="pkPi != null">
				PK_PI,
			</if>
			<if test="times != null">
				TIMES,
			</if>
			<if test="pkPv != null">
				PK_PV,
			</if>
			<if test="medOrgCode != null">
				MED_ORG_CODE,
			</if>
			<if test="medOrgName != null">
				MED_ORG_NAME,
			</if>
			<if test="healthCardNo != null">
				HEALTH_CARD_NO,
			</if>
			<if test="medPayMode != null">
				MED_PAY_MODE,
			</if>
			<if test="patNo != null">
				PAT_NO,
			</if>
			<if test="name != null">
				NAME,
			</if>
			<if test="dtSex != null">
				DT_SEX,
			</if>
			<if test="birthDate != null">
				BIRTH_DATE,
			</if>
			<if test="ageYear != null">
				AGE_YEAR,
			</if>
			<if test="ageMonth != null">
				AGE_MONTH,
			</if>
			<if test="ageTxt != null">
				AGE_TXT,
			</if>
			<if test="newbornWeight != null">
				NEWBORN_WEIGHT,
			</if>
			<if test="newbornInWeight != null">
				NEWBORN_IN_WEIGHT,
			</if>
			<if test="birthAddrProv != null">
				BIRTH_ADDR_PROV,
			</if>
			<if test="birthAddrCity != null">
				BIRTH_ADDR_CITY,
			</if>
			<if test="birthAddrCounty != null">
				BIRTH_ADDR_COUNTY,
			</if>
			<if test="birthAddr != null">
				BIRTH_ADDR,
			</if>
			<if test="birthAddrCode != null">
				BIRTH_ADDR_CODE,
			</if>
			<if test="originAddrProv != null">
				ORIGIN_ADDR_PROV,
			</if>
			<if test="originAddrCity != null">
				ORIGIN_ADDR_CITY,
			</if>
			<if test="originAddr != null">
				ORIGIN_ADDR,
			</if>
			<if test="originAddrCode != null">
				ORIGIN_ADDR_CODE,
			</if>
			<if test="countryCode != null">
				COUNTRY_CODE,
			</if>
			<if test="countryName != null">
				COUNTRY_NAME,
			</if>
			<if test="nationCode != null">
				NATION_CODE,
			</if>
			<if test="nationName != null">
				NATION_NAME,
			</if>
			<if test="idType != null">
				ID_TYPE,
			</if>
			<if test="idNo != null">
				ID_NO,
			</if>
			<if test="occupCode != null">
				OCCUP_CODE,
			</if>
			<if test="occupName != null">
				OCCUP_NAME,
			</if>
			<if test="marryCode != null">
				MARRY_CODE,
			</if>
			<if test="marryName != null">
				MARRY_NAME,
			</if>
			<if test="currAddrProv != null">
				CURR_ADDR_PROV,
			</if>
			<if test="currAddrCity != null">
				CURR_ADDR_CITY,
			</if>
			<if test="currAddrCounty != null">
				CURR_ADDR_COUNTY,
			</if>
			<if test="currPhone != null">
				CURR_PHONE,
			</if>
			<if test="currZipCode != null">
				CURR_ZIP_CODE,
			</if>
			<if test="currAddr != null">
				CURR_ADDR,
			</if>
			<if test="currAddrCode != null">
				CURR_ADDR_CODE,
			</if>
			<if test="currAddrDt != null">
				CURR_ADDR_DT,
			</if>
			<if test="workUnit != null">
				WORK_UNIT,
			</if>
			<if test="workUnitPhone != null">
				WORK_UNIT_PHONE,
			</if>
			<if test="resideAddrProv != null">
				RESIDE_ADDR_PROV,
			</if>
			<if test="resideAddrCity != null">
				RESIDE_ADDR_CITY,
			</if>
			<if test="resideAddrCounty != null">
				RESIDE_ADDR_COUNTY,
			</if>
			<if test="resideZipCode != null">
				RESIDE_ZIP_CODE,
			</if>
			<if test="resideAddr != null">
				RESIDE_ADDR,
			</if>
			<if test="resideAddrCode != null">
				RESIDE_ADDR_CODE,
			</if>
			<if test="resideAddrDt != null">
				RESIDE_ADDR_DT,
			</if>
			<if test="workUnitZipCode != null">
				WORK_UNIT_ZIP_CODE,
			</if>
			<if test="contactName != null">
				CONTACT_NAME,
			</if>
			<if test="contactRelatCode != null">
				CONTACT_RELAT_CODE,
			</if>
			<if test="contactRelatName != null">
				CONTACT_RELAT_NAME,
			</if>
			<if test="contactAddr != null">
				CONTACT_ADDR,
			</if>
			<if test="contactPhone != null">
				CONTACT_PHONE,
			</if>
			<if test="admitPathCode != null">
				ADMIT_PATH_CODE,
			</if>
			<if test="admitPathName != null">
				ADMIT_PATH_NAME,
			</if>
			<if test="admitTime != null">
				ADMIT_TIME,
			</if>
			<if test="pkAdmitDept != null">
				PK_ADMIT_DEPT,
			</if>
			<if test="admitDeptName != null">
				ADMIT_DEPT_NAME,
			</if>
			<if test="admitWardName != null">
				ADMIT_WARD_NAME,
			</if>
			<if test="transDeptNames != null">
				TRANS_DEPT_NAMES,
			</if>
			<if test="disTime != null">
				DIS_TIME,
			</if>
			<if test="pkDeptDis != null">
				PK_DEPT_DIS,
			</if>
			<if test="disDeptName != null">
				DIS_DEPT_NAME,
			</if>
			<if test="pkWardDis != null">
				PK_WARD_DIS,
			</if>
			<if test="disWardName != null">
				DIS_WARD_NAME,
			</if>
			<if test="pkDiagClinic != null">
				PK_DIAG_CLINIC,
			</if>
			<if test="inHosDays != null">
				IN_HOS_DAYS,
			</if>
			<if test="diagCodeClinic != null">
				DIAG_CODE_CLINIC,
			</if>
			<if test="pkDiagDis != null">
				PK_DIAG_DIS,
			</if>
			<if test="diagNameClinic != null">
				DIAG_NAME_CLINIC,
			</if>
			<if test="diagCodeDis != null">
				DIAG_CODE_DIS,
			</if>
			<if test="pkEmpClinic != null">
				PK_EMP_CLINIC,
			</if>
			<if test="clinicName != null">
				CLINIC_NAME,
			</if>
			<if test="pkDiagExtcIp != null">
				PK_DIAG_EXTC_IP,
			</if>
			<if test="diagNameDis != null">
				DIAG_NAME_DIS,
			</if>
			<if test="admitCondCode != null">
				ADMIT_COND_CODE,
			</if>
			<if test="admitCondName != null">
				ADMIT_COND_NAME,
			</if>
			<if test="medRecType != null">
				MED_REC_TYPE,
			</if>
			<if test="flagCp != null">
				FLAG_CP,
			</if>
			<if test="numRes != null">
				NUM_RES,
			</if>
			<if test="numSucc != null">
				NUM_SUCC,
			</if>
			<if test="diagCodeExtcIp != null">
				DIAG_CODE_EXTC_IP,
			</if>
			<if test="pkDiagPatho != null">
				PK_DIAG_PATHO,
			</if>
			<if test="diagNameExtcIp != null">
				DIAG_NAME_EXTC_IP,
			</if>
			<if test="diagCodePatho != null">
				DIAG_CODE_PATHO,
			</if>
			<if test="diagNamePatho != null">
				DIAG_NAME_PATHO,
			</if>
			<if test="pathoNo != null">
				PATHO_NO,
			</if>
			<if test="flagDrugAllergy != null">
				FLAG_DRUG_ALLERGY,
			</if>
			<if test="allergicDrug != null">
				ALLERGIC_DRUG,
			</if>
			<if test="flagAutopsy != null">
				FLAG_AUTOPSY,
			</if>
			<if test="bloodCodeAbo != null">
				BLOOD_CODE_ABO,
			</if>
			<if test="bloodNameAbo != null">
				BLOOD_NAME_ABO,
			</if>
			<if test="bloodCodeRh != null">
				BLOOD_CODE_RH,
			</if>
			<if test="bloodNameRh != null">
				BLOOD_NAME_RH,
			</if>
			<if test="pkEmpDirector != null">
				PK_EMP_DIRECTOR,
			</if>
			<if test="directorName != null">
				DIRECTOR_NAME,
			</if>
			<if test="pkEmpConsult != null">
				PK_EMP_CONSULT,
			</if>
			<if test="consultName != null">
				CONSULT_NAME,
			</if>
			<if test="pkEmpChief != null">
				PK_EMP_CHIEF,
			</if>
			<if test="chiefName != null">
				CHIEF_NAME,
			</if>
			<if test="pkEmpRefer != null">
				PK_EMP_REFER,
			</if>
			<if test="referName != null">
				REFER_NAME,
			</if>
			<if test="pkEmpNurse != null">
				PK_EMP_NURSE,
			</if>
			<if test="nurseName != null">
				NURSE_NAME,
			</if>
			<if test="pkEmpLearn != null">
				PK_EMP_LEARN,
			</if>
			<if test="learnName != null">
				LEARN_NAME,
			</if>
			<if test="pkEmpIntern != null">
				PK_EMP_INTERN,
			</if>
			<if test="internName != null">
				INTERN_NAME,
			</if>
			<if test="pkEmpCoder != null">
				PK_EMP_CODER,
			</if>
			<if test="coderName != null">
				CODER_NAME,
			</if>
			<if test="qualityCode != null">
				QUALITY_CODE,
			</if>
			<if test="qualityName != null">
				QUALITY_NAME,
			</if>
			<if test="pkEmpQcDoc != null">
				PK_EMP_QC_DOC,
			</if>
			<if test="qcDocName != null">
				QC_DOC_NAME,
			</if>
			<if test="pkEmpQcNurse != null">
				PK_EMP_QC_NURSE,
			</if>
			<if test="qcNurseName != null">
				QC_NURSE_NAME,
			</if>
			<if test="qcDate != null">
				QC_DATE,
			</if>
			<if test="leaveHosCode != null">
				LEAVE_HOS_CODE,
			</if>
			<if test="leaveHosName != null">
				LEAVE_HOS_NAME,
			</if>
			<if test="receiveOrgCode != null">
				RECEIVE_ORG_CODE,
			</if>
			<if test="receiveOrgName != null">
				RECEIVE_ORG_NAME,
			</if>
			<if test="flagReadmit != null">
				FLAG_READMIT,
			</if>
			<if test="readmitPurp != null">
				READMIT_PURP,
			</if>
			<if test="comaDayBef != null">
				COMA_DAY_BEF,
			</if>
			<if test="comaHourBef != null">
				COMA_HOUR_BEF,
			</if>
			<if test="comaMinBef != null">
				COMA_MIN_BEF,
			</if>
			<if test="comaDayAfter != null">
				COMA_DAY_AFTER,
			</if>
			<if test="comaHourAfter != null">
				COMA_HOUR_AFTER,
			</if>
			<if test="comaMinAfter != null">
				COMA_MIN_AFTER,
			</if>
			<if test="totalCost != null">
				TOTAL_COST,
			</if>
			<if test="selfCost != null">
				SELF_COST,
			</if>
			<if test="delFlag != null">
				DEL_FLAG,
			</if>
			<if test="remark != null">
				REMARK,
			</if>
			<if test="creator != null">
				CREATOR,
			</if>
			<if test="createTime != null">
				CREATE_TIME,
			</if>
			<if test="ts != null">
				TS,
			</if>
			<if test="pkAdmitWard != null">
				PK_ADMIT_WARD,
			</if>
			<if test="codePv != null">
				code_pv,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="pkPage != null">
				#{pkPage,jdbcType=CHAR},
			</if>
			<if test="pkOrg != null">
				#{pkOrg,jdbcType=VARCHAR},
			</if>
			<if test="pkPi != null">
				#{pkPi,jdbcType=VARCHAR},
			</if>
			<if test="times != null">
				#{times,jdbcType=DECIMAL},
			</if>
			<if test="pkPv != null">
				#{pkPv,jdbcType=VARCHAR},
			</if>
			<if test="medOrgCode != null">
				#{medOrgCode,jdbcType=VARCHAR},
			</if>
			<if test="medOrgName != null">
				#{medOrgName,jdbcType=VARCHAR},
			</if>
			<if test="healthCardNo != null">
				#{healthCardNo,jdbcType=VARCHAR},
			</if>
			<if test="medPayMode != null">
				#{medPayMode,jdbcType=VARCHAR},
			</if>
			<if test="patNo != null">
				#{patNo,jdbcType=VARCHAR},
			</if>
			<if test="name != null">
				#{name,jdbcType=VARCHAR},
			</if>
			<if test="dtSex != null">
				#{dtSex,jdbcType=CHAR},
			</if>
			<if test="birthDate != null">
				#{birthDate,jdbcType=DATE},
			</if>
			<if test="ageYear != null">
				#{ageYear,jdbcType=DECIMAL},
			</if>
			<if test="ageMonth != null">
				#{ageMonth,jdbcType=VARCHAR},
			</if>
			<if test="ageTxt != null">
				#{ageTxt,jdbcType=VARCHAR},
			</if>
			<if test="newbornWeight != null">
				#{newbornWeight,jdbcType=DECIMAL},
			</if>
			<if test="newbornInWeight != null">
				#{newbornInWeight,jdbcType=DECIMAL},
			</if>
			<if test="birthAddrProv != null">
				#{birthAddrProv,jdbcType=VARCHAR},
			</if>
			<if test="birthAddrCity != null">
				#{birthAddrCity,jdbcType=VARCHAR},
			</if>
			<if test="birthAddrCounty != null">
				#{birthAddrCounty,jdbcType=VARCHAR},
			</if>
			<if test="birthAddr != null">
				#{birthAddr,jdbcType=VARCHAR},
			</if>
			<if test="birthAddrCode != null">
				#{birthAddrCode,jdbcType=VARCHAR},
			</if>
			<if test="originAddrProv != null">
				#{originAddrProv,jdbcType=VARCHAR},
			</if>
			<if test="originAddrCity != null">
				#{originAddrCity,jdbcType=VARCHAR},
			</if>
			<if test="originAddr != null">
				#{originAddr,jdbcType=VARCHAR},
			</if>
			<if test="originAddrCode != null">
				#{originAddrCode,jdbcType=VARCHAR},
			</if>
			<if test="countryCode != null">
				#{countryCode,jdbcType=VARCHAR},
			</if>
			<if test="countryName != null">
				#{countryName,jdbcType=VARCHAR},
			</if>
			<if test="nationCode != null">
				#{nationCode,jdbcType=VARCHAR},
			</if>
			<if test="nationName != null">
				#{nationName,jdbcType=VARCHAR},
			</if>
			<if test="idType != null">
				#{idType,jdbcType=VARCHAR},
			</if>
			<if test="idNo != null">
				#{idNo,jdbcType=VARCHAR},
			</if>
			<if test="occupCode != null">
				#{occupCode,jdbcType=VARCHAR},
			</if>
			<if test="occupName != null">
				#{occupName,jdbcType=VARCHAR},
			</if>
			<if test="marryCode != null">
				#{marryCode,jdbcType=VARCHAR},
			</if>
			<if test="marryName != null">
				#{marryName,jdbcType=VARCHAR},
			</if>
			<if test="currAddrProv != null">
				#{currAddrProv,jdbcType=VARCHAR},
			</if>
			<if test="currAddrCity != null">
				#{currAddrCity,jdbcType=VARCHAR},
			</if>
			<if test="currAddrCounty != null">
				#{currAddrCounty,jdbcType=VARCHAR},
			</if>
			<if test="currPhone != null">
				#{currPhone,jdbcType=VARCHAR},
			</if>
			<if test="currZipCode != null">
				#{currZipCode,jdbcType=VARCHAR},
			</if>
			<if test="currAddr != null">
				#{currAddr,jdbcType=VARCHAR},
			</if>
			<if test="currAddrCode != null">
				#{currAddrCode,jdbcType=VARCHAR},
			</if>
			<if test="currAddrDt != null">
				#{currAddrDt,jdbcType=VARCHAR},
			</if>
			<if test="workUnit != null">
				#{workUnit,jdbcType=VARCHAR},
			</if>
			<if test="workUnitPhone != null">
				#{workUnitPhone,jdbcType=VARCHAR},
			</if>
			<if test="resideAddrProv != null">
				#{resideAddrProv,jdbcType=VARCHAR},
			</if>
			<if test="resideAddrCity != null">
				#{resideAddrCity,jdbcType=VARCHAR},
			</if>
			<if test="resideAddrCounty != null">
				#{resideAddrCounty,jdbcType=VARCHAR},
			</if>
			<if test="resideZipCode != null">
				#{resideZipCode,jdbcType=VARCHAR},
			</if>
			<if test="resideAddr != null">
				#{resideAddr,jdbcType=VARCHAR},
			</if>
			<if test="resideAddrCode != null">
				#{resideAddrCode,jdbcType=VARCHAR},
			</if>
			<if test="resideAddrDt != null">
				#{resideAddrDt,jdbcType=VARCHAR},
			</if>
			<if test="workUnitZipCode != null">
				#{workUnitZipCode,jdbcType=VARCHAR},
			</if>
			<if test="contactName != null">
				#{contactName,jdbcType=VARCHAR},
			</if>
			<if test="contactRelatCode != null">
				#{contactRelatCode,jdbcType=VARCHAR},
			</if>
			<if test="contactRelatName != null">
				#{contactRelatName,jdbcType=VARCHAR},
			</if>
			<if test="contactAddr != null">
				#{contactAddr,jdbcType=VARCHAR},
			</if>
			<if test="contactPhone != null">
				#{contactPhone,jdbcType=VARCHAR},
			</if>
			<if test="admitPathCode != null">
				#{admitPathCode,jdbcType=VARCHAR},
			</if>
			<if test="admitPathName != null">
				#{admitPathName,jdbcType=VARCHAR},
			</if>
			<if test="admitTime != null">
				#{admitTime,jdbcType=DATE},
			</if>
			<if test="pkAdmitDept != null">
				#{pkAdmitDept,jdbcType=VARCHAR},
			</if>
			<if test="admitDeptName != null">
				#{admitDeptName,jdbcType=VARCHAR},
			</if>
			<if test="admitWardName != null">
				#{admitWardName,jdbcType=VARCHAR},
			</if>
			<if test="transDeptNames != null">
				#{transDeptNames,jdbcType=VARCHAR},
			</if>
			<if test="disTime != null">
				#{disTime,jdbcType=DATE},
			</if>
			<if test="pkDeptDis != null">
				#{pkDeptDis,jdbcType=VARCHAR},
			</if>
			<if test="disDeptName != null">
				#{disDeptName,jdbcType=VARCHAR},
			</if>
			<if test="pkWardDis != null">
				#{pkWardDis,jdbcType=VARCHAR},
			</if>
			<if test="disWardName != null">
				#{disWardName,jdbcType=VARCHAR},
			</if>
			<if test="pkDiagClinic != null">
				#{pkDiagClinic,jdbcType=VARCHAR},
			</if>
			<if test="inHosDays != null">
				#{inHosDays,jdbcType=DECIMAL},
			</if>
			<if test="diagCodeClinic != null">
				#{diagCodeClinic,jdbcType=VARCHAR},
			</if>
			<if test="pkDiagDis != null">
				#{pkDiagDis,jdbcType=VARCHAR},
			</if>
			<if test="diagNameClinic != null">
				#{diagNameClinic,jdbcType=VARCHAR},
			</if>
			<if test="diagCodeDis != null">
				#{diagCodeDis,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpClinic != null">
				#{pkEmpClinic,jdbcType=VARCHAR},
			</if>
			<if test="clinicName != null">
				#{clinicName,jdbcType=VARCHAR},
			</if>
			<if test="pkDiagExtcIp != null">
				#{pkDiagExtcIp,jdbcType=VARCHAR},
			</if>
			<if test="diagNameDis != null">
				#{diagNameDis,jdbcType=VARCHAR},
			</if>
			<if test="admitCondCode != null">
				#{admitCondCode,jdbcType=VARCHAR},
			</if>
			<if test="admitCondName != null">
				#{admitCondName,jdbcType=VARCHAR},
			</if>
			<if test="medRecType != null">
				#{medRecType,jdbcType=CHAR},
			</if>
			<if test="flagCp != null">
				#{flagCp,jdbcType=CHAR},
			</if>
			<if test="numRes != null">
				#{numRes,jdbcType=INTEGER},
			</if>
			<if test="numSucc != null">
				#{numSucc,jdbcType=INTEGER},
			</if>
			<if test="diagCodeExtcIp != null">
				#{diagCodeExtcIp,jdbcType=VARCHAR},
			</if>
			<if test="pkDiagPatho != null">
				#{pkDiagPatho,jdbcType=VARCHAR},
			</if>
			<if test="diagNameExtcIp != null">
				#{diagNameExtcIp,jdbcType=VARCHAR},
			</if>
			<if test="diagCodePatho != null">
				#{diagCodePatho,jdbcType=VARCHAR},
			</if>
			<if test="diagNamePatho != null">
				#{diagNamePatho,jdbcType=VARCHAR},
			</if>
			<if test="pathoNo != null">
				#{pathoNo,jdbcType=VARCHAR},
			</if>
			<if test="flagDrugAllergy != null">
				#{flagDrugAllergy,jdbcType=CHAR},
			</if>
			<if test="allergicDrug != null">
				#{allergicDrug,jdbcType=VARCHAR},
			</if>
			<if test="flagAutopsy != null">
				#{flagAutopsy,jdbcType=CHAR},
			</if>
			<if test="bloodCodeAbo != null">
				#{bloodCodeAbo,jdbcType=VARCHAR},
			</if>
			<if test="bloodNameAbo != null">
				#{bloodNameAbo,jdbcType=VARCHAR},
			</if>
			<if test="bloodCodeRh != null">
				#{bloodCodeRh,jdbcType=VARCHAR},
			</if>
			<if test="bloodNameRh != null">
				#{bloodNameRh,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpDirector != null">
				#{pkEmpDirector,jdbcType=VARCHAR},
			</if>
			<if test="directorName != null">
				#{directorName,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpConsult != null">
				#{pkEmpConsult,jdbcType=VARCHAR},
			</if>
			<if test="consultName != null">
				#{consultName,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpChief != null">
				#{pkEmpChief,jdbcType=VARCHAR},
			</if>
			<if test="chiefName != null">
				#{chiefName,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpRefer != null">
				#{pkEmpRefer,jdbcType=VARCHAR},
			</if>
			<if test="referName != null">
				#{referName,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpNurse != null">
				#{pkEmpNurse,jdbcType=VARCHAR},
			</if>
			<if test="nurseName != null">
				#{nurseName,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpLearn != null">
				#{pkEmpLearn,jdbcType=VARCHAR},
			</if>
			<if test="learnName != null">
				#{learnName,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpIntern != null">
				#{pkEmpIntern,jdbcType=VARCHAR},
			</if>
			<if test="internName != null">
				#{internName,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpCoder != null">
				#{pkEmpCoder,jdbcType=VARCHAR},
			</if>
			<if test="coderName != null">
				#{coderName,jdbcType=VARCHAR},
			</if>
			<if test="qualityCode != null">
				#{qualityCode,jdbcType=CHAR},
			</if>
			<if test="qualityName != null">
				#{qualityName,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpQcDoc != null">
				#{pkEmpQcDoc,jdbcType=VARCHAR},
			</if>
			<if test="qcDocName != null">
				#{qcDocName,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpQcNurse != null">
				#{pkEmpQcNurse,jdbcType=VARCHAR},
			</if>
			<if test="qcNurseName != null">
				#{qcNurseName,jdbcType=VARCHAR},
			</if>
			<if test="qcDate != null">
				#{qcDate,jdbcType=DATE},
			</if>
			<if test="leaveHosCode != null">
				#{leaveHosCode,jdbcType=VARCHAR},
			</if>
			<if test="leaveHosName != null">
				#{leaveHosName,jdbcType=VARCHAR},
			</if>
			<if test="receiveOrgCode != null">
				#{receiveOrgCode,jdbcType=VARCHAR},
			</if>
			<if test="receiveOrgName != null">
				#{receiveOrgName,jdbcType=VARCHAR},
			</if>
			<if test="flagReadmit != null">
				#{flagReadmit,jdbcType=CHAR},
			</if>
			<if test="readmitPurp != null">
				#{readmitPurp,jdbcType=VARCHAR},
			</if>
			<if test="comaDayBef != null">
				#{comaDayBef,jdbcType=DECIMAL},
			</if>
			<if test="comaHourBef != null">
				#{comaHourBef,jdbcType=DECIMAL},
			</if>
			<if test="comaMinBef != null">
				#{comaMinBef,jdbcType=DECIMAL},
			</if>
			<if test="comaDayAfter != null">
				#{comaDayAfter,jdbcType=DECIMAL},
			</if>
			<if test="comaHourAfter != null">
				#{comaHourAfter,jdbcType=DECIMAL},
			</if>
			<if test="comaMinAfter != null">
				#{comaMinAfter,jdbcType=DECIMAL},
			</if>
			<if test="totalCost != null">
				#{totalCost,jdbcType=DECIMAL},
			</if>
			<if test="selfCost != null">
				#{selfCost,jdbcType=DECIMAL},
			</if>
			<if test="delFlag != null">
				#{delFlag,jdbcType=CHAR},
			</if>
			<if test="remark != null">
				#{remark,jdbcType=VARCHAR},
			</if>
			<if test="creator != null">
				#{creator,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				#{createTime,jdbcType=DATE},
			</if>
			<if test="ts != null">
				#{ts,jdbcType=DATE},
			</if>
			<if test="pkAdmitWard != null">
				#{pkAdmitWard,jdbcType=VARCHAR},
			</if>
			<if test="codePv != null">
				#{codePv,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>

	<update id="updateEmrHomePage"
		parameterType="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePage">
		UPDATE EMR_HOME_PAGE
		<set>
			<if test="pkPage != null">
				PK_PAGE = #{pkPage,jdbcType=CHAR},
			</if>
			<if test="pkOrg != null">
				PK_ORG = #{pkOrg,jdbcType=VARCHAR},
			</if>
			<if test="pkPi != null">
				PK_PI = #{pkPi,jdbcType=VARCHAR},
			</if>
			<if test="times != null">
				TIMES = #{times,jdbcType=DECIMAL},
			</if>
			<if test="pkPv != null">
				PK_PV = #{pkPv,jdbcType=VARCHAR},
			</if>
			<if test="medOrgCode != null">
				MED_ORG_CODE = #{medOrgCode,jdbcType=VARCHAR},
			</if>
			<if test="medOrgName != null">
				MED_ORG_NAME = #{medOrgName,jdbcType=VARCHAR},
			</if>
			<if test="healthCardNo != null">
				HEALTH_CARD_NO = #{healthCardNo,jdbcType=VARCHAR},
			</if>
			<if test="medPayMode != null">
				MED_PAY_MODE = #{medPayMode,jdbcType=VARCHAR},
			</if>
			<if test="patNo != null">
				PAT_NO = #{patNo,jdbcType=VARCHAR},
			</if>
			<if test="name != null">
				NAME = #{name,jdbcType=VARCHAR},
			</if>
			<if test="dtSex != null">
				DT_SEX = #{dtSex,jdbcType=CHAR},
			</if>
			<if test="birthDate != null">
				BIRTH_DATE = #{birthDate,jdbcType=DATE},
			</if>
			<if test="ageYear != null">
				AGE_YEAR = #{ageYear,jdbcType=DECIMAL},
			</if>
			<if test="ageMonth != null">
				AGE_MONTH = #{ageMonth,jdbcType=VARCHAR},
			</if>
			<if test="ageTxt != null">
				AGE_TXT = #{ageTxt,jdbcType=VARCHAR},
			</if>
			<if test="newbornWeight != null">
				NEWBORN_WEIGHT = #{newbornWeight,jdbcType=DECIMAL},
			</if>
			<if test="newbornInWeight != null">
				NEWBORN_IN_WEIGHT = #{newbornInWeight,jdbcType=DECIMAL},
			</if>
			<if test="birthAddrProv != null">
				BIRTH_ADDR_PROV = #{birthAddrProv,jdbcType=VARCHAR},
			</if>
			<if test="birthAddrCity != null">
				BIRTH_ADDR_CITY = #{birthAddrCity,jdbcType=VARCHAR},
			</if>
			<if test="birthAddrCounty != null">
				BIRTH_ADDR_COUNTY = #{birthAddrCounty,jdbcType=VARCHAR},
			</if>
			<if test="birthAddr != null">
				BIRTH_ADDR = #{birthAddr,jdbcType=VARCHAR},
			</if>
			<if test="birthAddrCode != null">
				BIRTH_ADDR_CODE = #{birthAddrCode,jdbcType=VARCHAR},
			</if>
			<if test="originAddrProv != null">
				ORIGIN_ADDR_PROV = #{originAddrProv,jdbcType=VARCHAR},
			</if>
			<if test="originAddrCity != null">
				ORIGIN_ADDR_CITY = #{originAddrCity,jdbcType=VARCHAR},
			</if>
			<if test="originAddr != null">
				ORIGIN_ADDR = #{originAddr,jdbcType=VARCHAR},
			</if>
			<if test="originAddrCode != null">
				ORIGIN_ADDR_CODE = #{originAddrCode,jdbcType=VARCHAR},
			</if>
			<if test="countryCode != null">
				COUNTRY_CODE = #{countryCode,jdbcType=VARCHAR},
			</if>
			<if test="countryName != null">
				COUNTRY_NAME = #{countryName,jdbcType=VARCHAR},
			</if>
			<if test="nationCode != null">
				NATION_CODE = #{nationCode,jdbcType=VARCHAR},
			</if>
			<if test="nationName != null">
				NATION_NAME = #{nationName,jdbcType=VARCHAR},
			</if>
			<if test="idType != null">
				ID_TYPE = #{idType,jdbcType=VARCHAR},
			</if>
			<if test="idNo != null">
				ID_NO = #{idNo,jdbcType=VARCHAR},
			</if>
			<if test="occupCode != null">
				OCCUP_CODE = #{occupCode,jdbcType=VARCHAR},
			</if>
			<if test="occupName != null">
				OCCUP_NAME = #{occupName,jdbcType=VARCHAR},
			</if>
			<if test="marryCode != null">
				MARRY_CODE = #{marryCode,jdbcType=VARCHAR},
			</if>
			<if test="marryName != null">
				MARRY_NAME = #{marryName,jdbcType=VARCHAR},
			</if>
			<if test="currAddrProv != null">
				CURR_ADDR_PROV = #{currAddrProv,jdbcType=VARCHAR},
			</if>
			<if test="currAddrCity != null">
				CURR_ADDR_CITY = #{currAddrCity,jdbcType=VARCHAR},
			</if>
			<if test="currAddrCounty != null">
				CURR_ADDR_COUNTY = #{currAddrCounty,jdbcType=VARCHAR},
			</if>
			<if test="currPhone != null">
				CURR_PHONE = #{currPhone,jdbcType=VARCHAR},
			</if>
			<if test="currZipCode != null">
				CURR_ZIP_CODE = #{currZipCode,jdbcType=VARCHAR},
			</if>
			<if test="currAddr != null">
				CURR_ADDR = #{currAddr,jdbcType=VARCHAR},
			</if>
			<if test="currAddrCode != null">
				CURR_ADDR_CODE = #{currAddrCode,jdbcType=VARCHAR},
			</if>
			<if test="currAddrDt != null">
				CURR_ADDR_DT = #{currAddrDt,jdbcType=VARCHAR},
			</if>
			<if test="workUnit != null">
				WORK_UNIT = #{workUnit,jdbcType=VARCHAR},
			</if>
			<if test="workUnitPhone != null">
				WORK_UNIT_PHONE = #{workUnitPhone,jdbcType=VARCHAR},
			</if>
			<if test="resideAddrProv != null">
				RESIDE_ADDR_PROV = #{resideAddrProv,jdbcType=VARCHAR},
			</if>
			<if test="resideAddrCity != null">
				RESIDE_ADDR_CITY = #{resideAddrCity,jdbcType=VARCHAR},
			</if>
			<if test="resideAddrCounty != null">
				RESIDE_ADDR_COUNTY = #{resideAddrCounty,jdbcType=VARCHAR},
			</if>
			<if test="resideZipCode != null">
				RESIDE_ZIP_CODE = #{resideZipCode,jdbcType=VARCHAR},
			</if>
			<if test="resideAddr != null">
				RESIDE_ADDR = #{resideAddr,jdbcType=VARCHAR},
			</if>
			<if test="resideAddrCode != null">
				RESIDE_ADDR_CODE = #{resideAddrCode,jdbcType=VARCHAR},
			</if>
			<if test="resideAddrDt != null">
				RESIDE_ADDR_DT = #{resideAddrDt,jdbcType=VARCHAR},
			</if>
			<if test="workUnitZipCode != null">
				WORK_UNIT_ZIP_CODE = #{workUnitZipCode,jdbcType=VARCHAR},
			</if>
			<if test="contactName != null">
				CONTACT_NAME = #{contactName,jdbcType=VARCHAR},
			</if>
			<if test="contactRelatCode != null">
				CONTACT_RELAT_CODE = #{contactRelatCode,jdbcType=VARCHAR},
			</if>
			<if test="contactRelatName != null">
				CONTACT_RELAT_NAME = #{contactRelatName,jdbcType=VARCHAR},
			</if>
			<if test="contactAddr != null">
				CONTACT_ADDR = #{contactAddr,jdbcType=VARCHAR},
			</if>
			<if test="contactPhone != null">
				CONTACT_PHONE = #{contactPhone,jdbcType=VARCHAR},
			</if>
			<if test="admitPathCode != null">
				ADMIT_PATH_CODE = #{admitPathCode,jdbcType=VARCHAR},
			</if>
			<if test="admitPathName != null">
				ADMIT_PATH_NAME = #{admitPathName,jdbcType=VARCHAR},
			</if>
			<if test="admitTime != null">
				ADMIT_TIME = #{admitTime,jdbcType=TIMESTAMP},
			</if>
			<if test="pkAdmitDept != null">
				PK_ADMIT_DEPT = #{pkAdmitDept,jdbcType=VARCHAR},
			</if>
			<if test="admitDeptName != null">
				ADMIT_DEPT_NAME = #{admitDeptName,jdbcType=VARCHAR},
			</if>
			<if test="admitWardName != null">
				ADMIT_WARD_NAME = #{admitWardName,jdbcType=VARCHAR},
			</if>
			<if test="transDeptNames != null">
				TRANS_DEPT_NAMES = #{transDeptNames,jdbcType=VARCHAR},
			</if>
			<if test="disTime != null">
				DIS_TIME = #{disTime,jdbcType=TIMESTAMP},
			</if>
			<if test="pkDeptDis != null">
				PK_DEPT_DIS = #{pkDeptDis,jdbcType=VARCHAR},
			</if>
			<if test="disDeptName != null">
				DIS_DEPT_NAME = #{disDeptName,jdbcType=VARCHAR},
			</if>
			<if test="pkWardDis != null">
				PK_WARD_DIS = #{pkWardDis,jdbcType=VARCHAR},
			</if>
			<if test="disWardName != null">
				DIS_WARD_NAME = #{disWardName,jdbcType=VARCHAR},
			</if>
			<if test="pkDiagClinic != null">
				PK_DIAG_CLINIC = #{pkDiagClinic,jdbcType=VARCHAR},
			</if>
			<if test="inHosDays != null">
				IN_HOS_DAYS = #{inHosDays,jdbcType=DECIMAL},
			</if>
			<if test="diagCodeClinic != null">
				DIAG_CODE_CLINIC = #{diagCodeClinic,jdbcType=VARCHAR},
			</if>
			<if test="pkDiagDis != null">
				PK_DIAG_DIS = #{pkDiagDis,jdbcType=VARCHAR},
			</if>
			<if test="diagNameClinic != null">
				DIAG_NAME_CLINIC = #{diagNameClinic,jdbcType=VARCHAR},
			</if>
			<if test="diagCodeDis != null">
				DIAG_CODE_DIS = #{diagCodeDis,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpClinic != null">
				PK_EMP_CLINIC = #{pkEmpClinic,jdbcType=VARCHAR},
			</if>
			<if test="clinicName != null">
				CLINIC_NAME = #{clinicName,jdbcType=VARCHAR},
			</if>
			<if test="pkDiagExtcIp != null">
				PK_DIAG_EXTC_IP = #{pkDiagExtcIp,jdbcType=VARCHAR},
			</if>
			<if test="diagNameDis != null">
				DIAG_NAME_DIS = #{diagNameDis,jdbcType=VARCHAR},
			</if>
			<if test="admitCondCode != null">
				ADMIT_COND_CODE = #{admitCondCode,jdbcType=VARCHAR},
			</if>
			<if test="admitCondName != null">
				ADMIT_COND_NAME = #{admitCondName,jdbcType=VARCHAR},
			</if>
			<if test="medRecType != null">
				MED_REC_TYPE = #{medRecType,jdbcType=CHAR},
			</if>
			<if test="flagCp != null">
				FLAG_CP = #{flagCp,jdbcType=CHAR},
			</if>
			<if test="numRes != null">
				NUM_RES = #{numRes,jdbcType=INTEGER},
			</if>
			<if test="numSucc != null">
				NUM_SUCC = #{numSucc,jdbcType=INTEGER},
			</if>
			<if test="diagCodeExtcIp != null">
				DIAG_CODE_EXTC_IP = #{diagCodeExtcIp,jdbcType=VARCHAR},
			</if>
			<if test="pkDiagPatho != null">
				PK_DIAG_PATHO = #{pkDiagPatho,jdbcType=VARCHAR},
			</if>
			<if test="diagNameExtcIp != null">
				DIAG_NAME_EXTC_IP = #{diagNameExtcIp,jdbcType=VARCHAR},
			</if>
			<if test="diagCodePatho != null">
				DIAG_CODE_PATHO = #{diagCodePatho,jdbcType=VARCHAR},
			</if>
			<if test="diagNamePatho != null">
				DIAG_NAME_PATHO = #{diagNamePatho,jdbcType=VARCHAR},
			</if>
			<if test="pathoNo != null">
				PATHO_NO = #{pathoNo,jdbcType=VARCHAR},
			</if>
			<if test="flagDrugAllergy != null">
				FLAG_DRUG_ALLERGY = #{flagDrugAllergy,jdbcType=CHAR},
			</if>
			<if test="allergicDrug != null">
				ALLERGIC_DRUG = #{allergicDrug,jdbcType=VARCHAR},
			</if>
			<if test="flagAutopsy != null">
				FLAG_AUTOPSY = #{flagAutopsy,jdbcType=CHAR},
			</if>
			<if test="bloodCodeAbo != null">
				BLOOD_CODE_ABO = #{bloodCodeAbo,jdbcType=VARCHAR},
			</if>
			<if test="bloodNameAbo != null">
				BLOOD_NAME_ABO = #{bloodNameAbo,jdbcType=VARCHAR},
			</if>
			<if test="bloodCodeRh != null">
				BLOOD_CODE_RH = #{bloodCodeRh,jdbcType=VARCHAR},
			</if>
			<if test="bloodNameRh != null">
				BLOOD_NAME_RH = #{bloodNameRh,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpDirector != null">
				PK_EMP_DIRECTOR = #{pkEmpDirector,jdbcType=VARCHAR},
			</if>
			<if test="directorName != null">
				DIRECTOR_NAME = #{directorName,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpConsult != null">
				PK_EMP_CONSULT = #{pkEmpConsult,jdbcType=VARCHAR},
			</if>
			<if test="consultName != null">
				CONSULT_NAME = #{consultName,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpChief  != null">
				PK_EMP_CHIEF = #{pkEmpChief,jdbcType=VARCHAR},
			</if>
			<if test="chiefName != null">
				CHIEF_NAME = #{chiefName,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpRefer != null">
				PK_EMP_REFER = #{pkEmpRefer,jdbcType=VARCHAR},
			</if>
			<if test="referName != null">
				REFER_NAME = #{referName,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpNurse != null">
				PK_EMP_NURSE = #{pkEmpNurse,jdbcType=VARCHAR},
			</if>
			<if test="nurseName != null">
				NURSE_NAME = #{nurseName,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpLearn != null">
				PK_EMP_LEARN = #{pkEmpLearn,jdbcType=VARCHAR},
			</if>
			<if test="learnName != null">
				LEARN_NAME = #{learnName,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpIntern != null">
				PK_EMP_INTERN = #{pkEmpIntern,jdbcType=VARCHAR},
			</if>
			<if test="internName != null">
				INTERN_NAME = #{internName,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpCoder != null">
				PK_EMP_CODER = #{pkEmpCoder,jdbcType=VARCHAR},
			</if>
			<if test="coderName != null">
				CODER_NAME = #{coderName,jdbcType=VARCHAR},
			</if>
			<if test="qualityCode != null">
				QUALITY_CODE = #{qualityCode,jdbcType=CHAR},
			</if>
			<if test="qualityName != null">
				QUALITY_NAME = #{qualityName,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpQcDoc != null">
				PK_EMP_QC_DOC = #{pkEmpQcDoc,jdbcType=VARCHAR},
			</if>
			<if test="qcDocName != null">
				QC_DOC_NAME = #{qcDocName,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpQcNurse != null">
				PK_EMP_QC_NURSE = #{pkEmpQcNurse,jdbcType=VARCHAR},
			</if>
			<if test="qcNurseName != null">
				QC_NURSE_NAME = #{qcNurseName,jdbcType=VARCHAR},
			</if>
			<if test="qcDate != null">
				QC_DATE = #{qcDate,jdbcType=DATE},
			</if>
			<if test="leaveHosCode != null">
				LEAVE_HOS_CODE = #{leaveHosCode,jdbcType=VARCHAR},
			</if>
			<if test="leaveHosName != null">
				LEAVE_HOS_NAME = #{leaveHosName,jdbcType=VARCHAR},
			</if>
			<if test="receiveOrgCode != null">
				RECEIVE_ORG_CODE = #{receiveOrgCode,jdbcType=VARCHAR},
			</if>
			<if test="receiveOrgName != null">
				RECEIVE_ORG_NAME = #{receiveOrgName,jdbcType=VARCHAR},
			</if>
			<if test="flagReadmit != null">
				FLAG_READMIT = #{flagReadmit,jdbcType=CHAR},
			</if>
			<if test="readmitPurp != null">
				READMIT_PURP = #{readmitPurp,jdbcType=VARCHAR},
			</if>
			<if test="comaDayBef != null">
				COMA_DAY_BEF = #{comaDayBef,jdbcType=DECIMAL},
			</if>
			<if test="comaHourBef != null">
				COMA_HOUR_BEF = #{comaHourBef,jdbcType=DECIMAL},
			</if>
			<if test="comaMinBef != null">
				COMA_MIN_BEF = #{comaMinBef,jdbcType=DECIMAL},
			</if>
			<if test="comaDayAfter != null">
				COMA_DAY_AFTER = #{comaDayAfter,jdbcType=DECIMAL},
			</if>
			<if test="comaHourAfter != null">
				COMA_HOUR_AFTER = #{comaHourAfter,jdbcType=DECIMAL},
			</if>
			<if test="comaMinAfter != null">
				COMA_MIN_AFTER = #{comaMinAfter,jdbcType=DECIMAL},
			</if>
			<if test="totalCost != null">
				TOTAL_COST = #{totalCost,jdbcType=DECIMAL},
			</if>
			<if test="selfCost != null">
				SELF_COST = #{selfCost,jdbcType=DECIMAL},
			</if>
			<if test="delFlag != null">
				DEL_FLAG = #{delFlag,jdbcType=CHAR},
			</if>
			<if test="remark != null">
				REMARK = #{remark,jdbcType=VARCHAR},
			</if>
			<if test="creator != null">
				CREATOR = #{creator,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				CREATE_TIME = #{createTime,jdbcType=DATE},
			</if>
			<if test="ts != null">
				TS = #{ts,jdbcType=DATE},
			</if>
			<if test="pkAdmitWard != null">
				PK_ADMIT_WARD = #{pkAdmitWard,jdbcType=VARCHAR},
			</if>
			<if test="codePv != null">
				code_pv = #{codePv,jdbcType=VARCHAR},
			</if>
		</set>
		WHERE
		PK_PAGE = #{pkPage,jdbcType=CHAR}
	</update>
	<select id="queryHisHomePageData" resultMap="ResultMapHomePage">
		SELECT pat.pk_pi,
			pat.pk_pv,
			pat.pk_org,
			nvl(org.code_hosp,org.code_org) med_org_code,
			org.name_org med_org_name,
			pat.hic_no health_card_no,
			hp.dt_mdpaytype med_pay_mode,
			(select max(b.name) from BD_HP h,BD_DEFDOC b where  h.DT_MDPAYTYPE = b.CODE and b.CODE_DEFDOCLIST = '040009') hp_name,
			pat.pat_no,
			pat.name,
			zd_sex.ba_code dt_sex,
			pat.ip_times times,
			pat.birth_date,
			pat.age_txt,
			zd_addr_birth.prov birth_addr_prov,
			zd_addr_birth.city birth_addr_city,
			zd_addr_birth.dist birth_addr_county,/*出生地-县*/
			pat.addr_birth birth_addr,
			pat.addrcode_birth birth_addr_code,
			zd_addr_origin.prov origin_addr_prov,
			zd_addr_origin.city origin_addr_city,/*籍贯-市*/
			pat.addr_origin origin_addr,
			pat.addrcode_origin origin_addr_code,
			nvl(dt_country.ba_code,pat.dt_country) country_code,
			(select name from bd_defdoc bdct where bdct.code_defdoclist='000009' and
			bdct.code=pat.dt_country) country_name,
			nvl(zd_nation.ba_code,pat.dt_nation) nation_code,
			pat.nation_name,
			pat.dt_idtype id_type,
			(case pat.dt_idtype when '01' then pat.id_no else pat.id_no end) id_no,
			nvl(dt_occu.ba_code,pat.dt_occu) occup_code,
			pat.occu_name occup_name,
			zd_marry.ba_code marry_code,
			pat.marry_name,
			zd_addr_cur.prov curr_addr_prov,/*现住址-省*/
			zd_addr_cur.city curr_addr_city,/*现住址-市*/
			zd_addr_cur.dist curr_addr_county,/*现住址-县*/
			pat.tel_no curr_phone,/*现住址-电话*/
			nvl(pat.addr_cur,pat.addr_cur_dt) curr_addr,/*现住址 nvl(pat.addr_cur_dt,'') */
			pat.addrcode_cur curr_addr_code,
			pat.addr_cur_dt curr_addr_dt,
			pat.postcode_cur curr_zip_code,
			pat.unit_work work_unit,
			pat.tel_work work_unit_phone,
			pat.postcode_work work_unit_zip_code,
			zd_addr_regi.prov reside_addr_prov,
			zd_addr_regi.city reside_addr_city,
			zd_addr_regi.dist reside_addr_county,/*户口住址-县*/
			nvl(pat.addr_regi,pat.addr_regi_dt)  reside_addr,/*户口住址  nvl(pat.addr_regi_dt,'')*/
			pat.addrcode_regi reside_addr_code,
			pat.addr_regi_dt reside_addr_dt,
			pat.postcode_regi reside_zip_code,
			pat.name_rel contact_name,
			pat.addr_rel contact_addr,
			pat.tel_rel contact_phone,
			nvl(zd_ralation.ba_code,pat.dt_ralation) contact_relat_code,
			nvl(zd_ralation.memo,pat.ralation_name) contact_relat_name,
			(case pat.dt_intype when '00' then '1' when '01' then '2' when '02' then '3' else '9' end) admit_path_code,
			pat.date_begin admit_time,
			pat.pk_dept_admit,
			dept_admit.pk_dept pk_admit_dept,
			dept_admit.name_dept admit_dept_name,
			ward_admit.pk_dept pk_admit_ward,
			ward_admit.name_dept admit_ward_name,
			pat.date_end dis_time,
			pat.pk_dept_dis,
			dept_dis.name_dept dis_dept_name,
			pat.in_hos_days,
			pat.diag_code_clinic,
			pat.diag_name_clinic,
			pat.diag_dis_txt diag_name_dis,
			nvl(pat.dt_blood_abo,'6') blood_code_abo,
			nvl(pat.dt_blood_rh,'4') blood_code_rh,
			nvl(eds.set_pk,pat.pk_emp_director) pk_emp_chief,
			nvl(eds.set_name,pat.director_name) chief_name,
			edsn.set_pk pk_emp_qc_nurse,
			edsn.set_name qc_nurse_name,
			pat.pk_emp_director,
			pat.director_name,
			pat.pk_emp_consult,
			pat.consult_name,
			pat.pk_emp_refer,
			pat.refer_name,
			pat.pk_emp_ns pk_emp_nurse,
			emp_ns.name_emp nurse_name,
			pat.qc_date,
			pat.pk_emp_qc pk_emp_qc_doc,
			emp_qc.name_emp qc_doc_name,
			ward_dis.name_dept dis_ward_name,
			pat.pk_emp_tre,
			pat.name_emp_tre clinic_name,
			pat.dt_outtype,
      		bd_ot.ba_code leave_hos_code,
      		pat.code_ip,
      		(select count(1) from emr_med_rec rec where rec.pk_pv=pat.pk_pv and rec.del_flag='0' and type_code='100008') num_res,
      		(select count(1) from emr_med_rec rec where rec.pk_pv=pat.pk_pv and rec.del_flag='0' and type_code='100008') num_succ,
      		nvl(pat.flag_drug_allergy,'1') flag_drug_allergy,
      		pat.allergic_drug,
      		'A' med_rec_type,
      		'2' flag_cp,
      		'1' flag_readmit,
      		pat.code_pv
		FROM view_emr_pat_list pat 
			left outer join bd_ou_org org on pat.pk_org = org.pk_org
			left outer join bd_hp hp on pat.pk_insu = hp.pk_hp
			left outer join bd_ou_dept dept_admit on pat.pk_dept_admit = dept_admit.pk_dept
			left outer join bd_ou_dept ward_admit on pat.pk_dept_ns_admit = ward_admit.pk_dept
			left outer join bd_ou_dept dept_dis	on pat.pk_dept_dis = dept_dis.pk_dept
			left outer join bd_ou_dept ward_dis	on pat.pk_dept_ns_dis = ward_dis.pk_dept
			left outer join bd_ou_employee emp_ns on pat.pk_emp_ns = emp_ns.pk_emp
			left outer join bd_ou_employee emp_qc on pat.pk_emp_qc=emp_qc.pk_emp
			left outer join bd_defdoc zd_sex on pat.dt_sex=zd_sex.code and zd_sex.code_defdoclist='000000'
			left outer join bd_defdoc zd_marry on pat.dt_marry=zd_marry.code and zd_marry.code_defdoclist='000006'
			left outer join bd_admin_division zd_addr_cur on pat.addrcode_cur = zd_addr_cur.code_div and zd_addr_cur.del_flag='0'
			left outer join bd_admin_division zd_addr_birth on pat.addrcode_birth = zd_addr_birth.code_div and zd_addr_birth.del_flag='0'
			left outer join bd_admin_division zd_addr_origin on pat.addrcode_origin = zd_addr_origin.code_div and zd_addr_origin.del_flag='0'
			left outer join bd_admin_division zd_addr_regi on pat.addrcode_regi = zd_addr_regi.code_div and zd_addr_regi.del_flag='0'
			left outer join bd_defdoc bd_ot on pat.dt_outtype = bd_ot.code and bd_ot.code_defdoclist='000105'
			left outer join bd_defdoc zd_nation on pat.dt_nation=zd_nation.code and zd_nation.code_defdoclist='000003'
			left outer join bd_defdoc zd_ralation on pat.dt_ralation=zd_ralation.code and zd_ralation.code_defdoclist='000013'
			left outer join bd_defdoc dt_occu on pat.dt_occu=dt_occu.code and dt_occu.code_defdoclist='000010'
			left outer join bd_defdoc dt_country on pat.dt_country=dt_country.code and dt_country.code_defdoclist='000009'
			left outer join emr_dept_set eds on pat.pk_dept=eds.pk_dept and eds.code='chief' 
			left outer join emr_dept_set edsn on pat.pk_dept_ns=edsn.pk_dept and edsn.code='chief_nurse'
		WHERE pat.PK_PV = #{pkPv,jdbcType=VARCHAR} and 
		      pat.pk_org=org.pk_org
	</select>
	<resultMap id="ResultMapOps"
		type="com.zebone.nhis.common.module.emr.rec.rec.EmrOpsList">
		<result column="PK_ORDOP" jdbcType="CHAR" property="pkOrdop" />
		<result column="PK_ORG" jdbcType="CHAR" property="pkOrg" />
		<result column="PK_CNORD" jdbcType="CHAR" property="pkCnord" />
		<result column="EU_OPTYPE" jdbcType="VARCHAR" property="euOptype" />
		<result column="PK_DIAG_PRE" jdbcType="CHAR" property="pkDiagPre" />
		<result column="DESC_DIAG_PRE" jdbcType="VARCHAR" property="descDiagPre" />
		<result column="DT_OPLEVEL" jdbcType="VARCHAR" property="dtOplevel" />
		<result column="PK_OP" jdbcType="CHAR" property="pkOp" />
		<result column="CODE" jdbcType="VARCHAR" property="code" />
		<result column="NAME" jdbcType="VARCHAR" property="name" />
		<result column="DESC_OP" jdbcType="VARCHAR" property="descOp" />
		<result column="DESC_OP_SUB" jdbcType="VARCHAR" property="descOpSub" />
		<result column="DT_ANAE" jdbcType="VARCHAR" property="dtAnae" />
		<result column="DT_ASEPSIS" jdbcType="VARCHAR" property="dtAsepsis" />
		<result column="DT_POSI" jdbcType="VARCHAR" property="dtPosi" />
		<result column="PK_EMP_PHY_OP" jdbcType="CHAR" property="pkEmpPhyOp" />
		<result column="NAME_EMP_PHY_OP" jdbcType="VARCHAR" property="nameEmpPhyOp" />
		<result column="PK_EMP_ANAE" jdbcType="CHAR" property="pkEmpAnae" />
		<result column="NAME_EMP_ANAE" jdbcType="VARCHAR" property="nameEmpAnae" />
		<result column="PK_EMP_ASIS" jdbcType="CHAR" property="pkEmpAsis" />
		<result column="NAME_EMP_ASIS" jdbcType="VARCHAR" property="nameEmpAsis" />
		<result column="PK_EMP_ASIS2" jdbcType="CHAR" property="pkEmpAsis2" />
		<result column="NAME_EMP_ASIS2" jdbcType="VARCHAR" property="nameEmpAsis2" />
		<result column="PK_EMP_ASIS3" jdbcType="CHAR" property="pkEmpAsis3" />
		<result column="NAME_EMP_ASIS3" jdbcType="VARCHAR" property="nameEmpAsis3" />
		<result column="PK_EMP_SCRUB" jdbcType="CHAR" property="pkEmpScrub" />
		<result column="NAME_EMP_SCRUB" jdbcType="VARCHAR" property="nameEmpScrub" />
		<result column="PK_EMP_CIRCUL" jdbcType="CHAR" property="pkEmpCircul" />
		<result column="NAME_EMP_CRICUL" jdbcType="VARCHAR" property="nameEmpCricul" />
		<result column="DT_OPBODY" jdbcType="VARCHAR" property="dtOpbody" />
		<result column="DATE_APPLY" jdbcType="DATE" property="dateApply" />
		<result column="DATE_PLAN" jdbcType="DATE" property="datePlan" />
		<result column="PK_OPT" jdbcType="CHAR" property="pkOpt" />
		<result column="DATE_CONFIRM" jdbcType="DATE" property="dateConfirm" />
		<result column="TICKETNO" jdbcType="DECIMAL" property="ticketno" />
		<result column="DATE_BEGIN" jdbcType="DATE" property="dateBegin" />
		<result column="EU_STATUS" jdbcType="VARCHAR" property="euStatus" />
		<result column="NOTE" jdbcType="VARCHAR" property="note" />
		<result column="DATE_CONFIRM_DEPT" jdbcType="DATE" property="dateConfirmDept" />
		<result column="CREATOR" jdbcType="CHAR" property="creator" />
		<result column="CREATE_TIME" jdbcType="DATE" property="createTime" />
		<result column="MODIFIER" jdbcType="CHAR" property="modifier" />
		<result column="MODITY_TIME" jdbcType="DATE" property="modityTime" />
		<result column="DEL_FLAG" jdbcType="CHAR" property="delFlag" />
		<result column="TS" jdbcType="TIMESTAMP" property="ts" />
		<result column="NNIS_CODE" jdbcType="VARCHAR" property="nnisCode" />
		<result column="NNIS_NAME" jdbcType="VARCHAR" property="nnisName" />
		<result column="ASA_CODE" jdbcType="VARCHAR" property="asaCode" />
		<result column="ASA_NAME" jdbcType="VARCHAR" property="asaName" />
	</resultMap>
	<resultMap id="ResultMapCharge"
		type="com.zebone.nhis.common.module.emr.rec.rec.EmrChargeList">
		<result column="CODE" jdbcType="VARCHAR" property="code" />
		<result column="NAME" jdbcType="VARCHAR" property="name" />
		<result column="ITEM_TYPE" jdbcType="VARCHAR" property="itemType" />
		<result column="AMOUNT" jdbcType="DECIMAL" property="amount" />
	</resultMap>
	<select id="queryOpsList" resultMap="ResultMapOps">
		SELECT
		*
		FROM
		view_emr_ops_list
		WHERE pk_pv is not null
		<if test="pkPv != null">
			and PK_PV = #{pkPv,jdbcType=VARCHAR}
		</if>
		<if test="orderBy != null">
			${orderBy}
		</if>
	</select>
	<select id="queryOphandleList" resultType="com.zebone.nhis.common.module.emr.rec.rec.EmrOpHandleList">
		SELECT Top 5
		  pk_pv,
		  pk_rec,
		  pk_org,
		  seq_no,
		  operate_txt,
		  operate_name,
		  substring(operate_time,0,11) as operate_time
		FROM
		view_emr_ophandle_list
		WHERE pk_pv is not null
		<if test="pkPv != null">
			and PK_PV = #{pkPv,jdbcType=VARCHAR}
		</if>
		<if test="orderBy != null">
			${orderBy}
		</if>
	</select>
	<select id="queryChargeList" resultMap="ResultMapCharge">
		SELECT
		*
		FROM
		view_emr_charge_list
		WHERE pk_pv is not null
		<if test="pkPv != null">
			and PK_PV = #{pkPv,jdbcType=VARCHAR}
		</if>
		<if test="orderBy != null">
			${orderBy}
		</if>
	</select>
	<select id="queryChargeListPg" resultMap="ResultMapCharge">
		SELECT
		*
		FROM
		view_emr_charge_list_pg
		WHERE pk_pv is not null
		<if test="pkPv != null">
			and PK_PV = #{pkPv,jdbcType=VARCHAR}
		</if>
	   order by pk_pv,code 
	</select>
	<delete id="deleteEmrHomePageOps">
		DELETE
		FROM
		EMR_HOME_PAGE_OPS
		WHERE
		PK_OPS = #{pkOps,jdbcType=CHAR}
	</delete>

	<insert id="saveEmrHomePageOps"
		parameterType="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePageOps">
		INSERT INTO EMR_HOME_PAGE_OPS
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="pkOps != null">
				PK_OPS,
			</if>
			<if test="pkOrg != null">
				PK_ORG,
			</if>
			<if test="pkPage != null">
				PK_PAGE,
			</if>
			<if test="seqNo != null">
				SEQ_NO,
			</if>
			<if test="euType != null">
				EU_TYPE,
			</if>
			<if test="opCode != null">
				OP_CODE,
			</if>
			<if test="opName != null">
				OP_NAME,
			</if>
			<if test="opDate != null">
				OP_DATE,
			</if>
			<if test="gradeCode != null">
				GRADE_CODE,
			</if>
			<if test="gradeName != null">
				GRADE_NAME,
			</if>
			<if test="pkEmpOp != null">
				PK_EMP_OP,
			</if>
			<if test="opDocName != null">
				OP_DOC_NAME,
			</if>
			<if test="pkEmpOpi != null">
				PK_EMP_OPI,
			</if>
			<if test="opiName != null">
				OPI_NAME,
			</if>
			<if test="pkEmpOpii != null">
				PK_EMP_OPII,
			</if>
			<if test="opiiName != null">
				OPII_NAME,
			</if>
			<if test="incisionTypeCode != null">
				INCISION_TYPE_CODE,
			</if>
			<if test="incisionTypeName != null">
				INCISION_TYPE_NAME,
			</if>
			<if test="healGradeCode != null">
				HEAL_GRADE_CODE,
			</if>
			<if test="healGradeName != null">
				HEAL_GRADE_NAME,
			</if>
			<if test="anesTypeCode != null">
				ANES_TYPE_CODE,
			</if>
			<if test="anesTypeName != null">
				ANES_TYPE_NAME,
			</if>
			<if test="pkEmpAnes != null">
				PK_EMP_ANES,
			</if>
			<if test="anesDocName != null">
				ANES_DOC_NAME,
			</if>
			<if test="asaCode != null">
				ASA_CODE,
			</if>
			<if test="asaName != null">
				ASA_NAME,
			</if>
			<if test="nnisCode != null">
				NNIS_CODE,
			</if>
			<if test="nnisName != null">
				NNIS_NAME,
			</if>

			<if test="flagElective != null">
				FLAG_ELECTIVE,
			</if>
			<if test="delFlag != null">
				DEL_FLAG,
			</if>
			<if test="remark != null">
				REMARK,
			</if>
			<if test="creator != null">
				CREATOR,
			</if>
			<if test="createTime != null">
				CREATE_TIME,
			</if>
			<if test="ts != null">
				TS,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="pkOps != null">
				#{pkOps,jdbcType=CHAR},
			</if>
			<if test="pkOrg != null">
				#{pkOrg,jdbcType=VARCHAR},
			</if>
			<if test="pkPage != null">
				#{pkPage,jdbcType=VARCHAR},
			</if>
			<if test="seqNo != null">
				#{seqNo,jdbcType=DECIMAL},
			</if>
			<if test="euType != null">
				#{euType,jdbcType=CHAR},
			</if>
			<if test="opCode != null">
				#{opCode,jdbcType=VARCHAR},
			</if>
			<if test="opName != null">
				#{opName,jdbcType=VARCHAR},
			</if>
			<if test="opDate != null">
				#{opDate,jdbcType=DATE},
			</if>
			<if test="gradeCode != null">
				#{gradeCode,jdbcType=VARCHAR},
			</if>
			<if test="gradeName != null">
				#{gradeName,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpOp != null">
				#{pkEmpOp,jdbcType=VARCHAR},
			</if>
			<if test="opDocName != null">
				#{opDocName,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpOpi != null">
				#{pkEmpOpi,jdbcType=VARCHAR},
			</if>
			<if test="opiName != null">
				#{opiName,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpOpii != null">
				#{pkEmpOpii,jdbcType=VARCHAR},
			</if>
			<if test="opiiName != null">
				#{opiiName,jdbcType=VARCHAR},
			</if>
			<if test="incisionTypeCode != null">
				#{incisionTypeCode,jdbcType=VARCHAR},
			</if>
			<if test="incisionTypeName != null">
				#{incisionTypeName,jdbcType=VARCHAR},
			</if>
			<if test="healGradeCode != null">
				#{healGradeCode,jdbcType=VARCHAR},
			</if>
			<if test="healGradeName != null">
				#{healGradeName,jdbcType=VARCHAR},
			</if>
			<if test="anesTypeCode != null">
				#{anesTypeCode,jdbcType=VARCHAR},
			</if>
			<if test="anesTypeName != null">
				#{anesTypeName,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpAnes != null">
				#{pkEmpAnes,jdbcType=VARCHAR},
			</if>
			<if test="anesDocName != null">
				#{anesDocName,jdbcType=VARCHAR},
			</if>
			<if test="asaCode != null">
				#{asaCode,jdbcType=VARCHAR},
			</if>
			<if test="asaName != null">
				#{asaName,jdbcType=VARCHAR},
			</if>
			<if test="nnisCode != null">
				#{nnisCode,jdbcType=VARCHAR},
			</if>
			<if test="nnisName != null">
				#{nnisName,jdbcType=VARCHAR},
			</if>
			<if test="flagElective != null">
				#{flagElective,jdbcType=CHAR},
			</if>
			<if test="delFlag != null">
				#{delFlag,jdbcType=CHAR},
			</if>
			<if test="remark != null">
				#{remark,jdbcType=VARCHAR},
			</if>
			<if test="creator != null">
				#{creator,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				#{createTime,jdbcType=DATE},
			</if>
			<if test="ts != null">
				#{ts,jdbcType=DATE},
			</if>
		</trim>
	</insert>

	<update id="updateEmrHomePageOps"
		parameterType="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePageOps">
		UPDATE EMR_HOME_PAGE_OPS
		<set>
			<if test="pkOps != null">
				PK_OPS = #{pkOps,jdbcType=CHAR},
			</if>
			<if test="pkOrg != null">
				PK_ORG = #{pkOrg,jdbcType=VARCHAR},
			</if>
			<if test="pkPage != null">
				PK_PAGE = #{pkPage,jdbcType=VARCHAR},
			</if>
			<if test="seqNo != null">
				SEQ_NO = #{seqNo,jdbcType=DECIMAL},
			</if>
			<if test="euType != null">
				EU_TYPE = #{euType,jdbcType=VARCHAR},
			</if>
			<if test="opCode != null">
				OP_CODE = #{opCode,jdbcType=VARCHAR},
			</if>
			<if test="opName != null">
				OP_NAME = #{opName,jdbcType=VARCHAR},
			</if>
			<if test="opDate != null">
				OP_DATE = #{opDate,jdbcType=DATE},
			</if>
			<if test="gradeCode != null">
				GRADE_CODE = #{gradeCode,jdbcType=VARCHAR},
			</if>
			<if test="gradeName != null">
				GRADE_NAME = #{gradeName,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpOp != null">
				PK_EMP_OP = #{pkEmpOp,jdbcType=VARCHAR},
			</if>
			<if test="opDocName != null">
				OP_DOC_NAME = #{opDocName,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpOpi != null">
				PK_EMP_OPI = #{pkEmpOpi,jdbcType=VARCHAR},
			</if>
			<if test="opiName != null">
				OPI_NAME = #{opiName,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpOpii != null">
				PK_EMP_OPII = #{pkEmpOpii,jdbcType=VARCHAR},
			</if>
			<if test="opiiName != null">
				OPII_NAME = #{opiiName,jdbcType=VARCHAR},
			</if>
			<if test="incisionTypeCode != null">
				INCISION_TYPE_CODE = #{incisionTypeCode,jdbcType=VARCHAR},
			</if>
			<if test="incisionTypeName != null">
				INCISION_TYPE_NAME = #{incisionTypeName,jdbcType=VARCHAR},
			</if>
			<if test="healGradeCode != null">
				HEAL_GRADE_CODE = #{healGradeCode,jdbcType=VARCHAR},
			</if>
			<if test="healGradeName != null">
				HEAL_GRADE_NAME = #{healGradeName,jdbcType=VARCHAR},
			</if>
			<if test="anesTypeCode != null">
				ANES_TYPE_CODE = #{anesTypeCode,jdbcType=VARCHAR},
			</if>
			<if test="anesTypeName != null">
				ANES_TYPE_NAME = #{anesTypeName,jdbcType=VARCHAR},
			</if>
			<if test="pkEmpAnes != null">
				PK_EMP_ANES = #{pkEmpAnes,jdbcType=VARCHAR},
			</if>
			<if test="anesDocName != null">
				ANES_DOC_NAME = #{anesDocName,jdbcType=VARCHAR},
			</if>
			<if test="asaCode != null">
				ASA_CODE = #{asaCode,jdbcType=VARCHAR},
			</if>
			<if test="asaName != null">
				ASA_NAME = #{asaName,jdbcType=VARCHAR},
			</if>
			<if test="nnisCode != null">
				NNIS_CODE = #{nnisCode,jdbcType=VARCHAR},
			</if>
			<if test="nnisName != null">
				NNIS_NAME = #{nnisName,jdbcType=VARCHAR},
			</if>
			<if test="flagElective != null">
				FLAG_ELECTIVE = #{flagElective,jdbcType=CHAR},
			</if>
			<if test="delFlag != null">
				DEL_FLAG = #{delFlag,jdbcType=CHAR},
			</if>
			<if test="remark != null">
				REMARK = #{remark,jdbcType=VARCHAR},
			</if>
			<if test="creator != null">
				CREATOR = #{creator,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				CREATE_TIME = #{createTime,jdbcType=DATE},
			</if>
			<if test="ts != null">
				TS = #{ts,jdbcType=DATE},
			</if>
		</set>
		WHERE
		PK_OPS = #{pkOps,jdbcType=CHAR}
	</update>
	<delete id="deleteEmrHomePageDiags">
		DELETE
		FROM
		EMR_HOME_PAGE_DIAGS
		WHERE
		PK_PAGEDIAG = #{pkPagediag,jdbcType=CHAR}
	</delete>

	<insert id="saveEmrHomePageDiags"
		parameterType="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePageDiags">
		INSERT INTO EMR_HOME_PAGE_DIAGS
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="pkPagediag != null">
				PK_PAGEDIAG,
			</if>
			<if test="pkOrg != null">
				PK_ORG,
			</if>
			<if test="pkPage != null">
				PK_PAGE,
			</if>
			<if test="seqNo != null">
				SEQ_NO,
			</if>
			<if test="dtDiagType != null">
				DT_DIAG_TYPE,
			</if>
			<if test="pkDiag != null">
				PK_DIAG,
			</if>
			<if test="diagCode != null">
				DIAG_CODE,
			</if>
			<if test="diagName != null">
				DIAG_NAME,
			</if>
			<if test="diagDesc != null">
				DIAG_DESC,
			</if>
			<if test="admitCondCode != null">
				ADMIT_COND_CODE,
			</if>
			<if test="admitCondName != null">
				ADMIT_COND_NAME,
			</if>
			<if test="flagPrimary != null">
				FLAG_PRIMARY,
			</if>
			<if test="delFlag != null">
				DEL_FLAG,
			</if>
			<if test="remark != null">
				REMARK,
			</if>
			<if test="creator != null">
				CREATOR,
			</if>
			<if test="createTime != null">
				CREATE_TIME,
			</if>
			<if test="ts != null">
				TS,
			</if>
			<if test="outcomeCode != null">
				OUTCOME_CODE,
			</if>
			<if test="outcomeName != null">
				OUTCOME_NAME,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="pkPagediag != null">
				#{pkPagediag,jdbcType=CHAR},
			</if>
			<if test="pkOrg != null">
				#{pkOrg,jdbcType=VARCHAR},
			</if>
			<if test="pkPage != null">
				#{pkPage,jdbcType=VARCHAR},
			</if>
			<if test="seqNo != null">
				#{seqNo,jdbcType=DECIMAL},
			</if>
			<if test="dtDiagType != null">
				#{dtDiagType,jdbcType=VARCHAR},
			</if>
			<if test="pkDiag != null">
				#{pkDiag,jdbcType=VARCHAR},
			</if>
			<if test="diagCode != null">
				#{diagCode,jdbcType=VARCHAR},
			</if>
			<if test="diagName != null">
				#{diagName,jdbcType=VARCHAR},
			</if>
			<if test="diagDesc != null">
				#{diagDesc,jdbcType=VARCHAR},
			</if>
			<if test="admitCondCode != null">
				#{admitCondCode,jdbcType=VARCHAR},
			</if>
			<if test="admitCondName != null">
				#{admitCondName,jdbcType=VARCHAR},
			</if>
			<if test="flagPrimary != null">
				#{flagPrimary,jdbcType=CHAR},
			</if>
			<if test="delFlag != null">
				#{delFlag,jdbcType=CHAR},
			</if>
			<if test="remark != null">
				#{remark,jdbcType=VARCHAR},
			</if>
			<if test="creator != null">
				#{creator,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				#{createTime,jdbcType=DATE},
			</if>
			<if test="ts != null">
				#{ts,jdbcType=DATE},
			</if>
		    <if test="outcomeCode != null">
				#{outcomeCode,jdbcType=VARCHAR},
			</if>
			<if test="outcomeName != null">
				#{outcomeName,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>

	<update id="updateEmrHomePageDiags"
		parameterType="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePageDiags">
		UPDATE EMR_HOME_PAGE_DIAGS
		<set>
			<if test="pkPagediag != null">
				PK_PAGEDIAG = #{pkPagediag,jdbcType=CHAR},
			</if>
			<if test="pkOrg != null">
				PK_ORG = #{pkOrg,jdbcType=VARCHAR},
			</if>
			<if test="pkPage != null">
				PK_PAGE = #{pkPage,jdbcType=VARCHAR},
			</if>
			<if test="seqNo != null">
				SEQ_NO = #{seqNo,jdbcType=DECIMAL},
			</if>
			<if test="dtDiagType != null">
				DT_DIAG_TYPE = #{dtDiagType,jdbcType=VARCHAR},
			</if>
			<if test="pkDiag != null">
				PK_DIAG = #{pkDiag,jdbcType=VARCHAR},
			</if>
			<if test="diagCode != null">
				DIAG_CODE = #{diagCode,jdbcType=VARCHAR},
			</if>
			<if test="diagName != null">
				DIAG_NAME = #{diagName,jdbcType=VARCHAR},
			</if>
			<if test="diagDesc != null">
				DIAG_DESC = #{diagDesc,jdbcType=VARCHAR},
			</if>
			<if test="admitCondCode != null">
				ADMIT_COND_CODE = #{admitCondCode,jdbcType=VARCHAR},
			</if>
			<if test="admitCondName != null">
				ADMIT_COND_NAME = #{admitCondName,jdbcType=VARCHAR},
			</if>
			<if test="flagPrimary != null">
				FLAG_PRIMARY = #{flagPrimary,jdbcType=CHAR},
			</if>
			<if test="delFlag != null">
				DEL_FLAG = #{delFlag,jdbcType=CHAR},
			</if>
			<if test="remark != null">
				REMARK = #{remark,jdbcType=VARCHAR},
			</if>
			<if test="creator != null">
				CREATOR = #{creator,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				CREATE_TIME = #{createTime,jdbcType=DATE},
			</if>
			<if test="ts != null">
				TS = #{ts,jdbcType=DATE},
			</if>
			<if test="outcomeCode != null">
				OUTCOME_CODE = #{outcomeCode,jdbcType=VARCHAR},
			</if>
			<if test="outcomeName != null">
				OUTCOME_NAME = #{outcomeName,jdbcType=VARCHAR},
			</if>
		</set>
		WHERE
		PK_PAGEDIAG = #{pkPagediag,jdbcType=CHAR}
	</update>
	<delete id="deleteEmrHomePageCharges">
		DELETE
		FROM
		EMR_HOME_PAGE_CHARGES
		WHERE
		PK_CHARGE = #{pkCharge,jdbcType=CHAR}
	</delete>

	<insert id="saveEmrHomePageCharges"
		parameterType="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePageCharges">
		INSERT INTO EMR_HOME_PAGE_CHARGES
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="pkCharge != null">
				PK_CHARGE,
			</if>
			<if test="pkOrg != null">
				PK_ORG,
			</if>
			<if test="pkPage != null">
				PK_PAGE,
			</if>
			<if test="seqNo != null">
				SEQ_NO,
			</if>
			<if test="itemCode != null">
				ITEM_CODE,
			</if>
			<if test="itemName != null">
				ITEM_NAME,
			</if>
			<if test="itemAmount != null">
				ITEM_AMOUNT,
			</if>
			<if test="delFlag != null">
				DEL_FLAG,
			</if>
			<if test="remark != null">
				REMARK,
			</if>
			<if test="creator != null">
				CREATOR,
			</if>
			<if test="createTime != null">
				CREATE_TIME,
			</if>
			<if test="ts != null">
				TS,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="pkCharge != null">
				#{pkCharge,jdbcType=CHAR},
			</if>
			<if test="pkOrg != null">
				#{pkOrg,jdbcType=VARCHAR},
			</if>
			<if test="pkPage != null">
				#{pkPage,jdbcType=VARCHAR},
			</if>
			<if test="seqNo != null">
				#{seqNo,jdbcType=DECIMAL},
			</if>
			<if test="itemCode != null">
				#{itemCode,jdbcType=VARCHAR},
			</if>
			<if test="itemName != null">
				#{itemName,jdbcType=VARCHAR},
			</if>
			<if test="itemAmount != null">
				#{itemAmount,jdbcType=DECIMAL},
			</if>
			<if test="delFlag != null">
				#{delFlag,jdbcType=CHAR},
			</if>
			<if test="remark != null">
				#{remark,jdbcType=VARCHAR},
			</if>
			<if test="creator != null">
				#{creator,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				#{createTime,jdbcType=DATE},
			</if>
			<if test="ts != null">
				#{ts,jdbcType=DATE},
			</if>
		</trim>
	</insert>
	<update id="updateEmrHomePageCharges"
		parameterType="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePageCharges">
		UPDATE EMR_HOME_PAGE_CHARGES
		<set>
			<if test="pkCharge != null">
				PK_CHARGE = #{pkCharge,jdbcType=CHAR},
			</if>
			<if test="pkOrg != null">
				PK_ORG = #{pkOrg,jdbcType=VARCHAR},
			</if>
			<if test="pkPage != null">
				PK_PAGE = #{pkPage,jdbcType=VARCHAR},
			</if>
			<if test="seqNo != null">
				SEQ_NO = #{seqNo,jdbcType=DECIMAL},
			</if>
			<if test="itemCode != null">
				ITEM_CODE = #{itemCode,jdbcType=VARCHAR},
			</if>
			<if test="itemName != null">
				ITEM_NAME = #{itemName,jdbcType=VARCHAR},
			</if>
			<if test="itemAmount != null">
				ITEM_AMOUNT = #{itemAmount,jdbcType=DECIMAL},
			</if>
			<if test="delFlag != null">
				DEL_FLAG = #{delFlag,jdbcType=CHAR},
			</if>
			<if test="remark != null">
				REMARK = #{remark,jdbcType=VARCHAR},
			</if>
			<if test="creator != null">
				CREATOR = #{creator,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				CREATE_TIME = #{createTime,jdbcType=DATE},
			</if>
			<if test="ts != null">
				TS = #{ts,jdbcType=DATE},
			</if>
		</set>
		WHERE
		PK_CHARGE = #{pkCharge,jdbcType=CHAR}
	</update>
	<resultMap id="ResultMapPageDiags"
		type="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePageDiags">
		<id column="PK_PAGEDIAG" jdbcType="CHAR" property="pkPagediag" />
		<result column="PK_ORG" jdbcType="VARCHAR" property="pkOrg" />
		<result column="PK_PAGE" jdbcType="VARCHAR" property="pkPage" />
		<result column="SEQ_NO" jdbcType="DECIMAL" property="seqNo" />
		<result column="DT_DIAG_TYPE" jdbcType="VARCHAR" property="dtDiagType" />
		<result column="PK_DIAG" jdbcType="VARCHAR" property="pkDiag" />
		<result column="DIAG_CODE" jdbcType="VARCHAR" property="diagCode" />
		<result column="DIAG_NAME" jdbcType="VARCHAR" property="diagName" />
		<result column="DIAG_DESC" jdbcType="VARCHAR" property="diagDesc" />
		<result column="ADMIT_COND_CODE" jdbcType="VARCHAR" property="admitCondCode" />
		<result column="ADMIT_COND_NAME" jdbcType="VARCHAR" property="admitCondName" />
		<result column="FLAG_PRIMARY" jdbcType="CHAR" property="flagPrimary" />
		<result column="DEL_FLAG" jdbcType="CHAR" property="delFlag" />
		<result column="REMARK" jdbcType="VARCHAR" property="remark" />
		<result column="CREATOR" jdbcType="VARCHAR" property="creator" />
		<result column="CREATE_TIME" jdbcType="DATE" property="createTime" />
		<result column="OUTCOME_CODE" jdbcType="VARCHAR" property="outComeCode" />
		<result column="OUTCOME_NAME" jdbcType="VARCHAR" property="outComeName" />
		<result column="TS" jdbcType="DATE" property="ts" />
	</resultMap>
	<select id="queryHomePageDiags" resultMap="ResultMapPageDiags">
		SELECT
		*
		FROM
		EMR_HOME_PAGE_DIAGS
		WHERE
		PK_PAGE = #{pkPage,jdbcType=VARCHAR}
	</select>
	<resultMap id="ResultMapPageOps"
		type="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePageOps">
		<id column="PK_OPS" jdbcType="CHAR" property="pkOps" />
		<result column="PK_ORG" jdbcType="VARCHAR" property="pkOrg" />
		<result column="PK_PAGE" jdbcType="VARCHAR" property="pkPage" />
		<result column="SEQ_NO" jdbcType="DECIMAL" property="seqNo" />
		<result column="OP_CODE" jdbcType="VARCHAR" property="opCode" />
		<result column="OP_NAME" jdbcType="VARCHAR" property="opName" />
		<result column="OP_DATE" jdbcType="DATE" property="opDate" />
		<result column="GRADE_CODE" jdbcType="VARCHAR" property="gradeCode" />
		<result column="GRADE_NAME" jdbcType="VARCHAR" property="gradeName" />
		<result column="PK_EMP_OP" jdbcType="VARCHAR" property="pkEmpOp" />
		<result column="OP_DOC_NAME" jdbcType="VARCHAR" property="opDocName" />
		<result column="PK_EMP_OPI" jdbcType="VARCHAR" property="pkEmpOpi" />
		<result column="OPI_NAME" jdbcType="VARCHAR" property="opiName" />
		<result column="PK_EMP_OPII" jdbcType="VARCHAR" property="pkEmpOpii" />
		<result column="OPII_NAME" jdbcType="VARCHAR" property="opiiName" />
		<result column="INCISION_TYPE_CODE" jdbcType="VARCHAR"
			property="incisionTypeCode" />
		<result column="INCISION_TYPE_NAME" jdbcType="VARCHAR"
			property="incisionTypeName" />
		<result column="HEAL_GRADE_CODE" jdbcType="VARCHAR" property="healGradeCode" />
		<result column="HEAL_GRADE_NAME" jdbcType="VARCHAR" property="healGradeName" />
		<result column="ANES_TYPE_CODE" jdbcType="VARCHAR" property="anesTypeCode" />
		<result column="ANES_TYPE_NAME" jdbcType="VARCHAR" property="anesTypeName" />
		<result column="PK_EMP_ANES" jdbcType="VARCHAR" property="pkEmpAnes" />
		<result column="ANES_DOC_NAME" jdbcType="VARCHAR" property="anesDocName" />
		<result column="ASA_CODE" jdbcType="VARCHAR" property="asaCode" />
		<result column="ASA_NAME" jdbcType="VARCHAR" property="asaName" />
		<result column="NNIS_CODE" jdbcType="VARCHAR" property="nnisCode" />
		<result column="NNIS_NAME" jdbcType="VARCHAR" property="nnisName" />
		<result column="FLAG_ELECTIVE" jdbcType="CHAR" property="flagElective" />
		<result column="DEL_FLAG" jdbcType="CHAR" property="delFlag" />
		<result column="REMARK" jdbcType="VARCHAR" property="remark" />
		<result column="CREATOR" jdbcType="VARCHAR" property="creator" />
		<result column="CREATE_TIME" jdbcType="DATE" property="createTime" />
		<result column="TS" jdbcType="DATE" property="ts" />
	</resultMap>
	<select id="queryHomePageOps" resultMap="ResultMapPageOps">
		SELECT
		*
		FROM
		EMR_HOME_PAGE_OPS
		WHERE
		PK_PAGE = #{pkPage,jdbcType=VARCHAR}
	</select>
	<resultMap id="ResultMapCharges"
		type="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePageCharges">
		<id column="PK_CHARGE" jdbcType="CHAR" property="pkCharge" />
		<result column="PK_ORG" jdbcType="VARCHAR" property="pkOrg" />
		<result column="PK_PAGE" jdbcType="VARCHAR" property="pkPage" />
		<result column="SEQ_NO" jdbcType="DECIMAL" property="seqNo" />
		<result column="ITEM_CODE" jdbcType="VARCHAR" property="itemCode" />
		<result column="ITEM_NAME" jdbcType="VARCHAR" property="itemName" />
		<result column="ITEM_AMOUNT" jdbcType="DECIMAL" property="itemAmount" />
		<result column="DEL_FLAG" jdbcType="CHAR" property="delFlag" />
		<result column="REMARK" jdbcType="VARCHAR" property="remark" />
		<result column="CREATOR" jdbcType="VARCHAR" property="creator" />
		<result column="CREATE_TIME" jdbcType="DATE" property="createTime" />
		<result column="TS" jdbcType="DATE" property="ts" />
	</resultMap>
	<select id="queryHomePageCharges" resultMap="ResultMapCharges">
		SELECT
		*
		FROM
		EMR_HOME_PAGE_CHARGES
		WHERE
		PK_PAGE = #{pkPage,jdbcType=VARCHAR}
	</select>
	<select id="queryEmrDocListByPvs" resultMap="ResultMapEmrMedRecWithXml">
		select rec.PK_REC,
		rec.PK_PATREC,
		rec.NAME,
		rec.SEQ_NO,
		rec.REC_DATE,
		rec.DESCRIBE,
		rec.PK_PI,
		rec.TIMES,
		rec.PK_PV,
		rec.PK_DEPT,
		rec.PK_WARD,
		rec.TYPE_CODE,
		rec.PK_TMP,
		rec.PK_DOC,
		rec.FLAG_AUDIT,
		rec.EU_AUDIT_LEVEL,
		rec.AUDIT_LEVEL_SET,
		rec.EU_DOC_STATUS,
		rec.EU_AUDIT_STATUS,
		rec.FLAG_AUDIT_FINISH,
		rec.SUBMIT_DATE,
		rec.PK_EMP_INTERN,
		rec.INTERN_SIGN_DATE,
		rec.PK_EMP_REFER_ACT,
		rec.PK_EMP_REFER,
		rec.REFER_AUDIT_DATE,
		rec.REFER_SIGN_DATE,
		rec.PK_EMP_CONSULT_ACT,
		rec.PK_EMP_CONSULT,
		rec.CONSULT_AUDIT_DATE,
		rec.CONSULT_SIGN_DATE,
		rec.PK_EMP_DIRECTOR_ACT,
		rec.PK_EMP_DIRECTOR,
		rec.DIRECTOR_AUDIT_DATE,
		rec.DIRECTOR_SIGN_DATE,
		rec.FLAG_PRINT,
		rec.DEL_FLAG,
		rec.REMARK,
		rec.CREATOR,
		rec.CREATE_TIME,
		doc.doc_data,
		doc.doc_xml
		from emr_med_rec rec
		inner join emr_med_doc doc
		on rec.pk_doc = doc.pk_doc
		where nvl(rec.del_flag,'0')='0' and rec.pk_pv
		in
		<foreach item="item" index="index" collection="list" open="("
			separator="," close=")">
			#{item}
		</foreach>
	</select>

	<resultMap type="java.util.HashMap" id="resultMapDiag">
		<result column="pk" property="pk" jdbcType="VARCHAR" />
		<result column="code" property="code" jdbcType="VARCHAR" />
		<result column="name" property="name" jdbcType="VARCHAR" />
	</resultMap>
	<select id="queryPatHisDiags" statementType="CALLABLE"
		parameterType="java.util.Map" resultMap="resultMapDiag">
		{call
		emr_proc_get_his_diags(#{pkPv,mode=IN,jdbcType=VARCHAR},#{diagType,mode=IN,jdbcType=VARCHAR},#{mainFlag,mode=IN,jdbcType=VARCHAR},#{result,jdbcType=CURSOR,mode=OUT,javaType=ResultSet,
		resultMap=resultMapDiag})}
	</select>
	<select id="queryPatHisDiagsSql" statementType="CALLABLE"
		parameterType="java.util.Map" resultMap="resultMapDiag">
		{call
		emr_proc_get_his_diags(#{pkPv,mode=IN,jdbcType=VARCHAR},#{diagType,mode=IN,jdbcType=VARCHAR},#{mainFlag,mode=IN,jdbcType=VARCHAR})}
	</select>
	<resultMap type="java.util.HashMap" id="resultMapStaff">
		<result column="pk_emp" property="pkEmp" jdbcType="VARCHAR" />
		<result column="name_emp" property="nameEmp" jdbcType="VARCHAR" />
		<result column="dt_role" property="dtRole" jdbcType="VARCHAR" />
	</resultMap>
	<select id="queryPatHisStaff" statementType="CALLABLE"
		parameterType="java.util.Map" resultMap="resultMapStaff">
		{call
		emr_proc_get_his_staff(#{pkPv,mode=IN,jdbcType=VARCHAR},#{pkDept,mode=IN,jdbcType=VARCHAR},#{pkDeptNs,mode=IN,jdbcType=VARCHAR},#{result,jdbcType=CURSOR,mode=OUT,javaType=ResultSet,
		resultMap=resultMapStaff})}
	</select>
	<select id="queryPatHisStaffSql" statementType="CALLABLE"
		parameterType="java.util.Map" resultMap="resultMapStaff">
		{call
		emr_proc_get_his_staff(#{pkPv,mode=IN,jdbcType=VARCHAR},#{pkDept,mode=IN,jdbcType=VARCHAR},#{pkDeptNs,mode=IN,jdbcType=VARCHAR})}
	</select>
	<update id="updateProc" statementType="CALLABLE" parameterType="java.util.Map">
   		{call proc_ba_save_data(#{codeIp,mode=IN,jdbcType=VARCHAR},#{codePv,mode=IN,jdbcType=VARCHAR},#{times,mode=IN,jdbcType=VARCHAR},#{name,mode=IN,jdbcType=VARCHAR})}
	</update>
	
    <update id="updateProcbaSub" statementType="CALLABLE" parameterType="java.util.Map">
   		{call proc_ba_submit_data(#{codeIp,mode=IN,jdbcType=VARCHAR},#{codePv,mode=IN,jdbcType=VARCHAR},#{times,mode=IN,jdbcType=VARCHAR},#{name,mode=IN,jdbcType=VARCHAR})}
	</update>
	
	<update id="updateProcbaSubIcd" statementType="CALLABLE" parameterType="java.util.Map">
   		{call proc_ba_save_data_icd(#{codeIp,mode=IN,jdbcType=VARCHAR},#{codePv,mode=IN,jdbcType=VARCHAR},#{times,mode=IN,jdbcType=VARCHAR},#{name,mode=IN,jdbcType=VARCHAR},#{empCode,mode=IN,jdbcType=VARCHAR},#{empName,mode=IN,jdbcType=VARCHAR})}
	</update>
	<select id="queryPvDiagVos" resultType="com.zebone.nhis.emr.rec.rec.vo.PvDiagVo"
		parameterType="java.lang.String">
		SELECT
		pv.pk_diag,
		diag.diagcode,
		diag.diagname,
		COUNT (1) AS SUM,
		0 img_index
		FROM
		pv_diag pv,
		bd_term_diag diag
		WHERE
		pv.pk_diag = diag.pk_diag
		AND pv.del_flag != '1'
		AND pv.pk_pv = #{pkPv,jdbcType=VARCHAR}
		GROUP BY pv.pk_diag,diag.diagcode,diag.diagname
		ORDER BY sum DESC
	</select>
	<select id="queryPvDiagVosPage" resultType="com.zebone.nhis.emr.rec.rec.vo.PvDiagVo"
		parameterType="java.lang.String">
		SELECT pv.pk_diag,
		       pv.code_icd diagcode,
		       nvl(pv.name_diag,pv.desc_diag) diagname,
		       0 img_index,
		       pv.flag_maj,
		       pv.dt_diagtype,
		       pv.eu_admcon,
		       nvl(pv.desc_diag,pv.name_diag) diag_desc,
		       pv.pk_pvdiag,
		       pv.pk_father,
		       pv.sort_no,
		       pv.pk_pv
		  FROM pv_diag pv 
		 WHERE pv.del_flag != '1' 
		   AND pv.pk_pv = #{pkPv,jdbcType=VARCHAR}
		order by case when pv.pk_father is null then pv.sort_no when pv.pk_father is not null then (select sort_no from pv_diag where pk_pvdiag=pv.pk_father) end,
          case when pv.pk_father is null then 0 when pv.pk_father is not null then pv.sort_no end,
          pv.code_icd<!-- pv.dt_diagtype, pv.flag_maj desc, pv.sort_no  -->
	</select>
	<select id="queryPvDiagVosPageBak" resultType="com.zebone.nhis.emr.rec.rec.vo.PvDiagVo"
		parameterType="java.lang.String">
		SELECT pv.pk_diag,
		       nvl(diag.code,pv.code_icd) diagcode,
		       nvl(nvl(diag.name,pv.name_diag),pv.desc_diag) diagname,
		       0 img_index,
		       pv.flag_maj,
		       pv.dt_diagtype,
		       pv.eu_admcon,
		       nvl(pv.desc_diag,pv.name_diag) diag_desc,
		       pv.pk_pvdiag,
		       pv.pk_father,
		       pv.sort_no,
		       pv.pk_pv
		  FROM pv_diag pv left outer join
		       view_emr_diag_list diag on pv.pk_diag = diag.pk_diag
		 WHERE pv.del_flag != '1' 
		   AND pv.pk_pv = #{pkPv,jdbcType=VARCHAR}
		order by case when pv.pk_father is null then pv.sort_no when pv.pk_father is not null then (select sort_no from pv_diag where pk_pvdiag=pv.pk_father) end,
          case when pv.pk_father is null then 0 when pv.pk_father is not null then pv.sort_no end,
          pv.code_icd<!-- pv.dt_diagtype, pv.flag_maj desc, pv.sort_no  -->
	</select>
	<select id="queryPvDiags" resultType="DynaBean" parameterType="java.lang.String">
		select d.*, 
		       '00' dt_system, 
		       nvl(nvl(z.name,d.name_diag),d.desc_diag) as name_diag, 
		       nvl(z.code,d.code_icd) as code_diag
		  from pv_diag d
		  left outer join view_emr_diag_list z
		    on d.pk_diag = z.pk_diag
		  left outer join bd_cndiag bcd
		    on d.pk_diag=bcd.pk_diag  
		 where d.del_flag = '0'
		   and d.pk_pv = #{pkPv,jdbcType=VARCHAR}
		order by d.dt_diagtype,d.sort_no,z.code,d.desc_diag,d.pk_pvdiag
	</select>
	<select id="queryCnDiags" resultType="DynaBean" parameterType="java.lang.String">
		select * from cn_diag where del_flag='0' and
		pk_pv=#{pk_pv,jdbcType=CHAR} order by date_diag desc
	</select>
	<resultMap id="ResultMapEmrDoctor"
		type="com.zebone.nhis.common.module.emr.rec.dict.EmrDoctor">
		<id column="PK_EMP" jdbcType="CHAR" property="pkEmp" />
		<result column="PK_ORG" jdbcType="VARCHAR" property="pkOrg" />
		<result column="CODE" jdbcType="VARCHAR" property="code" />
		<result column="NAME" jdbcType="VARCHAR" property="name" />
		<result column="PY_CODE" jdbcType="VARCHAR" property="pyCode" />
		<result column="D_CODE" jdbcType="VARCHAR" property="dCode" />
		<result column="GB_CODE" jdbcType="VARCHAR" property="gbCode" />
		<result column="CONSULT" jdbcType="VARCHAR" property="consult" />
		<result column="DIRECTOR" jdbcType="VARCHAR" property="director" />
		<result column="SIGN_PWD" jdbcType="VARCHAR" property="signPwd" />
		<result column="SIGN_IMAGE" jdbcType="BLOB" property="signImage" />
		<result column="DEL_FLAG" jdbcType="CHAR" property="delFlag" />
		<result column="REMARK" jdbcType="VARCHAR" property="remark" />
		<result column="CREATOR" jdbcType="VARCHAR" property="creator" />
		<result column="CREATE_TIME" jdbcType="DATE" property="createTime" />
		<result column="TS" jdbcType="DATE" property="ts" />
		<result column="CONSULT_NAME" jdbcType="VARCHAR" property="consultName" />
		<result column="DIRECTOR_NAME" jdbcType="VARCHAR" property="directorName" />
	</resultMap>
	<select id="queryEmrDoctorByPk" resultMap="ResultMapEmrDoctor">
		SELECT
		*
		FROM
		EMR_DOCTOR
		WHERE del_flag='0'
		<if test="pkEmp != null">
			and PK_EMP = #{pkEmp,jdbcType=VARCHAR}
		</if>
		<if test="pkWg != null">
			and PK_WG = #{pkWg,jdbcType=VARCHAR}
		</if>		
	</select>
	<select id="queryEmrEmpListByPk" resultMap="ResultMapEmpList">
		SELECT
		*
		FROM
		view_emr_emp_list
		WHERE
		PK_EMP = #{pkEmp,jdbcType=CHAR}
	</select>
	<resultMap id="ResultMapHomePageOr"
		type="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePageOr">
		<id column="PK_PAGEOR" jdbcType="CHAR" property="pkPageor" />
		<result column="PK_ORG" jdbcType="VARCHAR" property="pkOrg" />
		<result column="PK_PAGE" jdbcType="VARCHAR" property="pkPage" />
		<result column="STAGE_TYPE_CODE" jdbcType="VARCHAR" property="stageTypeCode" />
		<result column="STAGE_TYPE_NAME" jdbcType="VARCHAR" property="stageTypeName" />
		<result column="STAGE_T" jdbcType="VARCHAR" property="stageT" />
		<result column="STAGE_N" jdbcType="VARCHAR" property="stageN" />
		<result column="STAGE_M" jdbcType="VARCHAR" property="stageM" />
		<result column="STAGE_CODE" jdbcType="VARCHAR" property="stageCode" />
		<result column="STAGE_NAME" jdbcType="VARCHAR" property="stageName" />
		<result column="RADIOTH_MODE_CODE" jdbcType="VARCHAR" property="radiothModeCode" />
		<result column="RADIOTH_MODE_NAME" jdbcType="VARCHAR" property="radiothModeName" />
		<result column="RADIOTH_PROGR_CODE" jdbcType="VARCHAR"
			property="radiothProgrCode" />
		<result column="RADIOTH_PROGR_NAME" jdbcType="VARCHAR"
			property="radiothProgrName" />
		<result column="RADIOTH_DEVICE_CODE" jdbcType="VARCHAR"
			property="radiothDeviceCode" />
		<result column="RADIOTH_DEVICE_NAME" jdbcType="VARCHAR"
			property="radiothDeviceName" />
		<result column="PRI_DOSE" jdbcType="DECIMAL" property="priDose" />
		<result column="PRI_TIMES" jdbcType="DECIMAL" property="priTimes" />
		<result column="PRI_DAYS" jdbcType="DECIMAL" property="priDays" />
		<result column="PRI_DATE_BEGIN" jdbcType="DATE" property="priDateBegin" />
		<result column="PRI_DATE_END" jdbcType="DATE" property="priDateEnd" />
		<result column="LYM_DOSE" jdbcType="DECIMAL" property="lymDose" />
		<result column="LYM_TIMES" jdbcType="DECIMAL" property="lymTimes" />
		<result column="LYM_DAYS" jdbcType="DECIMAL" property="lymDays" />
		<result column="LYM_DATE_BEGIN" jdbcType="DATE" property="lymDateBegin" />
		<result column="LYM_DATE_END" jdbcType="DATE" property="lymDateEnd" />
		<result column="MET_NAME" jdbcType="VARCHAR" property="metName" />
		<result column="MET_DOSE" jdbcType="DECIMAL" property="metDose" />
		<result column="MET_TIMES" jdbcType="DECIMAL" property="metTimes" />
		<result column="MET_DAYS" jdbcType="DECIMAL" property="metDays" />
		<result column="MET_DATE_BEGIN" jdbcType="DATE" property="metDateBegin" />
		<result column="MET_DATE_END" jdbcType="DATE" property="metDateEnd" />
		<result column="CHEM_MODE_CODE" jdbcType="VARCHAR" property="chemModeCode" />
		<result column="CHEM_MODE_NAME" jdbcType="VARCHAR" property="chemModeName" />
		<result column="CHEM_METHOD_CODE" jdbcType="VARCHAR" property="chemMethodCode" />
		<result column="CHEM_METHOD_NAME" jdbcType="VARCHAR" property="chemMethodName" />
		<result column="DEL_FLAG" jdbcType="CHAR" property="delFlag" />
		<result column="REMARK" jdbcType="VARCHAR" property="remark" />
		<result column="CREATOR" jdbcType="VARCHAR" property="creator" />
		<result column="CREATE_TIME" jdbcType="DATE" property="createTime" />
		<result column="TS" jdbcType="DATE" property="ts" />
	</resultMap>
	<select id="getEmrHomePageOrById" resultMap="ResultMapHomePageOr">
		SELECT
		*
		FROM
		EMR_HOME_PAGE_OR
		WHERE
		PK_PAGEOR = #{pkPageor,jdbcType=CHAR}
	</select>

	<select id="findAllEmrHomePageOr" resultMap="ResultMapHomePageOr">
		SELECT * FROM EMR_HOME_PAGE_OR
	</select>

	<delete id="deleteEmrHomePageOr">
		DELETE
		FROM
		EMR_HOME_PAGE_OR
		WHERE
		PK_PAGEOR = #{pkPageor,jdbcType=CHAR}
	</delete>

	<insert id="saveEmrHomePageOr"
		parameterType="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePageOr">
		INSERT INTO EMR_HOME_PAGE_OR
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="pkPageor != null">
				PK_PAGEOR,
			</if>
			<if test="pkOrg != null">
				PK_ORG,
			</if>
			<if test="pkPage != null">
				PK_PAGE,
			</if>
			<if test="stageTypeCode != null">
				STAGE_TYPE_CODE,
			</if>
			<if test="stageTypeName != null">
				STAGE_TYPE_NAME,
			</if>
			<if test="stageT != null">
				STAGE_T,
			</if>
			<if test="stageN != null">
				STAGE_N,
			</if>
			<if test="stageM != null">
				STAGE_M,
			</if>
			<if test="stageCode != null">
				STAGE_CODE,
			</if>
			<if test="stageName != null">
				STAGE_NAME,
			</if>
			<if test="radiothModeCode != null">
				RADIOTH_MODE_CODE,
			</if>
			<if test="radiothModeName != null">
				RADIOTH_MODE_NAME,
			</if>
			<if test="radiothProgrCode != null">
				RADIOTH_PROGR_CODE,
			</if>
			<if test="radiothProgrName != null">
				RADIOTH_PROGR_NAME,
			</if>
			<if test="radiothDeviceCode != null">
				RADIOTH_DEVICE_CODE,
			</if>
			<if test="radiothDeviceName != null">
				RADIOTH_DEVICE_NAME,
			</if>
			<if test="priDose != null">
				PRI_DOSE,
			</if>
			<if test="priTimes != null">
				PRI_TIMES,
			</if>
			<if test="priDays != null">
				PRI_DAYS,
			</if>
			<if test="priDateBegin != null">
				PRI_DATE_BEGIN,
			</if>
			<if test="priDateEnd != null">
				PRI_DATE_END,
			</if>
			<if test="lymDose != null">
				LYM_DOSE,
			</if>
			<if test="lymTimes != null">
				LYM_TIMES,
			</if>
			<if test="lymDays != null">
				LYM_DAYS,
			</if>
			<if test="lymDateBegin != null">
				LYM_DATE_BEGIN,
			</if>
			<if test="lymDateEnd != null">
				LYM_DATE_END,
			</if>
			<if test="metName != null">
				MET_NAME,
			</if>
			<if test="metDose != null">
				MET_DOSE,
			</if>
			<if test="metTimes != null">
				MET_TIMES,
			</if>
			<if test="metDays != null">
				MET_DAYS,
			</if>
			<if test="metDateBegin != null">
				MET_DATE_BEGIN,
			</if>
			<if test="metDateEnd != null">
				MET_DATE_END,
			</if>
			<if test="chemModeCode != null">
				CHEM_MODE_CODE,
			</if>
			<if test="chemModeName != null">
				CHEM_MODE_NAME,
			</if>
			<if test="chemMethodCode != null">
				CHEM_METHOD_CODE,
			</if>
			<if test="chemMethodName != null">
				CHEM_METHOD_NAME,
			</if>
			<if test="delFlag != null">
				DEL_FLAG,
			</if>
			<if test="remark != null">
				REMARK,
			</if>
			<if test="creator != null">
				CREATOR,
			</if>
			<if test="createTime != null">
				CREATE_TIME,
			</if>
			<if test="ts != null">
				TS,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="pkPageor != null">
				#{pkPageor,jdbcType=CHAR},
			</if>
			<if test="pkOrg != null">
				#{pkOrg,jdbcType=VARCHAR},
			</if>
			<if test="pkPage != null">
				#{pkPage,jdbcType=VARCHAR},
			</if>
			<if test="stageTypeCode != null">
				#{stageTypeCode,jdbcType=VARCHAR},
			</if>
			<if test="stageTypeName != null">
				#{stageTypeName,jdbcType=VARCHAR},
			</if>
			<if test="stageT != null">
				#{stageT,jdbcType=VARCHAR},
			</if>
			<if test="stageN != null">
				#{stageN,jdbcType=VARCHAR},
			</if>
			<if test="stageM != null">
				#{stageM,jdbcType=VARCHAR},
			</if>
			<if test="stageCode != null">
				#{stageCode,jdbcType=VARCHAR},
			</if>
			<if test="stageName != null">
				#{stageName,jdbcType=VARCHAR},
			</if>
			<if test="radiothModeCode != null">
				#{radiothModeCode,jdbcType=VARCHAR},
			</if>
			<if test="radiothModeName != null">
				#{radiothModeName,jdbcType=VARCHAR},
			</if>
			<if test="radiothProgrCode != null">
				#{radiothProgrCode,jdbcType=VARCHAR},
			</if>
			<if test="radiothProgrName != null">
				#{radiothProgrName,jdbcType=VARCHAR},
			</if>
			<if test="radiothDeviceCode != null">
				#{radiothDeviceCode,jdbcType=VARCHAR},
			</if>
			<if test="radiothDeviceName != null">
				#{radiothDeviceName,jdbcType=VARCHAR},
			</if>
			<if test="priDose != null">
				#{priDose,jdbcType=DECIMAL},
			</if>
			<if test="priTimes != null">
				#{priTimes,jdbcType=DECIMAL},
			</if>
			<if test="priDays != null">
				#{priDays,jdbcType=DECIMAL},
			</if>
			<if test="priDateBegin != null">
				#{priDateBegin,jdbcType=DATE},
			</if>
			<if test="priDateEnd != null">
				#{priDateEnd,jdbcType=DATE},
			</if>
			<if test="lymDose != null">
				#{lymDose,jdbcType=DECIMAL},
			</if>
			<if test="lymTimes != null">
				#{lymTimes,jdbcType=DECIMAL},
			</if>
			<if test="lymDays != null">
				#{lymDays,jdbcType=DECIMAL},
			</if>
			<if test="lymDateBegin != null">
				#{lymDateBegin,jdbcType=DATE},
			</if>
			<if test="lymDateEnd != null">
				#{lymDateEnd,jdbcType=DATE},
			</if>
			<if test="metName != null">
				#{metName,jdbcType=VARCHAR},
			</if>
			<if test="metDose != null">
				#{metDose,jdbcType=DECIMAL},
			</if>
			<if test="metTimes != null">
				#{metTimes,jdbcType=DECIMAL},
			</if>
			<if test="metDays != null">
				#{metDays,jdbcType=DECIMAL},
			</if>
			<if test="metDateBegin != null">
				#{metDateBegin,jdbcType=DATE},
			</if>
			<if test="metDateEnd != null">
				#{metDateEnd,jdbcType=DATE},
			</if>
			<if test="chemModeCode != null">
				#{chemModeCode,jdbcType=VARCHAR},
			</if>
			<if test="chemModeName != null">
				#{chemModeName,jdbcType=VARCHAR},
			</if>
			<if test="chemMethodCode != null">
				#{chemMethodCode,jdbcType=VARCHAR},
			</if>
			<if test="chemMethodName != null">
				#{chemMethodName,jdbcType=VARCHAR},
			</if>
			<if test="delFlag != null">
				#{delFlag,jdbcType=CHAR},
			</if>
			<if test="remark != null">
				#{remark,jdbcType=VARCHAR},
			</if>
			<if test="creator != null">
				#{creator,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				#{createTime,jdbcType=DATE},
			</if>
			<if test="ts != null">
				#{ts,jdbcType=DATE},
			</if>
		</trim>
	</insert>

	<update id="updateEmrHomePageOr"
		parameterType="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePageOr">
		UPDATE EMR_HOME_PAGE_OR
		<set>
			<if test="pkPageor != null">
				PK_PAGEOR = #{pkPageor,jdbcType=CHAR},
			</if>
			<if test="pkOrg != null">
				PK_ORG = #{pkOrg,jdbcType=VARCHAR},
			</if>
			<if test="pkPage != null">
				PK_PAGE = #{pkPage,jdbcType=VARCHAR},
			</if>
			<if test="stageTypeCode != null">
				STAGE_TYPE_CODE = #{stageTypeCode,jdbcType=VARCHAR},
			</if>
			<if test="stageTypeName != null">
				STAGE_TYPE_NAME = #{stageTypeName,jdbcType=VARCHAR},
			</if>
			<if test="stageT != null">
				STAGE_T = #{stageT,jdbcType=VARCHAR},
			</if>
			<if test="stageN != null">
				STAGE_N = #{stageN,jdbcType=VARCHAR},
			</if>
			<if test="stageM != null">
				STAGE_M = #{stageM,jdbcType=VARCHAR},
			</if>
			<if test="stageCode != null">
				STAGE_CODE = #{stageCode,jdbcType=VARCHAR},
			</if>
			<if test="stageName != null">
				STAGE_NAME = #{stageName,jdbcType=VARCHAR},
			</if>
			<if test="radiothModeCode != null">
				RADIOTH_MODE_CODE = #{radiothModeCode,jdbcType=VARCHAR},
			</if>
			<if test="radiothModeName != null">
				RADIOTH_MODE_NAME = #{radiothModeName,jdbcType=VARCHAR},
			</if>
			<if test="radiothProgrCode != null">
				RADIOTH_PROGR_CODE = #{radiothProgrCode,jdbcType=VARCHAR},
			</if>
			<if test="radiothProgrName != null">
				RADIOTH_PROGR_NAME = #{radiothProgrName,jdbcType=VARCHAR},
			</if>
			<if test="radiothDeviceCode != null">
				RADIOTH_DEVICE_CODE = #{radiothDeviceCode,jdbcType=VARCHAR},
			</if>
			<if test="radiothDeviceName != null">
				RADIOTH_DEVICE_NAME = #{radiothDeviceName,jdbcType=VARCHAR},
			</if>
			<if test="priDose != null">
				PRI_DOSE = #{priDose,jdbcType=DECIMAL},
			</if>
			<if test="priTimes != null">
				PRI_TIMES = #{priTimes,jdbcType=DECIMAL},
			</if>
			<if test="priDays != null">
				PRI_DAYS = #{priDays,jdbcType=DECIMAL},
			</if>
			<if test="priDateBegin != null">
				PRI_DATE_BEGIN = #{priDateBegin,jdbcType=DATE},
			</if>
			<if test="priDateEnd != null">
				PRI_DATE_END = #{priDateEnd,jdbcType=DATE},
			</if>
			<if test="lymDose != null">
				LYM_DOSE = #{lymDose,jdbcType=DECIMAL},
			</if>
			<if test="lymTimes != null">
				LYM_TIMES = #{lymTimes,jdbcType=DECIMAL},
			</if>
			<if test="lymDays != null">
				LYM_DAYS = #{lymDays,jdbcType=DECIMAL},
			</if>
			<if test="lymDateBegin != null">
				LYM_DATE_BEGIN = #{lymDateBegin,jdbcType=DATE},
			</if>
			<if test="lymDateEnd != null">
				LYM_DATE_END = #{lymDateEnd,jdbcType=DATE},
			</if>
			<if test="metName != null">
				MET_NAME = #{metName,jdbcType=VARCHAR},
			</if>
			<if test="metDose != null">
				MET_DOSE = #{metDose,jdbcType=DECIMAL},
			</if>
			<if test="metTimes != null">
				MET_TIMES = #{metTimes,jdbcType=DECIMAL},
			</if>
			<if test="metDays != null">
				MET_DAYS = #{metDays,jdbcType=DECIMAL},
			</if>
			<if test="metDateBegin != null">
				MET_DATE_BEGIN = #{metDateBegin,jdbcType=DATE},
			</if>
			<if test="metDateEnd != null">
				MET_DATE_END = #{metDateEnd,jdbcType=DATE},
			</if>
			<if test="chemModeCode != null">
				CHEM_MODE_CODE = #{chemModeCode,jdbcType=VARCHAR},
			</if>
			<if test="chemModeName != null">
				CHEM_MODE_NAME = #{chemModeName,jdbcType=VARCHAR},
			</if>
			<if test="chemMethodCode != null">
				CHEM_METHOD_CODE = #{chemMethodCode,jdbcType=VARCHAR},
			</if>
			<if test="chemMethodName != null">
				CHEM_METHOD_NAME = #{chemMethodName,jdbcType=VARCHAR},
			</if>
			<if test="delFlag != null">
				DEL_FLAG = #{delFlag,jdbcType=CHAR},
			</if>
			<if test="remark != null">
				REMARK = #{remark,jdbcType=VARCHAR},
			</if>
			<if test="creator != null">
				CREATOR = #{creator,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				CREATE_TIME = #{createTime,jdbcType=DATE},
			</if>
			<if test="ts != null">
				TS = #{ts,jdbcType=DATE},
			</if>
		</set>
		WHERE
		PK_PAGEOR = #{pkPageor,jdbcType=CHAR}
	</update>
	<resultMap id="ResultMapHomePageOrDt"
		type="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePageOrDt">
		<id column="PK_ORDT" jdbcType="CHAR" property="pkOrdt" />
		<result column="PK_ORG" jdbcType="VARCHAR" property="pkOrg" />
		<result column="PK_PAGEOR" jdbcType="VARCHAR" property="pkPageor" />
		<result column="SEQ_NO" jdbcType="DECIMAL" property="seqNo" />
		<result column="BEGIN_DATE" jdbcType="DATE" property="beginDate" />
		<result column="END_DATE" jdbcType="DATE" property="endDate" />
		<result column="DRUG_NAME" jdbcType="VARCHAR" property="drugName" />
		<result column="COURSE_CODE" jdbcType="VARCHAR" property="courseCode" />
		<result column="COURSE_NAME" jdbcType="VARCHAR" property="courseName" />
		<result column="EFFECT_CODE" jdbcType="VARCHAR" property="effectCode" />
		<result column="EFFECT_NAME" jdbcType="VARCHAR" property="effectName" />
		<result column="DEL_FLAG" jdbcType="CHAR" property="delFlag" />
		<result column="REMARK" jdbcType="VARCHAR" property="remark" />
		<result column="CREATOR" jdbcType="VARCHAR" property="creator" />
		<result column="CREATE_TIME" jdbcType="DATE" property="createTime" />
		<result column="TS" jdbcType="DATE" property="ts" />
	</resultMap>
	<select id="getEmrHomePageOrDtById" resultMap="ResultMapHomePageOrDt">
		SELECT
		*
		FROM
		EMR_HOME_PAGE_OR_DT
		WHERE
		PK_ORDT = #{pkOrdt,jdbcType=CHAR}
	</select>

	<select id="findAllEmrHomePageOrDt" resultMap="ResultMapHomePageOrDt">
		SELECT * FROM EMR_HOME_PAGE_OR_DT
	</select>

	<delete id="deleteEmrHomePageOrDt">
		DELETE
		FROM
		EMR_HOME_PAGE_OR_DT
		WHERE
		PK_ORDT = #{pkOrdt,jdbcType=CHAR}
	</delete>

	<insert id="saveEmrHomePageOrDt"
		parameterType="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePageOrDt">
		INSERT INTO EMR_HOME_PAGE_OR_DT
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="pkOrdt != null">
				PK_ORDT,
			</if>
			<if test="pkOrg != null">
				PK_ORG,
			</if>
			<if test="pkPageor != null">
				PK_PAGEOR,
			</if>
			<if test="seqNo != null">
				SEQ_NO,
			</if>
			<if test="beginDate != null">
				BEGIN_DATE,
			</if>
			<if test="endDate != null">
				END_DATE,
			</if>
			<if test="drugName != null">
				DRUG_NAME,
			</if>
			<if test="courseCode != null">
				COURSE_CODE,
			</if>
			<if test="courseName != null">
				COURSE_NAME,
			</if>
			<if test="effectCode != null">
				EFFECT_CODE,
			</if>
			<if test="effectName != null">
				EFFECT_NAME,
			</if>
			<if test="delFlag != null">
				DEL_FLAG,
			</if>
			<if test="remark != null">
				REMARK,
			</if>
			<if test="creator != null">
				CREATOR,
			</if>
			<if test="createTime != null">
				CREATE_TIME,
			</if>
			<if test="ts != null">
				TS,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="pkOrdt != null">
				#{pkOrdt,jdbcType=CHAR},
			</if>
			<if test="pkOrg != null">
				#{pkOrg,jdbcType=VARCHAR},
			</if>
			<if test="pkPageor != null">
				#{pkPageor,jdbcType=VARCHAR},
			</if>
			<if test="seqNo != null">
				#{seqNo,jdbcType=DECIMAL},
			</if>
			<if test="beginDate != null">
				#{beginDate,jdbcType=DATE},
			</if>
			<if test="endDate != null">
				#{endDate,jdbcType=DATE},
			</if>
			<if test="drugName != null">
				#{drugName,jdbcType=VARCHAR},
			</if>
			<if test="courseCode != null">
				#{courseCode,jdbcType=VARCHAR},
			</if>
			<if test="courseName != null">
				#{courseName,jdbcType=VARCHAR},
			</if>
			<if test="effectCode != null">
				#{effectCode,jdbcType=VARCHAR},
			</if>
			<if test="effectName != null">
				#{effectName,jdbcType=VARCHAR},
			</if>
			<if test="delFlag != null">
				#{delFlag,jdbcType=CHAR},
			</if>
			<if test="remark != null">
				#{remark,jdbcType=VARCHAR},
			</if>
			<if test="creator != null">
				#{creator,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				#{createTime,jdbcType=DATE},
			</if>
			<if test="ts != null">
				#{ts,jdbcType=DATE},
			</if>
		</trim>
	</insert>

	<update id="updateEmrHomePageOrDt"
		parameterType="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePageOrDt">
		UPDATE EMR_HOME_PAGE_OR_DT
		<set>
			<if test="pkOrdt != null">
				PK_ORDT = #{pkOrdt,jdbcType=CHAR},
			</if>
			<if test="pkOrg != null">
				PK_ORG = #{pkOrg,jdbcType=VARCHAR},
			</if>
			<if test="pkPageor != null">
				PK_PAGEOR = #{pkPageor,jdbcType=VARCHAR},
			</if>
			<if test="seqNo != null">
				SEQ_NO = #{seqNo,jdbcType=DECIMAL},
			</if>
			<if test="beginDate != null">
				BEGIN_DATE = #{beginDate,jdbcType=DATE},
			</if>
			<if test="endDate != null">
				END_DATE = #{endDate,jdbcType=DATE},
			</if>
			<if test="drugName != null">
				DRUG_NAME = #{drugName,jdbcType=VARCHAR},
			</if>
			<if test="courseCode != null">
				COURSE_CODE = #{courseCode,jdbcType=VARCHAR},
			</if>
			<if test="courseName != null">
				COURSE_NAME = #{courseName,jdbcType=VARCHAR},
			</if>
			<if test="effectCode != null">
				EFFECT_CODE = #{effectCode,jdbcType=VARCHAR},
			</if>
			<if test="effectName != null">
				EFFECT_NAME = #{effectName,jdbcType=VARCHAR},
			</if>
			<if test="delFlag != null">
				DEL_FLAG = #{delFlag,jdbcType=CHAR},
			</if>
			<if test="remark != null">
				REMARK = #{remark,jdbcType=VARCHAR},
			</if>
			<if test="creator != null">
				CREATOR = #{creator,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				CREATE_TIME = #{createTime,jdbcType=DATE},
			</if>
			<if test="ts != null">
				TS = #{ts,jdbcType=DATE},
			</if>
		</set>
		WHERE
		PK_ORDT = #{pkOrdt,jdbcType=CHAR}
	</update>
	<resultMap id="ResultMapHomePageBr"
		type="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePageBr">
		<id column="PK_BR" jdbcType="CHAR" property="pkBr" />
		<result column="PK_ORG" jdbcType="VARCHAR" property="pkOrg" />
		<result column="PK_PAGE" jdbcType="VARCHAR" property="pkPage" />
		<result column="SEQ_NO" jdbcType="DECIMAL" property="seqNo" />
		<result column="DT_SEX" jdbcType="VARCHAR" property="dtSex" />
		<result column="CODE_CB" jdbcType="VARCHAR" property="codeCb" />
		<result column="NAME_CB" jdbcType="VARCHAR" property="nameCb" />
		<result column="WEIGHT" jdbcType="DECIMAL" property="weight" />
		<result column="CODE_OC" jdbcType="VARCHAR" property="codeOc" />
		<result column="NAME_OC" jdbcType="VARCHAR" property="nameOc" />
		<result column="CODE_BREATH" jdbcType="VARCHAR" property="codeBreath" />
		<result column="NAME_BREATH" jdbcType="VARCHAR" property="nameBreath" />
		<result column="NUM_RES" jdbcType="DECIMAL" property="numRes" />
		<result column="NUM_SUCC" jdbcType="DECIMAL" property="numSucc" />
		<result column="DEL_FLAG" jdbcType="CHAR" property="delFlag" />
		<result column="REMARK" jdbcType="VARCHAR" property="remark" />
		<result column="CREATOR" jdbcType="VARCHAR" property="creator" />
		<result column="CREATE_TIME" jdbcType="DATE" property="createTime" />
		<result column="TS" jdbcType="DATE" property="ts" />
	</resultMap>
	<select id="getEmrHomePageBrById" resultMap="ResultMapHomePageBr">
		SELECT
		*
		FROM
		EMR_HOME_PAGE_BR
		WHERE
		PK_BR = #{pkBr,jdbcType=CHAR}
	</select>

	<select id="findAllEmrHomePageBr" resultMap="ResultMapHomePageBr">
		SELECT * FROM EMR_HOME_PAGE_BR
	</select>

	<delete id="deleteEmrHomePageBr">
		DELETE
		FROM
		EMR_HOME_PAGE_BR
		WHERE
		PK_BR = #{pkBr,jdbcType=CHAR}
	</delete>

	<insert id="saveEmrHomePageBr"
		parameterType="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePageBr">
		INSERT INTO EMR_HOME_PAGE_BR
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="pkBr != null">
				PK_BR,
			</if>
			<if test="pkOrg != null">
				PK_ORG,
			</if>
			<if test="pkPage != null">
				PK_PAGE,
			</if>
			<if test="seqNo != null">
				SEQ_NO,
			</if>
			<if test="dtSex != null">
				DT_SEX,
			</if>
			<if test="codeCb != null">
				CODE_CB,
			</if>
			<if test="nameCb != null">
				NAME_CB,
			</if>
			<if test="weight != null">
				WEIGHT,
			</if>
			<if test="codeOc != null">
				CODE_OC,
			</if>
			<if test="nameOc != null">
				NAME_OC,
			</if>
			<if test="codeBreath != null">
				CODE_BREATH,
			</if>
			<if test="nameBreath != null">
				NAME_BREATH,
			</if>
			<if test="numRes != null">
				NUM_RES,
			</if>
			<if test="numSucc != null">
				NUM_SUCC,
			</if>
			<if test="delFlag != null">
				DEL_FLAG,
			</if>
			<if test="remark != null">
				REMARK,
			</if>
			<if test="creator != null">
				CREATOR,
			</if>
			<if test="createTime != null">
				CREATE_TIME,
			</if>
			<if test="ts != null">
				TS,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="pkBr != null">
				#{pkBr,jdbcType=CHAR},
			</if>
			<if test="pkOrg != null">
				#{pkOrg,jdbcType=VARCHAR},
			</if>
			<if test="pkPage != null">
				#{pkPage,jdbcType=VARCHAR},
			</if>
			<if test="seqNo != null">
				#{seqNo,jdbcType=DECIMAL},
			</if>
			<if test="dtSex != null">
				#{dtSex,jdbcType=VARCHAR},
			</if>
			<if test="codeCb != null">
				#{codeCb,jdbcType=VARCHAR},
			</if>
			<if test="nameCb != null">
				#{nameCb,jdbcType=VARCHAR},
			</if>
			<if test="weight != null">
				#{weight,jdbcType=DECIMAL},
			</if>
			<if test="codeOc != null">
				#{codeOc,jdbcType=VARCHAR},
			</if>
			<if test="nameOc != null">
				#{nameOc,jdbcType=VARCHAR},
			</if>
			<if test="codeBreath != null">
				#{codeBreath,jdbcType=VARCHAR},
			</if>
			<if test="nameBreath != null">
				#{nameBreath,jdbcType=VARCHAR},
			</if>
			<if test="numRes != null">
				#{numRes,jdbcType=DECIMAL},
			</if>
			<if test="numSucc != null">
				#{numSucc,jdbcType=DECIMAL},
			</if>
			<if test="delFlag != null">
				#{delFlag,jdbcType=CHAR},
			</if>
			<if test="remark != null">
				#{remark,jdbcType=VARCHAR},
			</if>
			<if test="creator != null">
				#{creator,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				#{createTime,jdbcType=DATE},
			</if>
			<if test="ts != null">
				#{ts,jdbcType=DATE},
			</if>
		</trim>
	</insert>

	<update id="updateEmrHomePageBr"
		parameterType="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePageBr">
		UPDATE EMR_HOME_PAGE_BR
		<set>
			<if test="pkBr != null">
				PK_BR = #{pkBr,jdbcType=CHAR},
			</if>
			<if test="pkOrg != null">
				PK_ORG = #{pkOrg,jdbcType=VARCHAR},
			</if>
			<if test="pkPage != null">
				PK_PAGE = #{pkPage,jdbcType=VARCHAR},
			</if>
			<if test="seqNo != null">
				SEQ_NO = #{seqNo,jdbcType=DECIMAL},
			</if>
			<if test="dtSex != null">
				DT_SEX = #{dtSex,jdbcType=VARCHAR},
			</if>
			<if test="codeCb != null">
				CODE_CB = #{codeCb,jdbcType=VARCHAR},
			</if>
			<if test="nameCb != null">
				NAME_CB = #{nameCb,jdbcType=VARCHAR},
			</if>
			<if test="weight != null">
				WEIGHT = #{weight,jdbcType=DECIMAL},
			</if>
			<if test="codeOc != null">
				CODE_OC = #{codeOc,jdbcType=VARCHAR},
			</if>
			<if test="nameOc != null">
				NAME_OC = #{nameOc,jdbcType=VARCHAR},
			</if>
			<if test="codeBreath != null">
				CODE_BREATH = #{codeBreath,jdbcType=VARCHAR},
			</if>
			<if test="nameBreath != null">
				NAME_BREATH = #{nameBreath,jdbcType=VARCHAR},
			</if>
			<if test="numRes != null">
				NUM_RES = #{numRes,jdbcType=DECIMAL},
			</if>
			<if test="numSucc != null">
				NUM_SUCC = #{numSucc,jdbcType=DECIMAL},
			</if>
			<if test="delFlag != null">
				DEL_FLAG = #{delFlag,jdbcType=CHAR},
			</if>
			<if test="remark != null">
				REMARK = #{remark,jdbcType=VARCHAR},
			</if>
			<if test="creator != null">
				CREATOR = #{creator,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				CREATE_TIME = #{createTime,jdbcType=DATE},
			</if>
			<if test="ts != null">
				TS = #{ts,jdbcType=DATE},
			</if>
		</set>
		WHERE
		PK_BR = #{pkBr,jdbcType=CHAR}
	</update>
	<resultMap id="ResultMapHomePageTrans"
		type="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePageTrans">
		<id column="PK_TRANS" jdbcType="CHAR" property="pkTrans" />
		<result column="PK_ORG" jdbcType="VARCHAR" property="pkOrg" />
		<result column="PK_PAGE" jdbcType="VARCHAR" property="pkPage" />
		<result column="SEQ_NO" jdbcType="DECIMAL" property="seqNo" />
		<result column="PK_DEPT" jdbcType="VARCHAR" property="pkDept" />
		<result column="DEPT_CODE" jdbcType="VARCHAR" property="deptCode" />
		<result column="DEPT_NAME" jdbcType="VARCHAR" property="deptName" />
		<result column="TRANS_DATE" jdbcType="DATE" property="transDate" />
		<result column="DEL_FLAG" jdbcType="CHAR" property="delFlag" />
		<result column="REMARK" jdbcType="VARCHAR" property="remark" />
		<result column="CREATOR" jdbcType="VARCHAR" property="creator" />
		<result column="CREATE_TIME" jdbcType="DATE" property="createTime" />
		<result column="TS" jdbcType="DATE" property="ts" />
	</resultMap>
	<select id="getEmrHomePageTransById" resultMap="ResultMapHomePageTrans">
		SELECT
		*
		FROM
		EMR_HOME_PAGE_TRANS
		WHERE
		PK_TRANS = #{pkTrans,jdbcType=CHAR}
	</select>

	<select id="findAllEmrHomePageTrans" resultMap="ResultMapHomePageTrans">
		SELECT * FROM EMR_HOME_PAGE_TRANS
	</select>

	<delete id="deleteEmrHomePageTrans">
		DELETE
		FROM
		EMR_HOME_PAGE_TRANS
		WHERE
		PK_TRANS = #{pkTrans,jdbcType=CHAR}
	</delete>
	<delete id="deleteEmrHomePageTransByPage">
		DELETE
		FROM
		EMR_HOME_PAGE_TRANS
		WHERE
		PK_PAGES = #{PK_PAGES,jdbcType=CHAR}
	</delete>
	<insert id="saveEmrHomePageTrans"
		parameterType="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePageTrans">
		INSERT INTO EMR_HOME_PAGE_TRANS
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="pkTrans != null">
				PK_TRANS,
			</if>
			<if test="pkOrg != null">
				PK_ORG,
			</if>
			<if test="pkPage != null">
				PK_PAGE,
			</if>
			<if test="seqNo != null">
				SEQ_NO,
			</if>
			<if test="pkDept != null">
				PK_DEPT,
			</if>
			<if test="deptCode != null">
				DEPT_CODE,
			</if>
			<if test="deptName != null">
				DEPT_NAME,
			</if>
			<if test="transDate != null">
				TRANS_DATE,
			</if>
			<if test="delFlag != null">
				DEL_FLAG,
			</if>
			<if test="remark != null">
				REMARK,
			</if>
			<if test="creator != null">
				CREATOR,
			</if>
			<if test="createTime != null">
				CREATE_TIME,
			</if>
			<if test="ts != null">
				TS,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="pkTrans != null">
				#{pkTrans,jdbcType=CHAR},
			</if>
			<if test="pkOrg != null">
				#{pkOrg,jdbcType=VARCHAR},
			</if>
			<if test="pkPage != null">
				#{pkPage,jdbcType=VARCHAR},
			</if>
			<if test="seqNo != null">
				#{seqNo,jdbcType=DECIMAL},
			</if>
			<if test="pkDept != null">
				#{pkDept,jdbcType=VARCHAR},
			</if>
			<if test="deptCode != null">
				#{deptCode,jdbcType=VARCHAR},
			</if>
			<if test="deptName != null">
				#{deptName,jdbcType=VARCHAR},
			</if>
			<if test="transDate != null">
				#{transDate,jdbcType=DATE},
			</if>
			<if test="delFlag != null">
				#{delFlag,jdbcType=CHAR},
			</if>
			<if test="remark != null">
				#{remark,jdbcType=VARCHAR},
			</if>
			<if test="creator != null">
				#{creator,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				#{createTime,jdbcType=DATE},
			</if>
			<if test="ts != null">
				#{ts,jdbcType=DATE},
			</if>
		</trim>
	</insert>

	<update id="updateEmrHomePageTrans"
		parameterType="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePageTrans">
		UPDATE EMR_HOME_PAGE_TRANS
		<set>
			<if test="pkTrans != null">
				PK_TRANS = #{pkTrans,jdbcType=CHAR},
			</if>
			<if test="pkOrg != null">
				PK_ORG = #{pkOrg,jdbcType=VARCHAR},
			</if>
			<if test="pkPage != null">
				PK_PAGE = #{pkPage,jdbcType=VARCHAR},
			</if>
			<if test="seqNo != null">
				SEQ_NO = #{seqNo,jdbcType=DECIMAL},
			</if>
			<if test="pkDept != null">
				PK_DEPT = #{pkDept,jdbcType=VARCHAR},
			</if>
			<if test="deptCode != null">
				DEPT_CODE = #{deptCode,jdbcType=VARCHAR},
			</if>
			<if test="deptName != null">
				DEPT_NAME = #{deptName,jdbcType=VARCHAR},
			</if>
			<if test="transDate != null">
				TRANS_DATE = #{transDate,jdbcType=DATE},
			</if>
			<if test="delFlag != null">
				DEL_FLAG = #{delFlag,jdbcType=CHAR},
			</if>
			<if test="remark != null">
				REMARK = #{remark,jdbcType=VARCHAR},
			</if>
			<if test="creator != null">
				CREATOR = #{creator,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				CREATE_TIME = #{createTime,jdbcType=DATE},
			</if>
			<if test="ts != null">
				TS = #{ts,jdbcType=DATE},
			</if>
		</set>
		WHERE
		PK_TRANS = #{pkTrans,jdbcType=CHAR}
	</update>
	
	  <delete id="deleteEmrHomePageZL">
        DELETE
        FROM
             EMR_HOME_PAGE_ZL
        WHERE            
            PK_ZL = #{pkZL,jdbcType=CHAR}
    </delete>

    <insert id="saveEmrHomePageZL" parameterType="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePageZL" >
        INSERT INTO EMR_HOME_PAGE_ZL
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="pkZl != null" >
                PK_ZL,
            </if>
            <if test="pkOrg != null" >
                PK_ORG,
            </if>
            <if test="pkPage != null" >
                PK_PAGE,
            </if>
            <if test="intensivecareZzjhsmc1 != null" >
                INTENSIVECARE_ZZJHSMC1,
            </if>
            <if test="intensivecareZzjhsmc2 != null" >
                INTENSIVECARE_ZZJHSMC2,
            </if>
            <if test="intensivecareZzjhsmc3 != null" >
                INTENSIVECARE_ZZJHSMC3,
            </if>
            <if test="intensivecareJrzzjhssj1 != null" >
                INTENSIVECARE_JRZZJHSSJ1,
            </if>
            <if test="intensivecareJrzzjhssj2 != null" >
                INTENSIVECARE_JRZZJHSSJ2,
            </if>
            <if test="intensivecareJrzzjhssj3 != null" >
                INTENSIVECARE_JRZZJHSSJ3,
            </if>
            <if test="intensivecareCzzjhssj1 != null" >
                INTENSIVECARE_CZZJHSSJ1,
            </if>
            <if test="intensivecareCzzjhssj2 != null" >
                INTENSIVECARE_CZZJHSSJ2,
            </if>
            <if test="intensivecareCzzjhssj3 != null" >
                INTENSIVECARE_CZZJHSSJ3,
            </if>
            <if test="wzbl != null" >
                WZBL,
            </if>
            <if test="ynbl != null" >
                YNBL,
            </if>
            <if test="mdtbl != null" >
                MDTBL,
            </if>
            <if test="dbzbl != null" >
                DBZBL,
            </if>
            <if test="rjssbl != null" >
                RJSSBL,
            </if>
            <if test="jxcfbl != null" >
                JXCFBL,
            </if>
            <if test="zdfhqkMzycy != null" >
                ZDFHQK_MZYCY,
            </if>
            <if test="zdfhqkRyycy != null" >
                ZDFHQK_RYYCY,
            </if>
            <if test="zdfhqkSqysh != null" >
                ZDFHQK_SQYSH,
            </if>
            <if test="zdfhqkLcybl != null" >
                ZDFHQK_LCYBL,
            </if>
            <if test="zdfhqkFsybl != null" >
                ZDFHQK_FSYBL,
            </if>
            <if test="zdfhqkQjcs != null" >
                ZDFHQK_QJCS,
            </if>
            <if test="zdfhqkCgcs != null" >
                ZDFHQK_CGCS,
            </if>
            <if test="tchrYw != null" >
                TCHR_YW,
            </if>
            <if test="tchrYxjc != null" >
                TCHR_YXJC,
            </if>
            <if test="tchrJyjc != null" >
                TCHR_JYJC,
            </if>
            <if test="tchrBljc != null" >
                TCHR_BLJC,
            </if>
            <if test="tchrQt != null" >
                TCHR_QT,
            </if>
            <if test="delFlag != null" >
                DEL_FLAG,
            </if>
            <if test="remark != null" >
                REMARK,
            </if>
            <if test="creator != null" >
                CREATOR,
            </if>
            <if test="createTime != null" >
                CREATE_TIME,
            </if>
            <if test="ts != null" >
                TS,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="pkZl != null" >
                #{pkZl,jdbcType=CHAR},
            </if> 
            <if test="pkOrg != null" >
                #{pkOrg,jdbcType=VARCHAR},
            </if> 
            <if test="pkPage != null" >
                #{pkPage,jdbcType=VARCHAR},
            </if> 
            <if test="intensivecareZzjhsmc1 != null" >
                #{intensivecareZzjhsmc1,jdbcType=VARCHAR},
            </if> 
            <if test="intensivecareZzjhsmc2 != null" >
                #{intensivecareZzjhsmc2,jdbcType=VARCHAR},
            </if> 
            <if test="intensivecareZzjhsmc3 != null" >
                #{intensivecareZzjhsmc3,jdbcType=VARCHAR},
            </if> 
            <if test="intensivecareJrzzjhssj1 != null" >
                #{intensivecareJrzzjhssj1,jdbcType=TIMESTAMP},
            </if> 
            <if test="intensivecareJrzzjhssj2 != null" >
                #{intensivecareJrzzjhssj2,jdbcType=TIMESTAMP},
            </if> 
            <if test="intensivecareJrzzjhssj3 != null" >
                #{intensivecareJrzzjhssj3,jdbcType=TIMESTAMP},
            </if> 
            <if test="intensivecareCzzjhssj1 != null" >
                #{intensivecareCzzjhssj1,jdbcType=TIMESTAMP},
            </if> 
            <if test="intensivecareCzzjhssj2 != null" >
                #{intensivecareCzzjhssj2,jdbcType=TIMESTAMP},
            </if> 
            <if test="intensivecareCzzjhssj3 != null" >
                #{intensivecareCzzjhssj3,jdbcType=TIMESTAMP},
            </if> 
            <if test="wzbl != null" >
                #{wzbl,jdbcType=CHAR},
            </if> 
            <if test="ynbl != null" >
                #{ynbl,jdbcType=CHAR},
            </if> 
            <if test="mdtbl != null" >
                #{mdtbl,jdbcType=CHAR},
            </if> 
            <if test="dbzbl != null" >
                #{dbzbl,jdbcType=CHAR},
            </if> 
            <if test="rjssbl != null" >
                #{rjssbl,jdbcType=CHAR},
            </if> 
            <if test="jxcfbl != null" >
                #{jxcfbl,jdbcType=CHAR},
            </if> 
            <if test="zdfhqkMzycy != null" >
                #{zdfhqkMzycy,jdbcType=CHAR},
            </if> 
            <if test="zdfhqkRyycy != null" >
                #{zdfhqkRyycy,jdbcType=CHAR},
            </if> 
            <if test="zdfhqkSqysh != null" >
                #{zdfhqkSqysh,jdbcType=CHAR},
            </if> 
            <if test="zdfhqkLcybl != null" >
                #{zdfhqkLcybl,jdbcType=CHAR},
            </if> 
            <if test="zdfhqkFsybl != null" >
                #{zdfhqkFsybl,jdbcType=CHAR},
            </if> 
            <if test="zdfhqkQjcs != null" >
                #{zdfhqkQjcs,jdbcType=VARCHAR},
            </if> 
            <if test="zdfhqkCgcs != null" >
                #{zdfhqkCgcs,jdbcType=VARCHAR},
            </if> 
            <if test="tchrYw != null" >
                #{tchrYw,jdbcType=CHAR},
            </if> 
            <if test="tchrYxjc != null" >
                #{tchrYxjc,jdbcType=CHAR},
            </if> 
            <if test="tchrJyjc != null" >
                #{tchrJyjc,jdbcType=CHAR},
            </if> 
            <if test="tchrBljc != null" >
                #{tchrBljc,jdbcType=CHAR},
            </if> 
            <if test="tchrQt != null" >
                #{tchrQt,jdbcType=CHAR},
            </if> 
            <if test="delFlag != null" >
                #{delFlag,jdbcType=CHAR},
            </if> 
            <if test="remark != null" >
                #{remark,jdbcType=VARCHAR},
            </if> 
            <if test="creator != null" >
                #{creator,jdbcType=VARCHAR},
            </if> 
            <if test="createTime != null" >
                #{createTime,jdbcType=TIMESTAMP},
            </if> 
            <if test="ts != null" >
                #{ts,jdbcType=TIMESTAMP},
            </if> 
        </trim>
    </insert>

    <update id="updateEmrHomePageZL" parameterType="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePageZL" >
        UPDATE EMR_HOME_PAGE_ZL
        <set>
            <if test="pkZl != null" >
                PK_ZL = #{pkZl,jdbcType=CHAR},
            </if>
            <if test="pkOrg != null" >
                PK_ORG = #{pkOrg,jdbcType=VARCHAR},
            </if>
            <if test="pkPage != null" >
                PK_PAGE = #{pkPage,jdbcType=VARCHAR},
            </if>
            <if test="intensivecareZzjhsmc1 != null" >
                INTENSIVECARE_ZZJHSMC1 = #{intensivecareZzjhsmc1,jdbcType=VARCHAR},
            </if>
            <if test="intensivecareZzjhsmc2 != null" >
                INTENSIVECARE_ZZJHSMC2 = #{intensivecareZzjhsmc2,jdbcType=VARCHAR},
            </if>
            <if test="intensivecareZzjhsmc3 != null" >
                INTENSIVECARE_ZZJHSMC3 = #{intensivecareZzjhsmc3,jdbcType=VARCHAR},
            </if>
            <if test="intensivecareJrzzjhssj1 != null" >
                INTENSIVECARE_JRZZJHSSJ1 = #{intensivecareJrzzjhssj1,jdbcType=TIMESTAMP},
            </if>
            <if test="intensivecareJrzzjhssj2 != null" >
                INTENSIVECARE_JRZZJHSSJ2 = #{intensivecareJrzzjhssj2,jdbcType=TIMESTAMP},
            </if>
            <if test="intensivecareJrzzjhssj3 != null" >
                INTENSIVECARE_JRZZJHSSJ3 = #{intensivecareJrzzjhssj3,jdbcType=TIMESTAMP},
            </if>
            <if test="intensivecareCzzjhssj1 != null" >
                INTENSIVECARE_CZZJHSSJ1 = #{intensivecareCzzjhssj1,jdbcType=TIMESTAMP},
            </if>
            <if test="intensivecareCzzjhssj2 != null" >
                INTENSIVECARE_CZZJHSSJ2 = #{intensivecareCzzjhssj2,jdbcType=TIMESTAMP},
            </if>
            <if test="intensivecareCzzjhssj3 != null" >
                INTENSIVECARE_CZZJHSSJ3 = #{intensivecareCzzjhssj3,jdbcType=TIMESTAMP},
            </if>
            <if test="wzbl != null" >
                WZBL = #{wzbl,jdbcType=CHAR},
            </if>
            <if test="ynbl != null" >
                YNBL = #{ynbl,jdbcType=CHAR},
            </if>
            <if test="mdtbl != null" >
                MDTBL = #{mdtbl,jdbcType=CHAR},
            </if>
            <if test="dbzbl != null" >
                DBZBL = #{dbzbl,jdbcType=CHAR},
            </if>
            <if test="rjssbl != null" >
                RJSSBL = #{rjssbl,jdbcType=CHAR},
            </if>
            <if test="jxcfbl != null" >
                JXCFBL = #{jxcfbl,jdbcType=CHAR},
            </if>
            <if test="zdfhqkMzycy != null" >
                ZDFHQK_MZYCY = #{zdfhqkMzycy,jdbcType=CHAR},
            </if>
            <if test="zdfhqkRyycy != null" >
                ZDFHQK_RYYCY = #{zdfhqkRyycy,jdbcType=CHAR},
            </if>
            <if test="zdfhqkSqysh != null" >
                ZDFHQK_SQYSH = #{zdfhqkSqysh,jdbcType=CHAR},
            </if>
            <if test="zdfhqkLcybl != null" >
                ZDFHQK_LCYBL = #{zdfhqkLcybl,jdbcType=CHAR},
            </if>
            <if test="zdfhqkFsybl != null" >
                ZDFHQK_FSYBL = #{zdfhqkFsybl,jdbcType=CHAR},
            </if>
            <if test="zdfhqkQjcs != null" >
                ZDFHQK_QJCS = #{zdfhqkQjcs,jdbcType=VARCHAR},
            </if>
            <if test="zdfhqkCgcs != null" >
                ZDFHQK_CGCS = #{zdfhqkCgcs,jdbcType=VARCHAR},
            </if>
            <if test="tchrYw != null" >
                TCHR_YW = #{tchrYw,jdbcType=CHAR},
            </if>
            <if test="tchrYxjc != null" >
                TCHR_YXJC = #{tchrYxjc,jdbcType=CHAR},
            </if>
            <if test="tchrJyjc != null" >
                TCHR_JYJC = #{tchrJyjc,jdbcType=CHAR},
            </if>
            <if test="tchrBljc != null" >
                TCHR_BLJC = #{tchrBljc,jdbcType=CHAR},
            </if>
            <if test="tchrQt != null" >
                TCHR_QT = #{tchrQt,jdbcType=CHAR},
            </if>
            <if test="delFlag != null" >
                DEL_FLAG = #{delFlag,jdbcType=CHAR},
            </if>
            <if test="remark != null" >
                REMARK = #{remark,jdbcType=VARCHAR},
            </if>
            <if test="creator != null" >
                CREATOR = #{creator,jdbcType=VARCHAR},
            </if>
            <if test="createTime != null" >
                CREATE_TIME = #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="ts != null" >
                TS = #{ts,jdbcType=TIMESTAMP},
            </if>
        </set>
        WHERE 
            PK_ZL = #{pkZl,jdbcType=CHAR}
    </update>
	
	<resultMap id="ResultMapTransList"
		type="com.zebone.nhis.common.module.emr.rec.rec.EmrTransList">
		<result column="PK_ADT" jdbcType="CHAR" property="pkAdt" />
		<result column="PK_ORG" jdbcType="CHAR" property="pkOrg" />
		<result column="PK_PV" jdbcType="CHAR" property="pkPv" />
		<result column="DATE_BEGIN" jdbcType="TIMESTAMP" property="dateBegin" />
		<result column="DATE_END" jdbcType="TIMESTAMP" property="dateEnd" />
		<result column="PK_EMP_BEGIN" jdbcType="CHAR" property="pkEmpBegin" />
		<result column="NAME_EMP_BEGIN" jdbcType="VARCHAR" property="nameEmpBegin" />
		<result column="PK_EMP_END" jdbcType="CHAR" property="pkEmpEnd" />
		<result column="NAME_EMP_END" jdbcType="VARCHAR" property="nameEmpEnd" />
		<result column="FLAG_ADMIT" jdbcType="CHAR" property="flagAdmit" />
		<result column="FLAG_DIS" jdbcType="CHAR" property="flagDis" />
		<result column="DT_PATIEVA" jdbcType="VARCHAR" property="dtPatieva" />
		<result column="DESC_PATIEVA" jdbcType="VARCHAR" property="descPatieva" />
		<result column="PK_ADT_SOURCE" jdbcType="CHAR" property="pkAdtSource" />
		<result column="EU_STATUS" jdbcType="VARCHAR" property="euStatus" />
		<result column="PK_DEPT" jdbcType="CHAR" property="pkDept" />
		<result column="PK_DEPT_NS" jdbcType="CHAR" property="pkDeptNs" />
		<result column="CREATOR" jdbcType="CHAR" property="creator" />
		<result column="CREATE_TIME" jdbcType="TIMESTAMP" property="createTime" />
		<result column="MODIFIER" jdbcType="CHAR" property="modifier" />
		<result column="DEL_FLAG" jdbcType="CHAR" property="delFlag" />
		<result column="TS" jdbcType="TIMESTAMP" property="ts" />
		<result column="DEPT_CODE" jdbcType="VARCHAR" property="deptCode" />
		<result column="DEPT_NAME" jdbcType="VARCHAR" property="deptName" />
	</resultMap>
	<select id="queryTransList" resultMap="ResultMapTransList">
		SELECT
		*
		FROM
		view_emr_trans_list
		WHERE eu_status='1' 
		<if test="pkPv != null">
			and PK_PV = #{pkPv,jdbcType=VARCHAR}
		</if>
		<if test="orderBy != null">
			${orderBy}
		</if>
	</select>

	<select id="queryPvLaborRecDt" parameterType="java.util.Map"
		resultType="com.zebone.nhis.emr.rec.rec.vo.EmrInfantRecVo">
		select inf.name,
		       inf.sort_no,
		       zd_sex.ba_code dt_sex,
		       inf.weight,
		       inf.len,
		       dt.dt_breath,
		       inf.dt_labresult2 dt_labresult,
		       inf.dt_infantoutcome, 
		       inf.cnt_rescue,
		       inf.cnt_succeed 
		  from pv_labor_rec_dt dt inner join
		       pv_infant inf on dt.pk_laborrecdt=inf.pk_laborrecdt
		  left outer join bd_defdoc zd_sex
		    on dt.dt_sex_inf = zd_sex.code
		where dt.pk_pv = #{pkPv,jdbcType=CHAR}
		   and zd_sex.code_defdoclist = '000000'
		   and inf.del_flag='0'
		   and dt.del_flag='0'
		order by inf.sort_no  
	</select>

	<delete id="deleteEmrHomePageOpsByPage">
		DELETE
		FROM
		EMR_HOME_PAGE_OPS
		WHERE
		PK_PAGE = #{pkPage,jdbcType=CHAR}
	</delete>
	<delete id="deleteEmrHomePageDiagsByPage">
		DELETE
		FROM
		EMR_HOME_PAGE_DIAGS
		WHERE
		PK_PAGE = #{pkPage,jdbcType=CHAR}
	</delete>
	<delete id="deleteEmrHomePageChargesByPage">
		DELETE
		FROM
		EMR_HOME_PAGE_CHARGES
		WHERE
		PK_PAGE = #{pkPage,jdbcType=CHAR}
	</delete>
	<delete id="deleteEmrHomePageBrByPage">
		DELETE
		FROM
		EMR_HOME_PAGE_BR
		WHERE
		PK_PAGE = #{pkPage,jdbcType=CHAR}
	</delete>
	<delete id="deleteEmrHomePageOrByPage">
		DELETE
		FROM
		EMR_HOME_PAGE_OR
		WHERE
		PK_PAGE = #{pkPage,jdbcType=CHAR}
	</delete>
	<delete id="deleteEmrHomePageOrDtByPage">
		DELETE
		FROM
		EMR_HOME_PAGE_OR_DT
		WHERE
		pk_pageor in (select pk_pageor from EMR_HOME_PAGE_OR where PK_PAGE =
		#{pkPage,jdbcType=CHAR})
	</delete>
	<select id="queryEmrHomePageBrsByPage" resultMap="ResultMapHomePageBr">
		SELECT
		*
		FROM
		EMR_HOME_PAGE_BR
		WHERE
		PK_PAGE = #{pkPage,jdbcType=VARCHAR}
	</select>
	<select id="queryEmrHomePageOrByPage" resultMap="ResultMapHomePageOr">
		SELECT
		*
		FROM
		EMR_HOME_PAGE_OR
		WHERE
		PK_PAGE = #{pkPage,jdbcType=VARCHAR} and ROWNUM=1
	</select>
	<select id="queryEmrHomePageOrByPageSql" resultMap="ResultMapHomePageOr">
		SELECT top 1
		*
		FROM
		EMR_HOME_PAGE_OR
		WHERE
		PK_PAGE = #{pkPage,jdbcType=VARCHAR}
	</select>
	<select id="queryEmrHomePageOrDtsByPage" resultMap="ResultMapHomePageOrDt">
		SELECT
		*
		FROM
		EMR_HOME_PAGE_OR_DT
		WHERE
		pk_pageor in (select pk_pageor from EMR_HOME_PAGE_OR where PK_PAGE =
		#{pkPage,jdbcType=CHAR})
	</select>
	<select id="queryVitalSigns" parameterType="java.util.Map"
		resultType="com.zebone.nhis.emr.rec.rec.vo.EmrVitalSigns">
		select occ.date_vts vs_date,
		dt.hour_vts vs_time,
		dt.VAL_TEMP tempe,
		dt.VAL_PULSE pulse,
		dt.VAL_BRE breath,
		occ.VAL_SBP systolic,
		occ.VAL_DBP diastolic,
		occ.VAL_SBP_ADD systolic_add,
		occ.VAL_DBP_ADD diastolic_add,
		dt.eu_dateslot
		from ex_vts_occ occ,ex_vts_occ_dt dt
		where occ.pk_vtsocc = dt.pk_vtsocc
		and occ.pk_pv = #{pkPv,jdbcType=CHAR}
		and occ.DEL_FLAG='0'
		and dt.DEL_FLAG='0'
		order by occ.DATE_VTS,dt.eu_dateslot,dt.HOUR_VTS
	</select>


	<update id="setPhysician" parameterType="java.util.Map">
		update
		emr_pat_rec
		set
		del_flag='0',
		<if test="pkEmpConsult != null">
			pk_emp_consult = (case when #{pkEmpConsult,jdbcType=VARCHAR}='' then null else #{pkEmpConsult,jdbcType=VARCHAR} end) ,
		</if>
		<if test="pkEmpDirector != null">
			pk_emp_director = (case when #{pkEmpDirector,jdbcType=VARCHAR}='' then null else #{pkEmpDirector,jdbcType=VARCHAR} end),
		</if>
			pk_emp_refer = #{pkEmpRefer,jdbcType=VARCHAR}
		where
			pk_patrec = #{pkPatrec,jdbcType=VARCHAR}
	</update>
	<update id="finishEmr" parameterType="java.util.Map">
	 update emr_pat_rec
	    set eu_status=(case when nvl(flag_open_edit,'0')='1' then '5' else #{euStatus,jdbcType=VARCHAR} end),
	        pk_emp_finish=#{pkEmp,jdbcType=VARCHAR},
	        finish_date= #{finishDate,jdbcType=DATE}
	  where pk_pv=#{pkPv,jdbcType=VARCHAR}
	</update>
	<resultMap id="ResultMapDocList"
		type="com.zebone.nhis.emr.rec.rec.vo.EmrMedDocVo">
		<id column="PK_DOC" jdbcType="CHAR" property="pkDoc" />
		<result column="PK_ORG" jdbcType="VARCHAR" property="pkOrg" />
	</resultMap>
	
	<select id="queryMedDocList" parameterType="java.util.Map"
		resultType="com.zebone.nhis.emr.rec.rec.vo.EmrMedDocVo">
		select t.pk_doc,t.type_code,typ1.name type_name,
		      (case when t.flag_course ='1' then typ1.name else t.name end) name,
			  count(1) doc_count
			   from (
			select rec.pk_doc,rec.name,typ.flag_course,substr(rec.type_code,1,4) type_code
				from emr_med_rec rec,emr_med_doc doc,emr_doc_type typ
				WHERE rec.pk_pv = #{pkPv,jdbcType=CHAR}
				  and rec.del_flag!='1'
				  and rec.type_code=typ.code
				  and rec.pk_doc=doc.pk_doc
			) t,emr_doc_type typ1
			where t.type_code=typ1.code
			group by t.pk_doc,t.type_code,typ1.name,
			      (case when t.flag_course ='1' then typ1.name else t.name end) 
			order by t.type_code,
			      (case when t.flag_course ='1' then typ1.name else t.name end)

	</select>
	<select id="queryPatMedRecList" resultMap="ResultMapEmrMedRec">
		select rec.PK_REC,
			rec.PK_PATREC,
			rec.NAME,
			rec.SEQ_NO,
			rec.REC_DATE,
			rec.DESCRIBE,
			rec.PK_PI,
			rec.TIMES,
			rec.PK_PV,
			rec.PK_DEPT,
			rec.PK_WARD,
			rec.TYPE_CODE,
			rec.PK_TMP,
			rec.PK_DOC,
			rec.FLAG_AUDIT,
			rec.EU_AUDIT_LEVEL,
			rec.AUDIT_LEVEL_SET,
			rec.EU_DOC_STATUS,
			rec.EU_AUDIT_STATUS,
			rec.FLAG_AUDIT_FINISH,
			rec.SUBMIT_DATE,
			rec.PK_EMP_INTERN,
			rec.INTERN_SIGN_DATE,
			rec.PK_EMP_REFER_ACT,
			rec.PK_EMP_REFER,
			rec.REFER_AUDIT_DATE,
			rec.REFER_SIGN_DATE,
			rec.PK_EMP_CONSULT_ACT,
			rec.PK_EMP_CONSULT,
			rec.CONSULT_AUDIT_DATE,
			rec.CONSULT_SIGN_DATE,
			rec.PK_EMP_DIRECTOR_ACT,
			rec.PK_EMP_DIRECTOR,
			rec.DIRECTOR_AUDIT_DATE,
			rec.DIRECTOR_SIGN_DATE,
			rec.FLAG_PRINT,
			rec.DEL_FLAG,
			rec.REMARK,
			rec.CREATOR,
			rec.CREATE_TIME,
			rec.TS,
			typ.name type_name,
			emp.name create_name,
			typ.FLAG_NEW_PAGE,
			doc.DOC_DATA,
			doc.file_name,
			doc.file_path,
			doc.file_type ,
			temp.TEXT_TITLE,
			temp.TMP_TITLE,
			temp.PK_TMP,
			temp.TMP_PATH,
			temp.TYPE_CODE,
			temp.name temp_name
		from emr_med_rec rec,emr_doc_type typ,view_emr_emp_list emp,emr_med_doc doc,EMR_TEMPLATE temp
		WHERE rec.pk_pv = #{pkPv,jdbcType=CHAR} and rec.del_flag!='1'
		  and rec.pk_doc=doc.pk_doc
		  and rec.type_code=typ.code
		  and rec.creator=emp.pk_emp
		  and rec.PK_TMP=temp.PK_TMP
		order by rec.rec_date,rec.seq_no,rec.pk_tmp
	</select>
	<resultMap id="ResultMapEmrMedRecDoc"
		type="com.zebone.nhis.common.module.emr.rec.rec.EmrMedRec">
		<id column="PK_REC" jdbcType="CHAR" property="pkRec" />
		<result column="PK_PATREC" jdbcType="VARCHAR" property="pkPatrec" />
		<result column="NAME" jdbcType="VARCHAR" property="name" />
		<result column="SEQ_NO" jdbcType="DECIMAL" property="seqNo" />
		<result column="REC_DATE" jdbcType="TIMESTAMP" property="recDate" />
		<result column="DESCRIBE" jdbcType="VARCHAR" property="describe" />
		<result column="PK_PI" jdbcType="VARCHAR" property="pkPi" />
		<result column="TIMES" jdbcType="DECIMAL" property="times" />
		<result column="PK_PV" jdbcType="VARCHAR" property="pkPv" />
		<result column="PK_DEPT" jdbcType="VARCHAR" property="pkDept" />
		<result column="PK_WARD" jdbcType="VARCHAR" property="pkWard" />
		<result column="TYPE_CODE" jdbcType="VARCHAR" property="typeCode" />
		<result column="PK_TMP" jdbcType="VARCHAR" property="pkTmp" />
		<result column="PK_DOC" jdbcType="VARCHAR" property="pkDoc" />
		<result column="FLAG_AUDIT" jdbcType="CHAR" property="flagAudit" />
		<result column="EU_AUDIT_LEVEL" jdbcType="DECIMAL" property="euAuditLevel" />
		<result column="AUDIT_LEVEL_SET" jdbcType="VARCHAR" property="auditLevelSet" />
		<result column="EU_DOC_STATUS" jdbcType="CHAR" property="euDocStatus" />
		<result column="EU_AUDIT_STATUS" jdbcType="CHAR" property="euAuditStatus" />
		<result column="FLAG_AUDIT_FINISH" jdbcType="CHAR" property="flagAuditFinish" />
		<result column="SUBMIT_DATE" jdbcType="TIMESTAMP" property="submitDate" />
		<result column="PK_EMP_INTERN" jdbcType="VARCHAR" property="pkEmpIntern" />
		<result column="INTERN_SIGN_DATE" jdbcType="DATE" property="internSignDate" />
		<result column="PK_EMP_REFER_ACT" jdbcType="VARCHAR" property="pkEmpReferAct" />
		<result column="PK_EMP_REFER" jdbcType="VARCHAR" property="pkEmpRefer" />
		<result column="REFER_AUDIT_DATE" jdbcType="DATE" property="referAuditDate" />
		<result column="REFER_SIGN_DATE" jdbcType="DATE" property="referSignDate" />
		<result column="PK_EMP_CONSULT_ACT" jdbcType="VARCHAR"
			property="pkEmpConsultAct" />
		<result column="PK_EMP_CONSULT" jdbcType="VARCHAR" property="pkEmpConsult" />
		<result column="CONSULT_AUDIT_DATE" jdbcType="DATE" property="consultAuditDate" />
		<result column="CONSULT_SIGN_DATE" jdbcType="DATE" property="consultSignDate" />
		<result column="PK_EMP_DIRECTOR_ACT" jdbcType="VARCHAR"
			property="pkEmpDirectorAct" />
		<result column="PK_EMP_DIRECTOR" jdbcType="VARCHAR" property="pkEmpDirector" />
		<result column="DIRECTOR_AUDIT_DATE" jdbcType="DATE"
			property="directorAuditDate" />
		<result column="DIRECTOR_SIGN_DATE" jdbcType="DATE" property="directorSignDate" />
		<result column="FLAG_PRINT" jdbcType="CHAR" property="flagPrint" />
		<result column="DEL_FLAG" jdbcType="CHAR" property="delFlag" />
		<result column="REMARK" jdbcType="VARCHAR" property="remark" />
		<result column="CREATOR" jdbcType="VARCHAR" property="creator" />
		<result column="CREATE_TIME" jdbcType="TIMESTAMP" property="createTime" />
		<result column="TS" jdbcType="TIMESTAMP" property="ts" />
		<result column="CREATE_NAME" jdbcType="VARCHAR" property="createName" />
		<association property="docType"
			javaType="com.zebone.nhis.common.module.emr.rec.dict.EmrDocType">
			<result column="TYPE_NAME" jdbcType="VARCHAR" property="name" />
			<result column="FLAG_NEW_PAGE" jdbcType="CHAR" property="flagNewPage" />
		</association>
		<association property="medDoc" javaType="com.zebone.nhis.common.module.emr.rec.rec.EmrMedDoc">
			<result column="PK_DOC" jdbcType="VARCHAR" property="pkDoc" />
			<result column="PK_ORG" jdbcType="VARCHAR" property="pkOrg" />
			<result column="FILE_NAME" jdbcType="VARCHAR" property="fileName" />
			<result column="FILE_PATH" jdbcType="VARCHAR" property="filePath" />
			<result column="FILE_TYPE" jdbcType="VARCHAR" property="fileType" />
			<result column="DOC_DATA" jdbcType="BLOB" property="docData" />
			<result column="DOC_XML" jdbcType="CLOB" property="docXml" />
			<result column="DOC_DATA_BAK" jdbcType="BLOB" property="docDataBak" />
			<result column="DOC_XML_BAK" jdbcType="CLOB" property="docXmlBak" />
			<result column="DEL_FLAG" jdbcType="CHAR" property="delFlag" />
			<result column="CREATOR" jdbcType="VARCHAR" property="creator" />
			<result column="CREATE_TIME" jdbcType="DATE" property="createTime" />
			<result column="TS" jdbcType="DATE" property="ts" />
		</association>
		<association property="template" javaType="com.zebone.nhis.common.module.emr.rec.tmp.EmrTemplate">
			<result column="TEXT_TITLE" jdbcType="VARCHAR" property="textTitle" />
			<result column="TYPE_CODE" jdbcType="VARCHAR" property="typeCode" />
			<result column="TEMP_NAME" jdbcType="VARCHAR" property="name" />
			<result column="TMP_TITLE" jdbcType="VARCHAR" property="tmpTitle" />
			<result column="PK_TMP" jdbcType="CHAR" property="pkTmp" />
			<result column="TMP_PATH" jdbcType="VARCHAR" property="tmpPath" />
			<result column="EU_TYPE" jdbcType="CHAR" property="euType"/>
		</association>
	</resultMap>	
	<select id="queryMedRecDocList" resultMap="ResultMapEmrMedRecDoc">
		select rec.PK_REC,
			rec.PK_PATREC,
			rec.NAME,
			rec.SEQ_NO,
			rec.REC_DATE,
			rec.DESCRIBE,
			rec.PK_PI,
			rec.TIMES,
			rec.PK_PV,
			rec.PK_DEPT,
			rec.PK_WARD,
			rec.TYPE_CODE,
			rec.PK_TMP,
			rec.PK_DOC,
			rec.FLAG_AUDIT,
			rec.EU_AUDIT_LEVEL,
			rec.AUDIT_LEVEL_SET,
			rec.EU_DOC_STATUS,
			rec.EU_AUDIT_STATUS,
			rec.FLAG_AUDIT_FINISH,
			rec.SUBMIT_DATE,
			rec.PK_EMP_INTERN,
			rec.INTERN_SIGN_DATE,
			rec.PK_EMP_REFER_ACT,
			rec.PK_EMP_REFER,
			rec.REFER_AUDIT_DATE,
			rec.REFER_SIGN_DATE,
			rec.PK_EMP_CONSULT_ACT,
			rec.PK_EMP_CONSULT,
			rec.CONSULT_AUDIT_DATE,
			rec.CONSULT_SIGN_DATE,
			rec.PK_EMP_DIRECTOR_ACT,
			rec.PK_EMP_DIRECTOR,
			rec.DIRECTOR_AUDIT_DATE,
			rec.DIRECTOR_SIGN_DATE,
			rec.FLAG_PRINT,
			rec.DEL_FLAG,
			rec.REMARK,
			rec.CREATOR,
			rec.CREATE_TIME,
			rec.TS,
			typ.name type_name,
			emp.name create_name,
			typ.FLAG_NEW_PAGE,
			doc.doc_data,
			doc.file_name,
			doc.file_path,
			doc.file_type,
			doc.doc_xml,
			doc.doc_data_bak,
			doc.doc_xml_bak,
			temp.TEXT_TITLE,
			temp.TMP_TITLE,
			temp.PK_TMP,
			temp.TMP_PATH,
			temp.TYPE_CODE,
			temp.EU_TYPE,
			temp.name temp_name
		from emr_med_rec rec,emr_doc_type typ,view_emr_emp_list emp,emr_med_doc doc,EMR_TEMPLATE temp
		WHERE rec.del_flag!='1'
		  and rec.pk_doc=doc.pk_doc
		  and rec.type_code=typ.code
		  and rec.creator=emp.pk_emp
		  and rec.PK_TMP=temp.PK_TMP
		<if test="pkPv != null">
			and rec.pk_pv = #{pkPv,jdbcType=VARCHAR}
		</if>
		<if test="flagCourse != null">
			and typ.flag_course = #{flagCourse,jdbcType=VARCHAR}
		</if>
		<if test="flagMerge != null">
			and temp.flag_merge = #{flagMerge,jdbcType=VARCHAR}
		</if>
		order by rec.rec_date,rec.seq_no
	</select>
		<select id="queryMedRecDocListEmr" resultMap="ResultMapEmrMedRecDoc">
		select rec.PK_REC,
			rec.PK_PATREC,
			rec.NAME,
			rec.SEQ_NO,
			rec.REC_DATE,
			rec.DESCRIBE,
			rec.PK_PI,
			rec.TIMES,
			rec.PK_PV,
			rec.PK_DEPT,
			rec.PK_WARD,
			rec.TYPE_CODE,
			rec.PK_TMP,
			rec.PK_DOC,
			rec.FLAG_AUDIT,
			rec.EU_AUDIT_LEVEL,
			rec.AUDIT_LEVEL_SET,
			rec.EU_DOC_STATUS,
			rec.EU_AUDIT_STATUS,
			rec.FLAG_AUDIT_FINISH,
			rec.SUBMIT_DATE,
			rec.PK_EMP_INTERN,
			rec.INTERN_SIGN_DATE,
			rec.PK_EMP_REFER_ACT,
			rec.PK_EMP_REFER,
			rec.REFER_AUDIT_DATE,
			rec.REFER_SIGN_DATE,
			rec.PK_EMP_CONSULT_ACT,
			rec.PK_EMP_CONSULT,
			rec.CONSULT_AUDIT_DATE,
			rec.CONSULT_SIGN_DATE,
			rec.PK_EMP_DIRECTOR_ACT,
			rec.PK_EMP_DIRECTOR,
			rec.DIRECTOR_AUDIT_DATE,
			rec.DIRECTOR_SIGN_DATE,
			rec.FLAG_PRINT,
			rec.DEL_FLAG,
			rec.REMARK,
			rec.CREATOR,
			rec.CREATE_TIME,
			rec.TS,
			typ.name type_name,
			emp.name create_name,
			typ.FLAG_NEW_PAGE,
			doc.doc_data,
			doc.file_name,
			doc.file_path,
			doc.file_type,
			doc.doc_xml,
			doc.doc_data_bak,
			doc.doc_xml_bak,
			temp.TEXT_TITLE,
			temp.TMP_TITLE,
			temp.PK_TMP,
			temp.TMP_PATH,
			temp.TYPE_CODE,
			temp.name temp_name
		from emr_med_rec rec,emr_doc_type typ,view_emr_emp_list emp,${dbName}emr_med_doc doc,EMR_TEMPLATE temp
		WHERE rec.del_flag!='1'
		  and rec.pk_doc=doc.pk_doc
		  and rec.type_code=typ.code
		  and rec.creator=emp.pk_emp
		  and rec.PK_TMP=temp.PK_TMP
		<if test="pkPv != null">
			and rec.pk_pv = #{pkPv,jdbcType=VARCHAR}
		</if>
		<if test="flagCourse != null">
			and typ.flag_course = #{flagCourse,jdbcType=VARCHAR}
		</if>		
		order by rec.rec_date,rec.seq_no
	</select>
	<select id="queryHisHomePageOrDt" parameterType="java.util.Map"  resultType="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePageOrDt">
		select dept.code_dept,
		       dept.name_dept,
		       pv.name_pi,
		       ord.code_ord,
		       (case when ord.DOSAGE &lt;'1' then ord.name_ord || '(' || to_char(ord.dosage,'fm9999990.00') || bu.name || ')'  else ord.name_ord || '(' || to_char(ord.dosage) || bu.name || ')' end ) drug_name,
		       <!-- ord.name_ord||'('||ord.dosage||bu.name||')' drug_name, -->
		       ord.date_start begin_date,
		       nvl(ord.date_stop,ord.date_start) end_date,
		       ord.dosage,
		       bu.name  dosage_unit,
		       ord.quan,
		       buu.name unit
		  from cn_order ord
		 inner join bd_pd pd
		    on ord.pk_ord = pd.pk_pd
		 inner join bd_ou_dept dept
		    on ord.pk_dept = dept.pk_dept
		 inner join pv_encounter pv
		    on ord.pk_pv = pv.pk_pv
		 inner join bd_unit bu
		    on ord.pk_unit_dos = bu.pk_unit
		 inner join bd_unit buu
		    on ord.pk_unit = buu.pk_unit
		 where pd.flag_chrt = '1'
		   and ord.pk_pv = #{pkPv,jdbcType=CHAR} 
		   and ord.eu_status_ord not in ('0','1','9') 
		   and exists 
			   (select pk_cnord from ex_order_occ 
			      where pk_cnord=ord.pk_cnord and pk_pv=ord.pk_pv and eu_status='1')
		 order by ord.pk_pv, ord.ordsn 
	</select>
	<select id="queryHisHomePageOrDtSql" parameterType="java.util.Map"  resultType="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePageOrDt">
		select dept.code_dept,
		       dept.name_dept,
		       pv.name_pi,
		       ord.code_ord,
		       <!-- (case when ord.DOSAGE &lt;'1' then ord.name_ord || '(' || ord.dosage || bu.name || ')'  else ord.name_ord || '(' || ord.dosage || bu.name || ')' end ) drug_name, -->
		       ord.name_ord+'('+cast(ord.dosage as varchar)+bu.name+')' drug_name,
		       ord.date_start begin_date,
		       nvl(ord.date_stop,ord.date_start) end_date,
		       ord.dosage,
		       bu.name  dosage_unit,
		       ord.quan,
		       buu.name unit
		  from cn_order ord
		 inner join bd_pd pd
		    on ord.pk_ord = pd.pk_pd
		 inner join bd_ou_dept dept
		    on ord.pk_dept = dept.pk_dept
		 inner join pv_encounter pv
		    on ord.pk_pv = pv.pk_pv
		 inner join bd_unit bu
		    on ord.pk_unit_dos = bu.pk_unit
		 inner join bd_unit buu
		    on ord.pk_unit = buu.pk_unit
		 where pd.flag_chrt = '1'
		   and ord.pk_pv = #{pkPv,jdbcType=CHAR} 
		   and ord.eu_status_ord not in ('0','1','9') 
		   and exists 
			   (select pk_cnord from ex_order_occ 
			      where pk_cnord=ord.pk_cnord and pk_pv=ord.pk_pv and eu_status='1')
		 order by ord.pk_pv, ord.ordsn 
	</select>
	<update id="renewRec" parameterType="java.util.Map" >
        UPDATE EMR_MED_REC
        <set>
            <if test="pkRec != null" >
                pk_rec = #{pkRec,jdbcType=CHAR},
            </if>
            <if test="pkPatrec != null" >
                pk_patrec = #{pkPatrec,jdbcType=VARCHAR},
            </if>
            <if test="name != null" >
                name = #{name,jdbcType=VARCHAR},
            </if>
            <if test="seqNo != null" >
                seq_no = #{seqNo,jdbcType=VARCHAR},
            </if>
            <if test="recDate != null" >
                rec_date = #{recDate,jdbcType=DATE},
            </if>
            <if test="describe != null" >
                describe = #{describe,jdbcType=VARCHAR},
            </if>
            <if test="pkPi != null" >
                pk_pi = #{pkPi,jdbcType=VARCHAR},
            </if>
            <if test="times != null" >
                times = #{times,jdbcType=VARCHAR},
            </if>
            <if test="pkPv != null" >
                pk_pv = #{pkPv,jdbcType=VARCHAR},
            </if>
            <if test="pkDept != null" >
                pk_dept = #{pkDept,jdbcType=VARCHAR},
            </if>
            <if test="pkWard != null" >
                pk_ward = #{pkWard,jdbcType=VARCHAR},
            </if>
            <if test="typeCode != null" >
                type_code = #{typeCode,jdbcType=VARCHAR},
            </if>
            <if test="pkTmp != null" >
                pk_tmp = #{pkTmp,jdbcType=VARCHAR},
            </if>
            <if test="pkDoc != null" >
                pk_doc = #{pkDoc,jdbcType=VARCHAR},
            </if>
            <if test="flagAudit != null" >
                flag_audit = #{flagAudit,jdbcType=CHAR},
            </if>
            <if test="euAuditLevel != null" >
                eu_audit_level = #{euAuditLevel,jdbcType=VARCHAR},
            </if>
            <if test="auditLevelSet != null" >
                audit_level_set = #{auditLevelSet,jdbcType=VARCHAR},
            </if>
            <if test="euDocStatus != null" >
                eu_doc_status = #{euDocStatus,jdbcType=CHAR},
            </if>
            <if test="euAuditStatus != null" >
                eu_audit_status = #{euAuditStatus,jdbcType=CHAR},
            </if>
            <if test="flagAuditFinish != null" >
                flag_audit_finish = #{flagAuditFinish,jdbcType=CHAR},
            </if>
            <if test="pkEmpIntern != null" >
                pk_emp_intern = #{pkEmpIntern,jdbcType=VARCHAR},
            </if>
            <if test="internSignDate != null" >
                intern_sign_date = #{internSignDate,jdbcType=DATE},
            </if>
            <if test="pkEmpReferAct != null" >
                pk_emp_refer_act = #{pkEmpReferAct,jdbcType=VARCHAR},
            </if>
            <if test="pkEmpRefer != null" >
                pk_emp_refer = #{pkEmpRefer,jdbcType=VARCHAR},
            </if>
            <if test="referAuditDate != null" >
                refer_audit_date = #{referAuditDate,jdbcType=DATE},
            </if>
            <if test="referSignDate != null" >
                refer_sign_date = #{referSignDate,jdbcType=DATE},
            </if>
            <if test="pkEmpConsultAct != null" >
                pk_emp_consult_act = #{pkEmpConsultAct,jdbcType=VARCHAR},
            </if>
            <if test="pkEmpConsult != null" >
                pk_emp_consult = #{pkEmpConsult,jdbcType=VARCHAR},
            </if>
            <if test="consultAuditDate != null" >
                consult_audit_date = #{consultAuditDate,jdbcType=DATE},
            </if>
            <if test="consultSignDate != null" >
                consult_sign_date = #{consultSignDate,jdbcType=DATE},
            </if>
            <if test="pkEmpDirectorAct != null" >
                pk_emp_director_act = #{pkEmpDirectorAct,jdbcType=VARCHAR},
            </if>
            <if test="pkEmpDirector != null" >
                pk_emp_director = #{pkEmpDirector,jdbcType=VARCHAR},
            </if>
            <if test="directorAuditDate != null" >
                director_audit_date = #{directorAuditDate,jdbcType=DATE},
            </if>
            <if test="directorSignDate != null" >
                director_sign_date = #{directorSignDate,jdbcType=DATE},
            </if>
            <if test="docData != null" >
                doc_data = #{docData,jdbcType=VARCHAR},
            </if>
            <if test="docXml != null" >
                doc_xml = #{docXml,jdbcType=VARCHAR},
            </if>
            <if test="flagPrint != null">
				FLAG_PRINT = #{flagPrint,jdbcType=CHAR},
			</if>
            <if test="delFlag != null" >
                DEL_FLAG = #{delFlag,jdbcType=CHAR},
            </if>
            <if test="remark != null" >
                REMARK = #{remark,jdbcType=VARCHAR},
            </if>
            <if test="creator != null" >
                CREATOR = #{creator,jdbcType=VARCHAR},
            </if>
            <if test="createTime != null" >
                CREATE_TIME = #{createTime,jdbcType=DATE},
            </if>
            <if test="ts != null" >
                TS = #{ts,jdbcType=DATE},  
            </if>
        </set>
        WHERE 
            pk_rec = #{pkRec,jdbcType=CHAR}
    </update>
    <select id="queryDocListEmrByPks" resultMap="ResultMapMedDoc">
		Select
		*
		from  ${dbName}emr_med_doc where pk_doc in
		<foreach item="item" index="index" collection="list" open="("
			separator="," close=")">
			#{item}
		</foreach>
	</select>
	<update id="updateMedRecEmpAct" parameterType="java.util.Map">
		update
		emr_med_rec
		set
		remark=remark,
		<if test="pkEmpConsult != null">
			pk_emp_consult_act  = (case when pk_emp_consult is null then (case when #{pkEmpConsult,jdbcType=VARCHAR}='' then null else #{pkEmpConsult,jdbcType=VARCHAR} end ) else pk_emp_consult_act end),
		</if>
		<if test="pkEmpDirector != null">
			pk_emp_director_act  = (case when pk_emp_director is null then (case when #{pkEmpDirector,jdbcType=VARCHAR}='' then null else #{pkEmpDirector,jdbcType=VARCHAR} end)  else pk_emp_director_act end),
		</if>
		<if test="pkEmpRefer != null">
			pk_emp_refer_act  = (case when pk_emp_refer is null then #{pkEmpRefer,jdbcType=VARCHAR} else pk_emp_refer_act end),
		</if>	
		where pk_patrec = #{pkPatrec,jdbcType=VARCHAR}
	      and del_flag='0' 
	      and eu_doc_status='0' 
	</update>
	<select id="queryDisTimeBySummaryByPk" parameterType="java.util.Map" resultType="String">
		select doc_txt from emr_txt_data where pk_pv=#{pkPv,jdbcType=VARCHAR} and para_code='0002103' and del_flag='0'
	</select>
	<update id="updHisPiMaster"
		parameterType="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePage">
		UPDATE pi_master
		<set>
			<if test="name != null">
				name_pi = #{name,jdbcType=VARCHAR},
			</if>
			<if test="dtSex != null">
				dt_sex = #{dtSex,jdbcType=CHAR},
			</if>
			<if test="idNo != null">
				id_no = #{idNo,jdbcType=VARCHAR},
			</if>
			<if test="countryCode != null">
				dt_country = #{countryCode,jdbcType=VARCHAR},
			</if>
			<if test="nationCode != null">
				dt_nation = #{nationCode,jdbcType=VARCHAR},
			</if>
			<if test="birthAddrCode != null">
				addrcode_birth = #{birthAddrCode,jdbcType=VARCHAR},
			</if>
			<if test="birthAddr != null">
				addr_birth = #{birthAddr,jdbcType=VARCHAR},
			</if>
			<if test="originAddrCode != null">
				addrcode_origin = #{originAddrCode,jdbcType=VARCHAR},
			</if>
			<if test="originAddr != null">
				addr_origin = #{originAddr,jdbcType=VARCHAR},
			</if>
			<if test="occupCode != null">
				dt_occu = #{occupCode,jdbcType=VARCHAR},
			</if>
			<if test="marryCode != null">
				dt_marry = #{marryCode,jdbcType=VARCHAR},
			</if>
			<if test="currAddr != null">
				addr_cur = #{currAddr,jdbcType=VARCHAR},
			</if>
			<if test="currAddrCode != null">
				addrcode_cur = #{currAddrCode,jdbcType=VARCHAR},
			</if>
			<if test="currAddrDt != null">
				addr_cur_dt = #{currAddrDt,jdbcType=VARCHAR},
			</if>
			<if test="currPhone != null">
				curr_phone = #{currPhone,jdbcType=VARCHAR},
			</if>
			<if test="currZipCode != null">
				postcode_cur = #{currZipCode,jdbcType=VARCHAR},
			</if>
			<if test="resideZipCode != null">
				postcode_regi = #{resideZipCode,jdbcType=VARCHAR},
			</if>
			<if test="resideAddr != null">
				addr_regi = #{resideAddr,jdbcType=VARCHAR},
			</if>
			<if test="resideAddrCode != null">
				addrcode_regi = #{resideAddrCode,jdbcType=VARCHAR},
			</if>
			<if test="resideAddrDt != null">
				addr_regi_dt = #{resideAddrDt,jdbcType=VARCHAR},
			</if>
			<if test="workUnit != null">
				unit_work = #{workUnit,jdbcType=VARCHAR},
			</if>
			<if test="workUnitPhone != null">
				tel_work = #{workUnitPhone,jdbcType=VARCHAR},
			</if>
			<if test="workUnitZipCode != null">
				postcode_work = #{workUnitZipCode,jdbcType=VARCHAR},
			</if>
			<if test="contactName != null">
				name_rel = #{contactName,jdbcType=VARCHAR},
			</if>
			<if test="contactRelatCode != null">
				dt_ralation = #{contactRelatCode,jdbcType=VARCHAR},
			</if>
			<if test="contactAddr != null">
				addr_rel = #{contactAddr,jdbcType=VARCHAR},
			</if>
			<if test="contactPhone != null">
				tel_rel = #{contactPhone,jdbcType=VARCHAR},
			</if>
		</set>
		WHERE
		PK_PI = #{pkPi,jdbcType=VARCHAR}
	</update>
	<select id="queryCurrAddrByCode" parameterType="java.util.Map" resultType="String">
		select note from BD_ADMIN_DIVISION where CODE_DIV=#{codeDiv,jdbcType=VARCHAR} and del_flag='0'
	</select>
	<select id="queryConsultByPk" parameterType="java.util.Map" resultType="com.zebone.nhis.emr.rec.rec.vo.EmrConsult">
		select
			cs.date_cons,
			ord.name_ord,
			dept_app.name_dept name_dept_app,
			dept.name_dept,
			rep.name_emp_rep,
			rep.date_rep,
			rep.con_advice,
			rep.date_input,
			rep.name_emp_input,
			rep.con_reply,
			rep.flag_rep
		from cn_consult_apply cs
			inner join cn_order ord on cs.pk_cnord = ord.pk_cnord
			inner join cn_consult_response rep on rep.pk_cons = cs.pk_cons
			inner join bd_ou_dept dept_app on cs.pk_dept = dept_app.pk_dept
			inner join bd_ou_dept dept on rep.pk_dept_rep = dept.pk_dept
		where ord.pk_pv = #{pkPv,jdbcType=VARCHAR}
					and ord.code_ordtype like '0903%'
					and ord.code_apply is not null
					and ord.eu_status_ord not in ('0', '9')
		order by cs.date_cons desc
	</select>
	<select id="queryHistorytByCodeIp" parameterType="java.util.Map" resultType="com.zebone.nhis.emr.rec.rec.vo.EmrHistory">
		select
		  enc.legal_name name,
		  enc.effective_b dateBegin,
		  enc.effective_e dateEnd,
		  enc.patient_no,
		  enc.patient_id,
		  enc.in_visit_times times,
		  enc.org_id codeDept,
		  enc.org_name nameDept,
		  enc.ward_code codeWard,
		  enc.ward nameWard
		from (select *
		      from view_cis_enc) enc
		where enc.patient_no = #{codeIp,jdbcType=VARCHAR}
		order by enc.in_visit_times desc
	</select>
	<resultMap id="ResultMapPageZls" type="com.zebone.nhis.common.module.emr.rec.rec.EmrHomePageZL">
        <id column="PK_ZL" jdbcType="CHAR" property="pkZl"/>
        <result column="PK_ORG" jdbcType="VARCHAR" property="pkOrg"/>
        <result column="PK_PAGE" jdbcType="VARCHAR" property="pkPage"/>
        <result column="INTENSIVECARE_ZZJHSMC1" jdbcType="VARCHAR" property="intensivecareZzjhsmc1"/>
        <result column="INTENSIVECARE_ZZJHSMC2" jdbcType="VARCHAR" property="intensivecareZzjhsmc2"/>
        <result column="INTENSIVECARE_ZZJHSMC3" jdbcType="VARCHAR" property="intensivecareZzjhsmc3"/>
        <result column="INTENSIVECARE_JRZZJHSSJ1" jdbcType="TIMESTAMP" property="intensivecareJrzzjhssj1"/>
        <result column="INTENSIVECARE_JRZZJHSSJ2" jdbcType="TIMESTAMP" property="intensivecareJrzzjhssj2"/>
        <result column="INTENSIVECARE_JRZZJHSSJ3" jdbcType="TIMESTAMP" property="intensivecareJrzzjhssj3"/>
        <result column="INTENSIVECARE_CZZJHSSJ1" jdbcType="TIMESTAMP" property="intensivecareCzzjhssj1"/>
        <result column="INTENSIVECARE_CZZJHSSJ2" jdbcType="TIMESTAMP" property="intensivecareCzzjhssj2"/>
        <result column="INTENSIVECARE_CZZJHSSJ3" jdbcType="TIMESTAMP" property="intensivecareCzzjhssj3"/>
        <result column="WZBL" jdbcType="CHAR" property="wzbl"/>
        <result column="YNBL" jdbcType="CHAR" property="ynbl"/>
        <result column="MDTBL" jdbcType="CHAR" property="mdtbl"/>
        <result column="DBZBL" jdbcType="CHAR" property="dbzbl"/>
        <result column="RJSSBL" jdbcType="CHAR" property="rjssbl"/>
        <result column="JXCFBL" jdbcType="CHAR" property="jxcfbl"/>
        <result column="ZDFHQK_MZYCY" jdbcType="CHAR" property="zdfhqkMzycy"/>
        <result column="ZDFHQK_RYYCY" jdbcType="CHAR" property="zdfhqkRyycy"/>
        <result column="ZDFHQK_SQYSH" jdbcType="CHAR" property="zdfhqkSqysh"/>
        <result column="ZDFHQK_LCYBL" jdbcType="CHAR" property="zdfhqkLcybl"/>
        <result column="ZDFHQK_FSYBL" jdbcType="CHAR" property="zdfhqkFsybl"/>
        <result column="ZDFHQK_QJCS" jdbcType="VARCHAR" property="zdfhqkQjcs"/>
        <result column="ZDFHQK_CGCS" jdbcType="VARCHAR" property="zdfhqkCgcs"/>
        <result column="TCHR_YW" jdbcType="CHAR" property="tchrYw"/>
        <result column="TCHR_YXJC" jdbcType="CHAR" property="tchrYxjc"/>
        <result column="TCHR_JYJC" jdbcType="CHAR" property="tchrJyjc"/>
        <result column="TCHR_BLJC" jdbcType="CHAR" property="tchrBljc"/>
        <result column="TCHR_QT" jdbcType="CHAR" property="tchrQt"/>
        <result column="DEL_FLAG" jdbcType="CHAR" property="delFlag"/>
        <result column="REMARK" jdbcType="VARCHAR" property="remark"/>
        <result column="CREATOR" jdbcType="VARCHAR" property="creator"/>
        <result column="CREATE_TIME" jdbcType="TIMESTAMP" property="createTime"/>
        <result column="TS" jdbcType="TIMESTAMP" property="ts"/>
    </resultMap>
    <select id="queryHomePageZls" resultMap="ResultMapPageZls">
        SELECT
            *
        FROM
             EMR_HOME_PAGE_ZL
        WHERE            
            PK_PAGE = #{pkPage,jdbcType=VARCHAR}
    </select>
    <update id="syncPatInfoOpByThird" statementType="CALLABLE" parameterType="java.util.Map">
   		{call proc_sync_emr_pat_info_op(#{patientId,mode=IN,jdbcType=VARCHAR},#{times,mode=IN,jdbcType=VARCHAR})}
	</update>
	
	<update id="syncPatInfoIpByThird" statementType="CALLABLE" parameterType="java.util.Map">
   		{call proc_sync_emr_pat_info(#{patientId,mode=IN,jdbcType=VARCHAR},#{times,mode=IN,jdbcType=VARCHAR})}
	</update>
	
	<select id="queryVitalSignsBlood" resultType="DynaBean">
		select
		  row.date_entry,
		  dt.val
		from nd_record record
		inner join nd_record_row row on record.pk_record=row.pk_record
		inner join nd_record_dt dt on row.pk_recordrow=dt.pk_recordrow
		where record.pk_pv=#{pkPv,jdbcType=CHAR} and isnull(record.del_flag,'0')='0' and dt_ndcoltype='20'  and len(val)>0
		order by row.date_entry,dt.val
	</select>
	<select id="queryHisPatRecBac" statementType="CALLABLE" parameterType="java.util.Map" resultType="DynaBean">
   exec emr_proc_his_recc
   #{patientNo, mode=IN,jdbcType=VARCHAR},
   #{times, mode=IN,jdbcType=INTEGER}
</select>
	<update id="syncToHisTjDiag" statementType="CALLABLE" parameterType="java.util.Map">
   		exec emr_proc_get_diag_rectohis
   #{argXml, mode=IN,jdbcType=VARCHAR}
	</update>
	<select id="queryOpPatInfo" parameterType="java.util.Map" resultType="DynaBean" >
        select
        pv.date_begin,
        dept.name_dept,
        pv.eu_pvtype,
        pv.pk_pv,
        pv.code_pv,
        pi.code_op,
        pi.code_ip,
        pv.NAME_PI as name,
        sexdoc.name as sex,
        pv.AGE_PV as age,
        hp.name as medical_Insurance,
        diag.NAME_DIAG as DescDiag,
        pi.code_pi,
        pv.pk_pi,
        pv.NAME_EMP_PHY,
        pi.birth_date,
        pv.bed_no,
        pi.MOBILE,
        pv.PK_INSU,
        pi.MCNO,
        pi.ID_NO,pi.INSUR_NO,pv.ADDRESS,pv.DATE_CLINIC,pv.DT_SEX, pv.eu_pvmode, pv.eu_disetype,
        pv.EU_STATUS,pi.TEL_NO,
        (select count(1) from EMR_GRADE_REC rec where rec.pk_pv=pv.pk_pv and eu_grade_type='clinic' and del_flag='0') flagGrade
        from
        pv_encounter pv
        inner join bd_ou_dept dept on pv.pk_dept = dept.pk_dept
        inner join PI_MASTER pi on pi.pk_pi = pv.pk_pi
        inner join bd_defdoc sexdoc on sexdoc.code = pv.dt_sex and sexdoc.CODE_DEFDOCLIST = '000000' and sexdoc.DEL_FLAG = '0'
        inner join bd_hp hp on hp.pk_hp = pv.pk_insu
        left join pv_diag diag on diag.pk_pv = pv.pk_pv and diag.flag_maj = '1'
        where pv.EU_STATUS!='9' and pv.eu_status>'1' and pv.del_flag = '0' and pv.eu_pvtype = '1'
        <if test="codeOp!=null and codeOp!=''">
            and pi.code_op=#{codeOp,jdbcType=VARCHAR}
        </if>
        <if test="name!=null and name!=''">
            and pi.name_pi=#{name,jdbcType=VARCHAR}
        </if>
        <if test="beginDate != null">
            and  pv.date_begin &gt;= to_date(#{beginDate,jdbcType=VARCHAR},'YYYYMMDDHH24MISS')
        </if>
        <if test="endDate != null">
            and  pv.date_begin &lt; to_date(#{endDate,jdbcType=VARCHAR},'YYYYMMDDHH24MISS')
        </if>
        <if test="pkEmp != null and pkEmp!=''">
            and pv.PK_EMP_PHY = #{pkEmp,jdbcType=CHAR}
        </if>
        <if test="pkDept != null and pkDept!=''">
            and pv.pk_dept = #{pkDept,jdbcType=CHAR}
        </if>
        order by pv.date_begin desc
    </select>
</mapper>
